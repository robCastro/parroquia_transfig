if (self.CavalryLogger) { CavalryLogger.start_js(["KYDbD"]); }

__d("MInitJewelCounts",["Arbiter"],(function(a,b,c,d,e,f,g){"use strict";function a(a){g.inform("m:jewels:init-counts",a,"persistent")}e.exports={main:a}}),null);
__d("MTabbable",["MAria","MJSEnvironment","MViewport","isNodeWithinRect"],(function(a,b,c,d,e,f,g,h,i,j){__p&&__p();function k(a,b){while(a&&a!==b){if(g.isHidden(a))return!0;a=a.parentNode}return!1}function l(a,b){if(a.offsetHeight===0||a.offsetWidth===0||window.getComputedStyle(a).visibility==="hidden"||parseInt(a.tabIndex,10)<0||k(a,b))return!1;if(a.tabIndex>=0)return!0;switch(a.tagName){case"A":return a.href&&a.rel!="ignore";case"INPUT":return a.type!="hidden"&&a.type!="file"&&!a.disabled;case"BUTTON":case"SELECT":case"TEXTAREA":return!a.disabled}return!1}function a(a){__p&&__p();if(!a.getBoundingClientRect)return;var b=h.IS_APPLE_WEBKIT_IOS&&parseFloat(h.OS_VERSION)>=8||h.BROWSER_NAME==="Safari"&&!h.IS_APPLE_WEBKIT_IOS;b=b?a.querySelectorAll("a, button, select, [tabindex]"):a.querySelectorAll("a, button, input, select, textarea, [tabindex]");var c=i.getBoundingRect();for(var d=0,e;e=b[d];d++)if(l(e,a)&&j(e,c)){e.focus();return}}f.focusTabbable=a}),null);
__d("Popover",["CSS","DOM","MAria","MViewport","Stratcom","Vector","$","eventsMixinDeprecated","nullthrows","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){__p&&__p();var q=40;function r(a){"use strict";__p&&__p();var b=a.flyout;b=typeof b==="string"?m(b):b;this.flyout=b;this.content=h.scry(this.flyout,"div","flyout-content")[0];this.options=a;this._onOrientationChange=this._reposition.bind(this);g.conditionClass(this.flyout,"popover_flyout",!0);b=a.button;b&&(b=typeof b==="string"?m(b):b,this.buttonClickListener=h.listen(b,"click",null,this._openHandler.bind(this)),b.setAttribute("role","button"),i.setupPopup(b,this.flyout),this.button=b);b=a.flyoutAnchor;b?this.flyoutAnchor=typeof b==="string"?m(b):b:this.flyoutAnchor=this.button;this.options.flyoutFromRoot&&(this.flyoutClickListener=h.listen(this.flyout,"click",null,this._openHandler.bind(this)));this.options.touchstart_callback&&(this.flyoutTouchStartListener=h.listen(this.flyout,"touchstart",null,this._touchStartHandler.bind(this)));this.options.touchmove_callback&&(this.flyoutTouchMoveListener=h.listen(this.flyout,"touchmove",null,this._touchMoveHandler.bind(this)));this.options.touchend_callback&&(this.flyoutTouchEndListener=h.listen(this.flyout,"touchend",null,this._touchEndHandler.bind(this)));r._instances[this.flyout.id]=this}r.prototype.isOpen=function(){"use strict";return!!this._isOpen};r.prototype.open=function(){"use strict";__p&&__p();if(this.isOpen())return;r._activePopover&&r._activePopover.close();r._activePopover=this;this._isOpen=!0;this.constraint=null;g.conditionClass(this.flyout,"popover_hidden",!1);this.options.flyoutFromRoot&&this._absolutePositionFlyout();this._position();this.options.heightConstraint||(g.conditionClass(o(document.body),"disableClicks",!0),this.globalListener=k.listenCapture("click",null,this._closeHandler.bind(this)));window.addEventListener("orientationchange",this._onOrientationChange,!1);i.showPopup(this.button,this.flyout);if(this.options.ensureVisible){var a=j.getScrollTop(),b=this._getElementPosition(this.flyout).y,c=b+this.flyout.offsetHeight;c=c-(a+j.getUseableHeight());if(c>0){c=Math.min(c,Math.max(b-a-q,0));j.scrollTo(0,a+c)}}this.invoke("open")};r.prototype.close=function(a){"use strict";__p&&__p();if(!this.isOpen())return;r._activePopover=null;this._isOpen=!1;g.conditionClass(this.flyout,"popover_hidden",!0);this.options.flyoutFromRoot&&this.flyoutParent&&(this.flyoutParent.appendChild(this.flyout),delete this.flyoutParent);p(function(){g.conditionClass(o(document.body),"disableClicks",!1)}.bind(this),400);this.globalListener&&this.globalListener.remove();window.removeEventListener("orientationchange",this._onOrientationChange,!1);this._releaseConstraint();i.hidePopup(this.button,this.flyout);a||this.invoke("close")};r.prototype.clear=function(){"use strict";this.globalListener&&this.globalListener.remove(),this.buttonClickListener&&this.buttonClickListener.remove(),this.flyoutClickListener&&this.flyoutClickListener.remove(),this.flyoutTouchStartListener&&this.flyoutTouchStartListener.remove(),this.flyoutTouchMoveListener&&this.flyoutTouchMoveListener.remove(),this.flyoutTouchEndListener&&this.flyoutTouchEndListener.remove(),delete r._instances[this.flyout.id]};r.prototype.refreshConstraints=function(){"use strict";if(!this._isOpen)return!1;var a=this.flyout;this._releaseConstraint();this.options.heightConstraint?(a.style.minHeight=j.getUseableHeight()+"px",this.constraint=j.addHeightConstraint(l.getDim(this.content).y+this._getElementPosition(a).y)):this.constraint=j.addMinHeightConstraint(l.getDim(a).y+this._getElementPosition(a).y+r._MARGIN)};r.prototype._getTouchPoint=function(a){"use strict";var b;a=a.getRawEvent();a instanceof TouchEvent&&(b=a.targetTouches[0]);a={x:b?b.screenX:0,y:b?b.screenY:0};return a};r.prototype._touchStartHandler=function(a){"use strict";var b=this.options.touchstart_callback;b&&b(this._getTouchPoint(a))};r.prototype._touchMoveHandler=function(a){"use strict";if(this.isOpen()){var b=this.options.touchmove_callback;b&&b(this._getTouchPoint(a))}};r.prototype._touchEndHandler=function(a){"use strict";var b=this.options.touchend_callback;b&&b(this._getTouchPoint(a))};r.prototype._openHandler=function(a){"use strict";__p&&__p();a.prevent();a=this.isOpen();if(a&&!this.options.preventClose)this.close();else if(!a){a=h.scry(document,"input");for(var b=0;b<a.length;b++)a[b].blur();this.open()}};r.prototype._closeHandler=function(a){"use strict";a.getNode("popover")||this.close()};r.prototype._getElementPosition=function(a){"use strict";__p&&__p();a=a;var b=a.offsetLeft,c=a.offsetTop;a=a.offsetParent;while(a&&a!==document.documentElement){b+=a.offsetLeft;c+=a.offsetTop;var d=window.getComputedStyle(a);b+=parseInt(d.getPropertyValue("border-left-width").slice(0,-2),10);c+=parseInt(d.getPropertyValue("border-top-width").slice(0,-2),10);a=a.offsetParent}return new l(b,c)};r.prototype._absolutePositionFlyout=function(){"use strict";this.flyoutParent=this.flyout.parentNode;m("root").appendChild(this.flyout);var a=this._getElementPosition(this.flyout.parentNode),b=this._getElementPosition(this.flyoutAnchor),c=l.getDim(this.flyoutAnchor);b=b.y-a.y+c.y;this.flyout.style.position="absolute";this.flyout.style.top=b+"px"};r.prototype._position=function(){"use strict";var a=this.flyout;if(this.flyoutAnchor&&this.options.positionNub){var b=this._getElementPosition(this.flyoutAnchor),c=h.find(this.flyout,"*","nub"),d=l.getDim(c).x,e=l.getDim(this.flyoutAnchor).x;a=this._getElementPosition(a);new l(b.x-a.x+(e-d)/2,0).setPos(c)}this.refreshConstraints()};r.prototype._reposition=function(){"use strict";p(this._position.bind(this),0)};r.prototype._releaseConstraint=function(){"use strict";this.constraint&&(this.constraint.release(),this.constraint=null)};r.getInstance=function(a){"use strict";return r._instances[a]};r.clearAll=function(){"use strict";for(var a=0;a<r._instances.length;a++)r._instances[a].clear()};r._activePopover=null;r._MARGIN=40;r._instances={};n(r,["open","close"]);e.exports=r}),null);
__d("MJewelFlyout",["CSS","DOM","EventEmitter","MHistory","MJSEnvironment","MLogState","MTabbable","MViewport","Popover","Stratcom","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){"use strict";__p&&__p();var r="acw",s="aclb",t=3e3;function u(a,b,c){this.$1=b,this.$2=a,this.$3=c,this.$7=new i()}u.prototype.isOpen=function(){return!!this.$9&&this.$9.isOpen()};u.prototype.open=function(){this.$9&&this.$9.open()};u.prototype.close=function(){this.$9&&this.$9.close()};u.prototype.$10=function(){var a=new o({button:h.find(this.$2,"*","icon"),flyout:this.$1,ensureVisible:!1,heightConstraint:!0,preventClose:!0});this.$9=a;this.$4=a.listen("open",this.$11.bind(this));this.$5=a.listen("close",this.$12.bind(this));this.$6=h.listen(this.$1,"click",null,this.$13.bind(this));k.IS_ANDROID&&k.GET_OS_VERSION>=4&&(this.$8=h.scry(this.$1,"div","scroll-area")[0])};u.prototype.clear=function(){this.$4&&this.$4.remove(),this.$5&&this.$5.remove(),this.$6&&this.$6.remove(),this.$9&&this.$9.clear()};u.prototype.reregisterListeners=function(){var a=this.isOpen();this.clear();this.$10();a&&this.open()};u.prototype.addOpenListener=function(a){return this.$7.addListener("open",a)};u.prototype.$11=function(){if(this.$8){n.scrollToHeader();var a=document.documentElement;a&&(g.conditionClass(a,"hide-scroll",!0),this.$8.style.maxHeight=a.offsetHeight-200+"px")}j.pushSoftState(this.$3.softState);this.$7.emit("open");p.invoke("m:jewel:flyout:open",this.$3.sigil,{jewel:this.$3.sigil});m.focusTabbable(this.$1)};u.prototype.$12=function(){if(this.$8){this.$8.style.minHeight="";var a=document.documentElement;a&&g.conditionClass(a,"hide-scroll",!1)}p.invoke("m:jewel:flyout:close",this.$3.sigil,{jewel:this.$3.sigil});j.popSoftState(this.$3.softState)};u.prototype.$13=function(a){l.updateLink(a,this.$3.pos)};u.prototype.$14=function(a){a.kill()};u.prototype.setHeaderText=function(a,b){if(!a||!b)return;a=h.scry(this.$1,"*",a)[0];if(!a)return;var c=a.cloneNode(!0);c.innerText=b;h.replace(a,c)};u.removeMenuContent=function(a){a=document.getElementById(a);a&&h.remove(a)};u.updateMenuColor=function(a,b,c){c?q(u.$15.bind(this,a,b),t):u.$15(a,b)};u.$15=function(a,b){a=document.getElementById(a);a&&(g.conditionClass(a,s,!b),g.conditionClass(a,r,b))};u.create=function(a,b,c){a=new u(a,b,c);a.$10();return a};e.exports=u}),null);
__d("MJewel",["CSS","DOM","MJewelFlyout","Stratcom","URI","$","eventsMixinDeprecated","intlNumUtils"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){__p&&__p();var o=0;p.create=function(a,b){"use strict";a=new p(a,b);a._init();return a};function p(a,b){"use strict";this._count=0,this._sigil=a,this.options=b||{},this._jewelNode=l(p.JEWEL_NAV_NODE_ID),this._softState=b.softState||"jewel="+o++,this._contentsSigil=b.contentsSigil||"contents",this._additionalPaths=b.additionalPaths||[],this._noPopover=!!b.noPopover,this._preventClearBadge=!!b.preventClearBadge}p.prototype._init=function(){"use strict";if(!this._noPopover){var a=i.create(this._getJewelElement(),this._getFlyoutElement(),{sigil:this._sigil,softState:this._softState,pos:this.options.pos});a.addOpenListener(this.handleViewedContent.bind(this));this._flyout=a}j.listen("m:history:change",null,this._updateJewelsOnHistoryChange.bind(this))};p.prototype._updateJewelsOnHistoryChange=function(a){"use strict";a.getData().soft===this._softState?this._flyout&&this._flyout.open():this._flyout&&this._flyout.close(),this._updateIsJewelActive(a)};p.prototype.isInitialized=function(){"use strict";return!!h.scry(this._jewelNode,"*",this._contentsSigil)[0]};p.prototype._getJewelElement=function(){"use strict";return h.find(this._jewelNode,"div",this._sigil)};p.prototype._getCountElement=function(){"use strict";return h.find(this._getJewelElement(),"span","count")};p.prototype._getContentsElement=function(){"use strict";return h.find(this._getJewelElement(),"*",this._contentsSigil)};p.prototype._getFlyoutElement=function(){"use strict";return h.find(this._getJewelElement(),"*","flyout")};p.prototype.getCount=function(){"use strict";return this._count};p.prototype.getFlyout=function(){"use strict";return this._flyout};p.prototype._updateCountElement=function(){"use strict";var a=this._getJewelCount();h.setContent(this._getCountElement(),n.formatNumberWithThousandDelimiters(a));a=this._getJewelElement();var b=this._count>0;g.conditionClass(a,"noCount",!b);g.conditionClass(a,"hasCount",b)};p.prototype._updateIsJewelActive=function(a){"use strict";var b=new k(a.getData().path);b=b.getPath();a=a.getData().soft;b=!a&&this._additionalPaths.includes(b);a=a===this._softState;g.conditionClass(this._getJewelElement(),"popoverOpen",a||b)};p.prototype.setCount=function(a){"use strict";if(a<0)return;this._count=a;this._updateCountElement()};p.prototype.updateCount=function(a,b){"use strict";!this.isOpen()?this.setCount(a):a&&b()};p.prototype.handleViewedContent=function(){"use strict";this.getCount()>0&&this.isInitialized()?(this._preventClearBadge||this.setCount(0),this.invoke("cleared")):this.invoke("jewel_click")};p.prototype._getJewelCount=function(){"use strict";if(this._count>0)return this._count;else return 0};p.prototype.isOpen=function(){"use strict";return!!this._flyout&&this._flyout.isOpen()};p.prototype.reregisterListeners=function(){"use strict";var a=this._flyout;a&&a.reregisterListeners()};p.JEWEL_NAV_NODE_ID="mJewelNav";m(p,["cleared","jewel_click"]);e.exports=p}),null);
__d("MJewels",[],(function(a,b,c,d,e,f){e.exports={REQUESTS:"requests",MESSAGES:"messages",NOTIFICATIONS:"notifications",SEARCH:"search",MORE:"more",NEWS_FEED:"news-feed",BOOKMARKS:"bookmarks",VIDEOS:"videos",CASUAL_GROUPS:"casual_groups",MARKETPLACE:"marketplace"}}),null);
__d("FriendingSurfaceVisitationTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();function a(){this.$1={}}a.prototype.log=function(){h.log("logger:FriendingSurfaceVisitationLoggerConfig",this.$1,g.BASIC)};a.prototype.logVital=function(){h.log("logger:FriendingSurfaceVisitationLoggerConfig",this.$1,g.VITAL)};a.prototype.logImmediately=function(){h.log("logger:FriendingSurfaceVisitationLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setAppVersion=function(a){this.$1.app_version=a;return this};a.prototype.setBadgeCount=function(a){this.$1.badge_count=a;return this};a.prototype.setClientTimestamp=function(a){this.$1.client_timestamp=a;return this};a.prototype.setRawRefTab=function(a){this.$1.raw_ref_tab=a;return this};a.prototype.setRawTab=function(a){this.$1.raw_tab=a;return this};a.prototype.setRefPage=function(a){this.$1.ref_page=a;return this};a.prototype.setSurface=function(a){this.$1.surface=a;return this};a.prototype.setTargetProfileID=function(a){this.$1.target_profile_id=a;return this};a.prototype.setTime=function(a){this.$1.time=a;return this};a.prototype.setVC=function(a){this.$1.vc=a;return this};a.prototype.setWeight=function(a){this.$1.weight=a;return this};b={app_version:!0,badge_count:!0,client_timestamp:!0,raw_ref_tab:!0,raw_tab:!0,ref_page:!0,surface:!0,target_profile_id:!0,time:!0,vc:!0,weight:!0};e.exports=a}),null);
__d("XFriendRequestIHEventLoggingController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/requests/interaction_history_logging/",{target_id:{type:"FBID",required:!0},log_event:{type:"String",required:!0}})}),null);
__d("MFriendRequestIHEventLogger",["DOM","FBJSON","MRequest","XFriendRequestIHEventLoggingController"],(function(a,b,c,d,e,f,g,h,i,j){__p&&__p();a={listenToProfileClick:function(a,b,c){a=h.parse(a.getAttribute("data-store"));var d=a.userid?a.userid.toString():null;g.listen(c,"click",null,function(){this.logClick(d)}.bind(this));g.listen(b,"click",null,function(){this.logClick(d)}.bind(this))},logImpression:function(a){a&&this._logEvent(a,"impression")},logClick:function(a){a&&this._logEvent(a,"click")},_logEvent:function(a,b){if(isNaN(a))return;a=j.getURIBuilder().setFBID("target_id",a).setString("log_event",b).getURI();new i(a).send()}};e.exports=a}),null);
__d("XExpireFriendRequestsMutationController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/ajax/requests/expire/",{from_m_jewel:{type:"Bool",defaultValue:!1}})}),null);
__d("MFriendingJewel",["Arbiter","DOM","EventListener","FriendingSurfaceVisitationTypedLogger","MarauderLogger","MFriendRequestIHEventLogger","MJewel","MJewels","MJewelsLogger","MLegacyDataStore","MLogState","MPymkFunnelLogger","MRequest","MURI","Popover","Stratcom","XExpireFriendRequestsMutationController","ge","invariant","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z){"use strict";__p&&__p();var A="/friends/center/requests/",B="/friends/center/kaios/",C,D,E=!1,F=!1,G=!1,H=!0,I=!1,J=!1,K=0;function L(){__p&&__p();C||y(0,2795);g.subscribe("m:jewels:init-counts",M,"all");C.listen("cleared",T);C.listen("jewel_click",Q);if(F)return;F=!0;v.listen("jewel_requests_add",null,V);v.listen("jewel_requests_remove_old",null,V);v.listen("friend_requests_expired",null,W);v.listen("jewel_friending_notifs",null,V);v.listen("mobile_requests_count",null,V);v.listen("friend_requests_seen",null,X);v.listen("m:requests:refresh",null,Y);v.listen("removed_item_hidden_event",null,Y);v.listen("m:jewel:flyout:open",null,N);v.listen("m:jewel:flyout:close",null,O);var a=h.find(x(m.JEWEL_NAV_NODE_ID),"div","requests");i.listen(a,"click",P)}function M(a,b){a=b.request_count;if(!C||!a)return;C.reregisterListeners();C.updateCount(a,T);K=a}function N(a){a=a.getData();if(a.jewel!=="requests")return;new s(w.getURIBuilder().setBool("from_m_jewel",!0).getURI()).send();J&&z(function(){return o.markJewelDisplayed("requests")},1)}function O(a){a=a.getData();if(a.jewel!=="requests")return;H=!0}function P(){(D&&D.shouldRedirectRequestsJewel||H)&&(o.markJewelClick("requests",{isFirstClick:!I,badgeCount:K,jewelBehavior:D&&D.shouldRedirectRequestsJewel?"permalink":"flyout"}),K=0,H=!1),I=!0}function Q(){C||y(0,2795),R(),new j().setSurface("jewel").setBadgeCount(C.getCount()).log(),Z.lazyLoadRequestsJewelIfTabOpen()}function R(){__p&&__p();C||y(0,2795);var a=C._getContentsElement();if(!a)return;a=h.scry(a,"div","attachment");var b=[];for(var c=0;c<a.length;c++){var d=a[c].getAttribute("id");d&&d.startsWith("m_jewel_req_")&&(b=b.concat(d.replace("m_jewel_req_","")))}if(b.length){d=new s("/friends/requests/log_impressions");d.setMethod("POST");d.addData({ids:b.join(","),ref:"m_jewel"});d.send()}}function S(){__p&&__p();if(E)return;C||y(0,2795);E=!0;var a=C._getContentsElement();a=h.scry(a,"div","undoable-action");for(var b=0;b<a.length;b++){var c=a[b].getAttribute("data-pymk-id");if(c){var d=a[b].getAttribute("data-signature");r.logImpression(c,d,"mobile_jewel")}else{c=p.get(a[b]).userid;k.log("request_seen","friend_request_waterfall",{request_id:c,request_location:"requests_jewel"});l.logImpression(c?c.toString():null)}}}function T(){v.invoke("m_requests_jewel_mark_read");var a=new s(new t("/a/jewel_requests_read.php").toString());a.send()}function U(){new s("/ajax/mobile/friends/jewel/requests_markup").send()}function V(){if(!C)return;if(C.isOpen())return;U()}function W(){if(!C)return;U()}function X(a){if(!C||G)return;K=0;C.setCount(0)}function Y(){var a=u.getInstance("reqs_flyout");a&&a.refreshConstraints()}var Z={initJewel:function(a){C=m.create("requests",{pos:q.CLICK_POSITION_REQUESTS_FLYOUT,softState:n.REQUESTS,noPopover:a.shouldRedirectRequestsJewel,additionalPaths:[A,B],preventClearBadge:a.preventClearBadge}),D=a,G=a.preventClearBadge,L()},lazyLoadRequestsJewelIfTabOpen:function(){if(C&&C.isOpen()){var a=C._getContentsElement();if(v.hasSigil(a,"requests-flyout-pagelet-placeholder"))return;v.hasSigil(a,"requests-flyout-loading")?U():S()}},onAfterUpdateFriendRequests:function(a){if(!C)return;K=a;!C.isOpen()?C.setCount(a):a&&T();Y();C.isOpen()&&S()},onAfterLoadMoreFriendSuggestions:function(){if(!C)return;Y()},onFlyoutContentDisplayed:function(){if(J)return;J=!0;C&&C.isOpen()&&o.markJewelDisplayed("requests")}};e.exports=Z}),null);
__d("MMessagesThreadRowID",[],(function(a,b,c,d,e,f){"use strict";var g="other_user_fbid_",h="thread_fbid_";function a(a,b,c){return a+(b?g+b:h+String(c))}e.exports={getThreadRowID:a}}),null);
__d("MessagingEvent",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({DELETE:"delete",DELETE_MESSAGES:"delete_messages",DELIVER:"deliver",ERROR:"error",READ:"read",REPORT_SPAM:"report_spam",REPORT_SPAM_MESSAGES:"report_spam_messages",UNMARK_SPAM:"unmark_spam",SUBSCRIBE:"subscribe",CHANGE_MUTE_SETTINGS:"change_mute_settings",TAG:"tag",UNREAD:"unread",UNSUBSCRIBE:"unsubscribe",DELIVER_LOG:"deliver_log",MARK_ALL_READ:"mark_all_read",MARK_ALL_SEEN:"mark_all_seen",MORE_THREADS:"more_threads",READ_ALL:"read_all",READ_RECEIPT:"read_receipt",DELIVERY_RECEIPT:"delivery_receipt",SENT_PUSH:"sent_push",DELIVER_FAST_PAST:"deliver_fast_path",MESSENGER_STATUS:"messenger_status",UPDATE_PINNED_THREADS:"update_pinned_threads",CHANGE_PAGE_THREAD_FLAG:"change_page_thread_flag",CREATE_PAGE_ADMIN_NOTE:"create_page_admin_note",NO_OP:"no_op"})}),null);
__d("XFBConfirmationCliffTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();function a(){this.$1={}}a.prototype.log=function(){h.log("logger:XFBConfirmationCliffLoggerConfig",this.$1,g.BASIC)};a.prototype.logVital=function(){h.log("logger:XFBConfirmationCliffLoggerConfig",this.$1,g.VITAL)};a.prototype.logImmediately=function(){h.log("logger:XFBConfirmationCliffLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setCliffCaller=function(a){this.$1.cliff_caller=a;return this};a.prototype.setError=function(a){this.$1.error=a;return this};a.prototype.setSurface=function(a){this.$1.surface=a;return this};a.prototype.setTime=function(a){this.$1.time=a;return this};a.prototype.setWeight=function(a){this.$1.weight=a;return this};a.prototype.updateExtraData=function(a){a=i(h.serializeMap(a));h.checkExtraDataFieldNames(a,j);this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.addToExtraData=function(a,b){var c={};c[a]=b;return this.updateExtraData(c)};var j={cliff_caller:!0,error:!0,surface:!0,time:!0,weight:!0};e.exports=a}),null);
__d("XMessagesJewelContentController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/mobile/messages/jewel/content/",{spinner_id:{type:"String",required:!0}})}),null);
__d("MMessagesJewel",["Arbiter","Bootloader","ChannelEventType","DOM","MessagingEvent","MJewel","MJewelFlyout","MJewels","MLogState","MMessagesThreadRowID","MRequest","MURI","Popover","Stratcom","XFBConfirmationCliffTypedLogger","XMessagesJewelContentController","fbt","invariant","onAfterTTI"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y){"use strict";__p&&__p();var z="mJewelMsgThreadContents",A="msg_",B,C=!1,D,E=!1;function F(){B||x(0,2795),g.subscribe("m:jewels:init-counts",G,"all"),B.listen("cleared",I),E||(E=!0,t.listen(i.MESSAGE,null,M),t.listen(i.MESSAGE,null,J),t.listen("m:jewel:flyout:open",null,H))}function G(a,b){__p&&__p();a=b.viewer_id;var c=b.unseen_thread_ids;b=b.unread_thread_ids;a&&(P.viewerID=a);c&&(P.unseenThreadIDs=c.reduce(function(a,b){a[b]=1;return a},{}));b&&(P.unreadThreadIDs=b.reduce(function(a,b){a[b]=1;return a},{}));c&&B&&(B.reregisterListeners(),B.updateCount(c.length,I))}function H(a){a=a.getData();if(!B||a.jewel!=="messages")return;P.messengerCliff&&new u().setSurface("messenger_seen").log();a=B.getCount();B.setCount(a);L()}function I(){var a=new q(new r("/a/jewel_messages_read.php").toString());a.send()}function J(a){__p&&__p();a=a.getData();if(!a||!B)return;if(a.event===k.READ&&a.message.folder==="inbox"){var b=a.message.thread_fbid||a.message.other_user_fbid;delete P.unseenThreadIDs[b];delete P.unreadThreadIDs[b]}else if(a.event===k.UNREAD&&a.message.folder==="inbox"){b=a.message.thread_fbid||a.message.other_user_fbid;P.unreadThreadIDs[b]=1}else if(a.event===k.MARK_ALL_READ&&a.message.folder==="inbox")P.unreadThreadIDs={},P.unseenThreadIDs={};else if(a.event===k.MARK_ALL_SEEN&&a.message.folder==="inbox")P.unseenThreadIDs={};else if(a.parsedPayload&&a.folder==="inbox"){b=a.parsedPayload;if(!K(P.viewerID,b)||b.isUnread()===!1||a.message.is_muted)return;a=b.getThreadFBID()||b.getOtherUserFBID();P.unseenThreadIDs[a]=1;P.unreadThreadIDs[a]=1}else return;b=Object.keys(P.unseenThreadIDs).length;a=Object.keys(P.unreadThreadIDs).length;!B.isOpen()&&b!==B.getCount()&&B.setCount(b);b=a>0?w._("Mensajes ({unread_message_count})",[w._param("unread_message_count",a)]):w._("Mensajes");a=B.getFlyout();a&&a.setHeaderText("messages_jewel_header_text",b.toString())}function K(a,b){if(!b.getParticipantIDs())return!1;if(b.getParticipantIDs().indexOf(a)>-1)return!0;if(a)return b.getParticipantIDs().indexOf(a.toString())>-1;else return!1}function L(){B||x(0,2795);var a=B._getJewelElement(),b="messages-flyout-loading";a=j.scry(a,"*",b);if(a.length>0){b=v.getURIBuilder().setString("spinner_id",a[0].getAttribute("id")).getURI();D||(D=new q(b),D.listen("finally",function(){D=null}),D.send())}}function M(a){__p&&__p();a=a.getData();if(!a||!B)return;if(a.parsedPayload){var b=a.parsedPayload;if(!b.getFolder||b.getFolder()!=="inbox"||!K(P.viewerID,b))return;B.isInitialized()&&(m.removeMenuContent(N(b.getOtherUserFBID(),b.getThreadFBID())),B.isOpen()&&I());C||L()}else a.event===k.READ&&a.is_sync&&m.updateMenuColor(N(a.message.other_user_fbid,a.message.thread_fbid),!0,!1)}function N(a,b){return p.getThreadRowID(A,a,b)}function O(a){y(function(){h.loadModules(["MMessagesJewelPrefetch"],function(b){b.init(a)},"MMessagesJewel")})}var P={unseenThreadIDs:{},unreadThreadIDs:{},viewerID:null,messengerCliff:!1,initJewel:function(a){C=!!a.noFlyout,B=l.create("messages",{contentsSigil:z,pos:o.CLICK_POSITION_MESSAGES_FLYOUT,softState:n.MESSAGES,noPopover:C,additionalPaths:["/messages/"]}),F(),!C&&a.prefetchMessageThreads&&O(B)},setMessengerCliff:function(a,b,c){P.messengerCliff=a},refreshMessagesConstraints:function(){s.getInstance("messages_flyout").refreshConstraints()}};e.exports=P}),null);
__d("MNotificationsJewelPrefetch",["MLogState","MPageFetcher","MURI","qex"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k=null,l=[],m=[],n=null;function o(a){if(!j._("806062"))return;a=new i(a.href).addQueryData("refid",g.getRefid()).addQueryData("pos",g.CLICK_POSITION_NOTIFICATIONS_FLYOUT);h.prefetch(a.toString(),{expiration:Date.now()+1e3*60*2})}var p={init:function(a){k=a,l.forEach(p.prefetch),l=[]},prefetch:function(a){if(!k){l.push(a);return}var b=k.getFlyout();if(!b)return;b.isOpen()?o(a):(m.length===0&&m.push(a),n||(n=b.addOpenListener(function(){m.forEach(o),m=[],n&&n.remove(),n=null})))}};e.exports=p}),null);
__d("XBookmarksFlyoutBodyController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/bookmarks/flyout/body/",{id:{type:"String",required:!0}})}),null);
__d("MChromeTabsBootloader",["MJewels","MRequest","Stratcom","XBookmarksFlyoutBodyController"],(function(a,b,c,d,e,f,g,h,i,j){a={bootloadBookmarks:function(a){i.listen(["m:chrome:tab:show","m:jewel:flyout:open"],g.BOOKMARKS,function(){i.removeCurrentListener(),new h(j.getURIBuilder().setString("id",a).getURI()).send()})}};e.exports=a}),null);
__d("MRequestsJewelTitleBadge",["CSS","DataStore","DOM","Stratcom","ge"],(function(a,b,c,d,e,f,g,h,i,j,k){__p&&__p();var l="friends-center-request-item";a={friendingListener:null,init:function(){var a=k("m-jewel-requests-title-badge");if(a){var b=parseInt(h.get(a,"count"),10);b<=0&&g.hide(a)}a=k("m-friend-center-requests-title-badge");a&&(b=parseInt(h.get(a,"count"),10),b<=0&&g.hide(a));this.friendingListener||(this.friendingListener=j.listen("m:optimistic-request-response:click",l,this.decrementBadgeCounts))},updateAfterNewReqs:function(a){var b=k("m-jewel-requests-title-badge");b&&a>0&&(h.set(b,"count",a),g.show(b),i.setContent(b,a))},decrementBadgeCounts:function(a){a=k("m-jewel-requests-title-badge");if(a){var b=parseInt(h.get(a,"count"),10);b=Math.max(b,0)-1;h.set(a,"count",b);b>0?(g.show(a),i.setContent(a,b)):g.hide(a)}a=k("m-friend-center-requests-title-badge");a&&(b=parseInt(h.get(a,"count"),10),b=Math.max(b,0)-1,h.set(a,"count",b),b>0?(g.show(a),i.setContent(a,b)):g.hide(a))}};e.exports=a}),null);
__d("MBeeperController",["Bootloader","CSS","DOM","MHistory","Stratcom","URI","$","cx","getActiveElement","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){__p&&__p();var q,r,s,t,u=[],v,w=3e3;function a(a){v=a,p(function(){k.listen("m_notification",null,x),k.listen("blur",null,y),k.listen("m:history:change",null,D)},w)}function x(a){a=a.getData();if(!a||!a.data||v&&!a.data.type||v&&v.indexOf(a.data.type)===-1)return;a={notification:a.data};C(a);!q&&!r?g.loadModules(["ReactComponentRenderer","MBeeper.react"],function(a,b){q=a,r=b,D()},"MBeeperController"):D()}function y(a){a=a.getTarget();a instanceof HTMLElement&&A(a)&&setTimeout(D,50)}function z(){u.shift(),D()}function A(a){var b=a.tagName;return b==="INPUT"||b==="TEXTAREA"||a.contentEditable==="true"}function B(){return!A(o())&&m("root").offsetHeight!==0}function C(a){var b=u.find(function(b){return b.notification.alert_id===a.notification.alert_id});b||u.push(a)}function D(){__p&&__p();if(!B())return;var a=new l(j.getPath());if(a.getQueryData().soft==="notifications"){u=[];return}a=u[0];if(!a)return;s||(s=i.create("div"),h.addClass(s,"_3hy8"),m("page").appendChild(s));!t?q&&(t=new q(r,s),t.setProps(babelHelpers["extends"]({},a,{onHide:z}))):t.component.isReady()&&t.setProps(a)}f.init=a}),null);
__d("MNotificationClick",["CSS","MLegacyDataStore","MRequest","Stratcom"],(function(a,b,c,d,e,f,g,h,i,j){__p&&__p();var k="notification",l="list_",m="acw",n="aclb",o={},p=!1;e.exports={init:function(){if(p)return;j.listen("click",k,q);j.listen("m:page:render:cache:complete",null,r);p=!0}};function q(a){var b=a.getNode("touchable");if(!b)return;var c=h.get(b).notif_id;if(!c)return;new i("/a/jewel_notifications_log.php").addData({click_type:"notification_click",id:c,target_id:h.get(b).target_id}).send();s(a)}function r(a){if(a.getData().path.indexOf("notifications")>-1)for(var b in o)t(b)}function s(a){__p&&__p();a=a.getNode("marea");if(!a)return;a=a.getAttribute("id");if(!a)return;t(a);var b=a.startsWith(l)?a.substring(l.length):l+a;t(b);o[a]=!0;o[b]=!0}function t(a){a=document.getElementById(a);a&&(g.addClass(a,m),g.removeClass(a,n))}}),null);
__d("MQuickPromotion",["DOM","Stratcom"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=!1;e.exports={main:function(){if(i)return;i=!0;h.listen("click","m-promo-close",function(a){var b=a.getNode("m-promo");a=a.getNode("m-megaphone");g.hide(b,a)})}}}),null);
__d("QPEventHandling",["Stratcom","gkx"],(function(a,b,c,d,e,f,g,h){"use strict";a={registerClickListener:function(a,b,c){if(h("676817")){b="m:qp:"+a.id+":"+b+":sigil";g.addSigil(a,b);g.listen("click",b,c)}else a.addEventListener("click",c)}};e.exports=a}),null);
__d("XQuickPromotionSimpleLoggingController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/qp/action/log/",{qp_id:{type:"Int",required:!0},qp_action:{type:"Enum",enumType:1},qp_instance_log_data:{type:"StringToStringMap",defaultValue:{}},qp_event:{type:"String"}})}),null);
__d("QPRenderer",["CSS","FBLogger","Parent","QPEventHandling","XAsyncRequest","XQuickPromotionSimpleLoggingController","csx","ge"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){"use strict";__p&&__p();function o(a,b,c){a=l.getURIBuilder().setInt("qp_id",a).setString("qp_event",b).setStringToStringMap("qp_instance_log_data",c).getURI();new k(a).send()}function a(a,b,c){a=l.getURIBuilder().setInt("qp_id",a).setEnum("qp_action",b).setStringToStringMap("qp_instance_log_data",c).getURI();new k(a).send()}function b(a,b,c,d,e,f){d=n(d);d!==null?p(a,c,d,f,function(){e&&g.hide(b)}):h("quick_promotion").mustfix("Quick Promotion %s is missing %s action element.",a,c)}function c(a,b,c,d,e){p(a,b,c,e,function(){if(d){var a=i.bySelector(c,"._5jmm");a instanceof HTMLElement&&g.hide(a)}})}function d(a,b,c){b.show();o(a,"view",{});b.subscribe("cancel",function(){o(a,"dialog_cancel",{})});for(var d=0;d<c.length;d++){var e=c[d],f=n(e.element_id);f!==null?(p(a,e.action,f,e.extra_log_data,e.should_close?function(){b.hide()}:function(){}),e.action=="primary"&&f.focus()):h("quick_promotion").mustfix("Quick Promotion %s is missing %s action element.",a,e.action)}}function p(a,b,c,d,e){j.registerClickListener(c,b,function(){var c=l.getURIBuilder().setInt("qp_id",a).setEnum("qp_action",b).setStringToStringMap("qp_instance_log_data",d).getURI();new k(c).send();e()})}f.setAction=b;f.setComponentActionForFeedUnitQP=c;f.setDialogActionsAndShow=d;f.logAction=a;f.logEvent=o}),null);
__d("MQuickPromotionNotificationJewel",["MJewels","QPRenderer","Stratcom"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=!1;a=function(a){function b(b){!j&&b.getData().jewel===g.NOTIFICATIONS&&(h.logEvent(a.promotionID,"view",{}),j=!0)}i.listen("m:jewel:flyout:open",null,b)};f.registerForLogging=a}),null);
__d("MSplashScreenSwRegistration",["PushRegistration","Run","ServiceWorkerRegistration"],(function(a,b,c,d,e,f,g,h,i){a={register:function(a){h.onAfterLoad(function(){i.registerWorkerIfUnregistered(a)})},unregister:function(){if(g.pushPermissionIsOn())return;i.unregisterControllingWorker()}};e.exports=a}),null);
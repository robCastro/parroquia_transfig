if (self.CavalryLogger) { CavalryLogger.start_js(["oCEat"]); }

__d("URLMatcherConfig",[],(function(a,b,c,d,e,f){e.exports={tlds:"(?:\\.(com|\ud55c\uad6d|\uc0bc\uc131|\ub2f7\ucef4|\ub2f7\ub137|\u9999\u6e2f|\u9999\u683c\u91cc\u62c9|\u9910\u5385|\u98df\u54c1|\u98de\u5229\u6d66|\u96fb\u8a0a\u76c8\u79d1|\u96c6\u56e2|\u901a\u8ca9|\u8d2d\u7269|\u8c37\u6b4c|\u8bfa\u57fa\u4e9a|\u8054\u901a|\u7f51\u7edc|\u7f51\u7ad9|\u7f51\u5e97|\u7f51\u5740|\u7ec4\u7ec7\u673a\u6784|\u79fb\u52a8|\u73e0\u5b9d|\u70b9\u770b|\u6fb3\u9580|\u6e38\u620f|\u6de1\u9a6c\u9521|\u673a\u6784|\u66f8\u7c4d|\u65f6\u5c1a|\u65b0\u95fb|\u65b0\u52a0\u5761|\u653f\u5e9c|\u653f\u52a1|\u624b\u8868|\u624b\u673a|\u6211\u7231\u4f60|\u6148\u5584|\u5fae\u535a|\u5e7f\u4e1c|\u5de5\u884c|\u5bb6\u96fb|\u5a31\u4e50|\u5929\u4e3b\u6559|\u5927\u62ff|\u5927\u4f17\u6c7d\u8f66|\u5728\u7ebf|\u5609\u91cc\u5927\u9152\u5e97|\u5609\u91cc|\u5546\u6807|\u5546\u5e97|\u5546\u57ce|\u53f0\u7063|\u53f0\u6e7e|\u516c\u76ca|\u516c\u53f8|\u516b\u5366|\u5065\u5eb7|\u4fe1\u606f|\u4f5b\u5c71|\u4f01\u4e1a|\u4e2d\u6587\u7f51|\u4e2d\u570b|\u4e2d\u56fd|\u4e2d\u4fe1|\u4e16\u754c|\u30dd\u30a4\u30f3\u30c8|\u30d5\u30a1\u30c3\u30b7\u30e7\u30f3|\u30bb\u30fc\u30eb|\u30b9\u30c8\u30a2|\u30b3\u30e0|\u30b0\u30fc\u30b0\u30eb|\u30af\u30e9\u30a6\u30c9|\u307f\u3093\u306a|\u10d2\u10d4|\u0e44\u0e17\u0e22|\u0e04\u0e2d\u0e21|\u0dbd\u0d82\u0d9a\u0dcf|\u0d2d\u0d3e\u0d30\u0d24\u0d02|\u0cad\u0cbe\u0cb0\u0ca4|\u0c2d\u0c3e\u0c30\u0c24\u0c4d|\u0b9a\u0bbf\u0b99\u0bcd\u0b95\u0baa\u0bcd\u0baa\u0bc2\u0bb0\u0bcd|\u0b87\u0bb2\u0b99\u0bcd\u0b95\u0bc8|\u0b87\u0ba8\u0bcd\u0ba4\u0bbf\u0baf\u0bbe|\u0b2d\u0b3e\u0b30\u0b24|\u0aad\u0abe\u0ab0\u0aa4|\u0a2d\u0a3e\u0a30\u0a24|\u09ad\u09be\u09f0\u09a4|\u09ad\u09be\u09b0\u09a4|\u09ac\u09be\u0982\u09b2\u09be|\u0938\u0902\u0917\u0920\u0928|\u092d\u093e\u0930\u094b\u0924|\u092d\u093e\u0930\u0924\u092e\u094d|\u092d\u093e\u0930\u0924|\u0928\u0947\u091f|\u0915\u0949\u092e|\u0680\u0627\u0631\u062a|\u067e\u0627\u06a9\u0633\u062a\u0627\u0646|\u0647\u0645\u0631\u0627\u0647|\u0645\u0648\u0642\u0639|\u0645\u0648\u0628\u0627\u064a\u0644\u064a|\u0645\u0644\u064a\u0633\u064a\u0627|\u0645\u0635\u0631|\u0643\u0648\u0645|\u0643\u0627\u062b\u0648\u0644\u064a\u0643|\u0642\u0637\u0631|\u0641\u0644\u0633\u0637\u064a\u0646|\u0639\u0645\u0627\u0646|\u0639\u0631\u0628|\u0639\u0631\u0627\u0642|\u0634\u0628\u0643\u0629|\u0633\u0648\u0631\u064a\u0629|\u0633\u0648\u062f\u0627\u0646|\u062a\u0648\u0646\u0633|\u0628\u06be\u0627\u0631\u062a|\u0628\u064a\u062a\u0643|\u0628\u0627\u0632\u0627\u0631|\u0628\u0627\u0631\u062a|\u0627\u06cc\u0631\u0627\u0646|\u0627\u0645\u0627\u0631\u0627\u062a|\u0627\u0644\u0645\u063a\u0631\u0628|\u0627\u0644\u0639\u0644\u064a\u0627\u0646|\u0627\u0644\u0633\u0639\u0648\u062f\u064a\u0629|\u0627\u0644\u062c\u0632\u0627\u0626\u0631|\u0627\u0644\u0627\u0631\u062f\u0646|\u0627\u0631\u0627\u0645\u0643\u0648|\u0627\u062a\u0635\u0627\u0644\u0627\u062a|\u0627\u0628\u0648\u0638\u0628\u064a|\u05e7\u05d5\u05dd|\u0570\u0561\u0575|\u049b\u0430\u0437|\u0443\u043a\u0440|\u0441\u0440\u0431|\u0441\u0430\u0439\u0442|\u0440\u0444|\u0440\u0443\u0441|\u043e\u0440\u0433|\u043e\u043d\u043b\u0430\u0439\u043d|\u043c\u043e\u0441\u043a\u0432\u0430|\u043c\u043e\u043d|\u043c\u043a\u0434|\u043a\u043e\u043c|\u043a\u0430\u0442\u043e\u043b\u0438\u043a|\u0435\u044e|\u0434\u0435\u0442\u0438|\u0431\u0435\u043b|\u0431\u0433|\u03b5\u03bb|zw|zuerich|zone|zm|zippo|zip|zero|zara|zappos|za|yun|yt|youtube|you|yokohama|yoga|yodobashi|ye|yandex|yamaxun|yahoo|yachts|xyz|xxx|xperia|xn--zfr164b|xn--ygbi2ammx|xn--yfro4i67o|xn--y9a3aq|xn--xkc2dl3a5ee0h|xn--xkc2al3hye2a|xn--xhq521b|xn--wgbl6a|xn--wgbh1c|xn--w4rs40l|xn--w4r85el8fhu5dnra|xn--vuq861b|xn--vhquv|xn--vermgensberatung-pwb|xn--vermgensberater-ctb|xn--unup4y|xn--tiq49xqyj|xn--tckwe|xn--t60b56a|xn--ses554g|xn--s9brj9c|xn--rvc1e0am3e|xn--rovu88b|xn--rhqv96g|xn--qxam|xn--qcka1pmc|xn--q9jyb4c|xn--pssy2u|xn--pgbs0dh|xn--pbt977c|xn--p1ai|xn--p1acf|xn--ogbpf8fl|xn--o3cw4h|xn--nyqy26a|xn--nqv7fs00ema|xn--nqv7f|xn--node|xn--ngbrx|xn--ngbe9e0a|xn--ngbc5azd|xn--mxtq1m|xn--mk1bu44c|xn--mix891f|xn--mgbx4cd0ab|xn--mgbtx2b|xn--mgbt3dhd|xn--mgbpl2fh|xn--mgbi4ecexp|xn--mgbgu82a|xn--mgberp4a5d4ar|xn--mgbca7dzdo|xn--mgbc0a9azcg|xn--mgbbh1a71e|xn--mgbbh1a|xn--mgbb9fbpob|xn--mgbayh7gpa|xn--mgbai9azgqp6j|xn--mgbab2bd|xn--mgbaam7a8h|xn--mgbaakc7dvf|xn--mgba7c0bbn0a|xn--mgba3a4f16a|xn--mgba3a3ejt|xn--mgb9awbf|xn--lgbbat1ad8j|xn--l1acc|xn--kput3i|xn--kpu716f|xn--kpry57d|xn--kprw13d|xn--kcrx77d1x4a|xn--jvr189m|xn--jlq61u9w7b|xn--j6w193g|xn--j1amh|xn--j1aef|xn--io0a7i|xn--imr513n|xn--i1b6b1a6a2e|xn--hxt814e|xn--h2brj9c8c|xn--h2brj9c|xn--h2breg3eve|xn--gk3at1e|xn--gecrj9c|xn--gckr3f0f|xn--g2xx48c|xn--fzys8d69uvgm|xn--fzc2c9e2c|xn--fpcrj9c3d|xn--flw351e|xn--fjq720a|xn--fiqz9s|xn--fiqs8s|xn--fiq64b|xn--fiq228c5hs|xn--fhbei|xn--fct429k|xn--estv75g|xn--efvy88h|xn--eckvdtc9d|xn--e1a4c|xn--d1alf|xn--d1acj3b|xn--czru2d|xn--czrs0t|xn--czr694b|xn--clchc0ea0b2g2a9gcd|xn--cg4bki|xn--cck2b3b|xn--c2br7g|xn--c1avg|xn--bck1b9a5dre4c|xn--b4w605ferd|xn--9krt00a|xn--9et52u|xn--9dbq2a|xn--90ais|xn--90ae|xn--90a3ac|xn--8y0a063a|xn--80aswg|xn--80asehdb|xn--80aqecdr1a|xn--80ao21a|xn--80adxhks|xn--6qq986b3xl|xn--6frz82g|xn--5tzm5g|xn--5su34j936bgsg|xn--55qx5d|xn--55qw42g|xn--54b7fta0cc|xn--4gbrim|xn--45q11c|xn--45brj9c|xn--45br5cyl|xn--42c2d9a|xn--3pxu8k|xn--3oq18vl8pn36a|xn--3hcrj9c|xn--3e0b707e|xn--3ds443g|xn--3bst00m|xn--30rr7y|xn--2scrj9c|xn--1qqw23a|xn--1ck2e1b|xn--11b4c3d|xin|xihuan|xfinity|xerox|xbox|wtf|wtc|ws|wow|world|works|work|woodside|wolterskluwer|wme|winners|wine|windows|win|williamhill|wiki|wien|whoswho|wf|weir|weibo|wedding|wed|website|weber|webcam|weatherchannel|weather|watches|watch|warman|wanggou|wang|walter|walmart|wales|vuelos|vu|voyage|voto|voting|vote|volvo|volkswagen|vodka|vn|vlaanderen|vivo|viva|vistaprint|vista|vision|visa|virgin|vip|vin|villas|viking|vig|video|viajes|vi|vg|vet|versicherung|verm\xf6gensberatung|verm\xf6gensberater|verisign|ventures|vegas|ve|vc|vanguard|vana|vacations|va|uz|uy|us|ups|uol|uno|university|unicom|uk|ug|uconnect|ubs|ubank|ua|tz|tw|tvs|tv|tushu|tunes|tui|tube|tt|trv|trust|travelersinsurance|travelers|travelchannel|travel|training|trading|trade|tr|toys|toyota|town|tours|total|toshiba|toray|top|tools|tokyo|today|to|tn|tmall|tm|tl|tkmaxx|tk|tjx|tjmaxx|tj|tirol|tires|tips|tiffany|tienda|tickets|tiaa|theatre|theater|thd|th|tg|tf|teva|tennis|temasek|telefonica|telecity|tel|technology|tech|team|tdk|td|tci|tc|taxi|tax|tattoo|tatar|tatamotors|target|taobao|talk|taipei|tab|sz|systems|symantec|sydney|sy|sx|swiss|swiftcover|swatch|sv|suzuki|surgery|surf|support|supply|supplies|sucks|su|style|study|studio|stream|store|storage|stockholm|stcgroup|stc|statoil|statefarm|statebank|starhub|star|staples|stada|st|srt|srl|sr|spreadbetting|spot|sport|spiegel|space|soy|sony|song|solutions|solar|sohu|software|softbank|social|soccer|so|sncf|sn|smile|smart|sm|sling|sl|skype|sky|skin|ski|sk|sj|site|singles|sina|silk|si|shriram|showtime|show|shouji|shopping|shop|shoes|shiksha|shia|shell|shaw|sharp|shangrila|sh|sg|sfr|sexy|sex|sew|seven|ses|services|sener|select|seek|security|secure|seat|search|se|sd|scot|scor|scjohnson|science|schwarz|schule|school|scholarships|schmidt|schaeffler|scb|sca|sc|sbs|sbi|sb|saxo|save|sas|sarl|sapo|sap|sanofi|sandvikcoromant|sandvik|samsung|samsclub|salon|sale|sakura|safety|safe|saarland|sa|ryukyu|rwe|rw|run|ruhr|rugby|ru|rsvp|rs|room|rogers|rodeo|rocks|rocher|ro|rmit|rip|rio|ril|rightathome|ricoh|richardli|rich|rexroth|reviews|review|restaurant|rest|republican|report|repair|rentals|rent|ren|reliance|reit|reisen|reise|rehab|redumbrella|redstone|red|recipes|realty|realtor|realestate|read|re|raid|radio|racing|qvc|quest|quebec|qpon|qa|py|pwc|pw|pub|pt|ps|prudential|pru|protection|property|properties|promo|progressive|prof|productions|prod|pro|prime|press|praxi|pramerica|pr|post|porn|politie|poker|pohl|pnc|pn|pm|plus|plumbing|playstation|play|place|pl|pk|pizza|pioneer|pink|ping|pin|pid|pictures|pictet|pics|piaget|physio|photos|photography|photo|phone|philips|phd|pharmacy|ph|pg|pfizer|pf|pet|pe|pccw|pay|passagens|party|parts|partners|pars|paris|panerai|panasonic|page|pa|ovh|ott|otsuka|osaka|origins|organic|org|orange|oracle|open|ooo|onyourside|online|onl|onion|ong|one|omega|om|ollo|oldnavy|olayangroup|olayan|okinawa|office|off|observer|obi|nz|nyc|nu|ntt|nrw|nra|nr|np|nowtv|nowruz|now|norton|northwesternmutual|nokia|no|nl|nissay|nissan|ninja|nikon|nike|nico|ni|nhk|ngo|ng|nfl|nf|nexus|nextdirect|next|news|newholland|new|neustar|network|netflix|netbank|net|nec|ne|nc|nba|navy|natura|nationwide|name|nagoya|nadex|nab|na|mz|my|mx|mw|mv|mutual|museum|mu|mtr|mtn|mt|msd|ms|mr|mq|mp|movistar|movie|mov|motorcycles|moto|moscow|mortgage|mormon|mopar|monster|money|monash|mom|moi|moe|moda|mobily|mobile|mobi|mo|mn|mma|mm|mls|mlb|ml|mk|mitsubishi|mit|mint|mini|mil|microsoft|miami|mh|mg|metlife|merckmsd|meo|menu|men|memorial|meme|melbourne|meet|media|med|me|md|mckinsey|mc|mba|mattel|maserati|marshalls|marriott|markets|marketing|market|map|mango|management|man|makeup|maison|maif|madrid|macys|ma|ly|lv|luxury|luxe|lupin|lundbeck|lu|ltda|ltd|lt|ls|lr|lplfinancial|lpl|love|lotto|lotte|london|lol|loft|locus|locker|loans|loan|lk|lixil|living|live|lipsy|link|linde|lincoln|limo|limited|lilly|like|lighting|lifestyle|lifeinsurance|life|lidl|liaison|li|lgbt|lexus|lego|legal|lefrak|leclerc|lease|lds|lc|lb|lawyer|law|latrobe|latino|lat|lasalle|lanxess|landrover|land|lancome|lancia|lancaster|lamer|lamborghini|ladbrokes|lacaixa|la|kz|kyoto|ky|kw|kuokgroup|kred|krd|kr|kpn|kpmg|kp|kosher|komatsu|koeln|kn|km|kiwi|kitchen|kindle|kinder|kim|kia|ki|kh|kg|kfh|kerryproperties|kerrylogistics|kerryhotels|ke|kddi|kaufen|juniper|juegos|jprs|jpmorgan|jp|joy|jot|joburg|jobs|jo|jnj|jmp|jm|jll|jlc|jio|jewelry|jetzt|jeep|je|jcp|jcb|java|jaguar|iwc|iveco|itv|itau|it|istanbul|ist|ismaili|iselect|is|irish|ir|iq|ipiranga|io|investments|intuit|international|intel|int|insure|insurance|institute|ink|ing|info|infiniti|industries|in|immobilien|immo|imdb|imamat|im|il|ikano|ifm|ieee|ie|id|icu|ice|icbc|ibm|hyundai|hyatt|hughes|hu|ht|hsbc|hr|how|house|hotmail|hotels|hoteles|hot|hosting|host|hospital|horse|honeywell|honda|homesense|homes|homegoods|homedepot|holiday|holdings|hockey|hn|hm|hkt|hk|hiv|hitachi|hisamitsu|hiphop|hgtv|hermes|here|helsinki|help|healthcare|health|hdfcbank|hdfc|hbo|haus|hangout|hamburg|hair|gy|gw|guru|guitars|guide|guge|gucci|guardian|gu|gt|gs|group|grocery|gripe|green|gratis|graphics|grainger|gr|gq|gp|gov|got|gop|google|goog|goodyear|goodhands|goo|golf|goldpoint|gold|godaddy|gn|gmx|gmo|gmbh|gmail|gm|globo|global|gle|glass|glade|gl|giving|gives|gifts|gift|gi|gh|ggee|gg|gf|george|genting|gent|gea|ge|gdn|gd|gbiz|gb|garden|gap|games|game|gallup|gallo|gallery|gal|ga|fyi|futbol|furniture|fund|fun|fujixerox|fujitsu|ftr|frontier|frontdoor|frogans|frl|fresenius|free|fr|fox|foundation|forum|forsale|forex|ford|football|foodnetwork|food|foo|fo|fm|fly|flowers|florist|flir|flights|flickr|fk|fj|fitness|fit|fishing|fish|firmdale|firestone|fire|financial|finance|final|film|fido|fidelity|fiat|fi|ferrero|ferrari|feedback|fedex|fast|fashion|farmers|farm|fans|fan|family|faith|fairwinds|fail|fage|extraspace|express|exposed|expert|exchange|everbank|events|eus|eurovision|eu|etisalat|et|esurance|estate|esq|es|erni|ericsson|er|equipment|epson|epost|enterprises|engineering|engineer|energy|emerck|email|eg|ee|education|edu|edeka|eco|ec|eat|earth|dz|dvr|dvag|durban|dupont|duns|dunlop|duck|dubai|dtv|drive|download|dot|domains|doha|dog|dodge|doctor|docs|do|dnp|dm|dk|dj|diy|dish|discover|discount|directory|direct|digital|diet|diamonds|dhl|dev|design|desi|dentist|dental|democrat|delta|deloitte|dell|delivery|degree|deals|dealer|deal|de|dds|dclk|day|datsun|dating|date|data|dance|dad|dabur|cz|cyou|cymru|cy|cx|cw|cv|cuisinella|cu|csc|cruises|cruise|crs|crown|cricket|creditunion|creditcard|credit|cr|courses|coupons|coupon|country|corsica|coop|cool|cookingchannel|cooking|contractors|contact|consulting|construction|condos|comsec|computer|compare|company|community|commbank|comcast|com|cologne|college|coffee|codes|coach|co|cn|cm|clubmed|club|cloud|clothing|clinique|clinic|click|cleaning|claims|cl|ck|cityeats|city|citic|citi|citadel|cisco|circle|cipriani|ci|church|chrysler|chrome|christmas|chintai|cheap|chat|chase|channel|chanel|ch|cg|cfd|cfa|cf|cern|ceo|center|ceb|cd|cc|cbs|cbre|cbn|cba|catholic|catering|cat|casino|cash|caseih|case|casa|cartier|cars|careers|career|care|cards|caravan|car|capitalone|capital|capetown|canon|cancerresearch|camp|camera|cam|calvinklein|call|cal|cafe|cab|ca|bzh|bz|by|bw|bv|buzz|buy|business|builders|build|bugatti|budapest|bt|bs|brussels|brother|broker|broadway|bridgestone|bradesco|br|box|boutique|bot|boston|bostik|bosch|boots|booking|book|boo|bond|bom|bofa|boehringer|boats|bo|bnpparibas|bnl|bn|bmw|bms|bm|blue|bloomberg|blog|blockbuster|blanco|blackfriday|black|bj|biz|bio|bingo|bing|bike|bid|bible|bi|bharti|bh|bg|bf|bet|bestbuy|best|berlin|bentley|beer|beauty|beats|be|bd|bcn|bcg|bbva|bbt|bbc|bb|bayern|bauhaus|basketball|baseball|bargains|barefoot|barclays|barclaycard|barcelona|bar|bank|band|bananarepublic|banamex|baidu|baby|ba|azure|az|axa|ax|aws|aw|avianca|autos|auto|author|auspost|audio|audible|audi|auction|au|attorney|athleta|at|associates|asia|asda|as|arte|art|arpa|army|archi|aramco|arab|ar|aquarelle|aq|apple|app|apartments|aol|ao|anz|anquan|android|analytics|amsterdam|amica|amfam|amex|americanfamily|americanexpress|am|alstom|alsace|ally|allstate|allfinanz|alipay|alibaba|alfaromeo|al|akdn|airtel|airforce|airbus|aigo|aig|ai|agency|agakhan|ag|africa|afl|afamilycompany|af|aetna|aero|aeg|ae|adult|ads|adac|ad|actor|active|aco|accountants|accountant|accenture|academy|ac|abudhabi|abogado|able|abc|abbvie|abbott|abb|abarth|aarp|aaa))"}}),null);
__d("MAudioStringUtils",["fbt"],(function(a,b,c,d,e,f,g){"use strict";var h=60;function a(a){a=Math.floor(a);var b=Math.floor(a/h);a=a-b*h;a<10&&(a="0"+a);return g._("{minutes}:{seconds}",[g._param("minutes",b),g._param("seconds",a)])}e.exports={secondsToString:a}}),null);
__d("MAudioPost.react",["ix","DOM","Image.react","MAudioStringUtils","React","asset","cx"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m){"use strict";__p&&__p();var n,o=j.secondsToString;b=babelHelpers.inherits(a,k.Component);n=b&&b.prototype;function a(a){n.constructor.call(this,a),this.state={playing:!1,duration:0,currentTime:0},this.audio=document.createElement("audio"),this.audio.src=this.props.videoSource,this.audio.oncanplaythrough=function(){h.hide(this.props.spinner),this.setState(function(b,a){return{duration:this.audio.duration}}.bind(this))}.bind(this),this.audio.onended=function(){clearInterval(this.timeInterval),this.setState(function(b,a){return{playing:!1}})}.bind(this),this.audio.onplay=function(){this.audio.pause(),this.audio.currentTime=0,this.audio.onplay=null}.bind(this),this.audio.play()}a.prototype.$1=function(){clearInterval(this.timeInterval),this.setState(function(a,b){this.audio.pause();return{playing:!1}}.bind(this))};a.prototype.$2=function(){this.timeInterval=setInterval(function(){this.setState(function(a,b){return{currentTime:this.audio.currentTime}}.bind(this))}.bind(this),200),this.setState(function(a,b){this.audio.play();return{playing:!0}}.bind(this))};a.prototype.render=function(){return k.createElement("div",{className:"_6n4h",style:this.state.duration===0?{display:"none"}:{}},this.state.playing?k.createElement(i,{src:g("636290"),onClick:function(){return this.$1()}.bind(this),className:"_6n4i"}):k.createElement(i,{src:g("551458"),onClick:function(){return this.$2()}.bind(this),className:"_6n4i"}),k.createElement("div",{className:"_6n4j"},k.createElement("span",{className:this.state.playing?"_6n1s":""},o(this.state.currentTime)),"/",o(this.state.duration)))};e.exports=a}),null);
__d("MLoadingIndicator.react",["IndicatorType","MJSAnimator","MJSEnvironment","React","ReactDOM","cx"],(function(a,b,c,d,e,f,g,h,i,j,k,l){__p&&__p();var m;b=j.PropTypes;var n=i.IS_APPLE_WEBKIT_IOS,o=i.IS_ANDROID&&i.OS_VERSION<4;c=babelHelpers.inherits(a,j.Component);m=c&&c.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=m.constructor).call.apply(a,[this].concat(d)),this.getClassName=function(){return(this.props.className||"")+" "+((o?"":"_55on")+" _2so"+(this.props.background==="dark"?" _2st":"")+(this.props.background==="light"?" _2ss":"")+(this.props.size==="large"?" _2sq":"")+(this.props.size==="small"?" _2sp":"")+(!o&&!n?" _50cg":"")+(n?" _50ch":"")+(o?" _2su":""))}.bind(this),this.renderGradientIfNeeded=function(){return o||!n?null:j.createElement("div",{className:"_2sr _55on"})},b}a.prototype.componentDidMount=function(){"use strict";o&&(this.$1=new h(k.findDOMNode(this.refs.spinner),g.ANDROID_NONROTATING,!1),this.$1.start())};a.prototype.componentWillUnmount=function(){"use strict";this.$1&&(this.$1.cleanup(),this.$1=null)};a.prototype.render=function(){"use strict";return j.createElement("div",{ref:"spinner",className:this.getClassName()},this.renderGradientIfNeeded())};a.propTypes={background:b.oneOf(["light","dark"]),size:b.oneOf(["small","large"])};a.defaultProps={background:"light",size:"large"};e.exports=a}),null);
__d("MProgressBar.react",["MAnimator","React","cx","joinClasses"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k;b=babelHelpers.inherits(a,h.Component);k=b&&b.prototype;function a(a){k.constructor.call(this,a),this.$1=!1,this.state={value:this.props.initialValue},this.setValue=function(a){this.$1&&this.setState({value:a})}.bind(this)}a.prototype.componentDidMount=function(){this.$1=!0};a.prototype.componentWillUnmount=function(){this.$2&&this.$2.dispose(),this.$1=!1};a.prototype.$3=function(a){var b=this.props;a=Math.min(Math.max((a-b.min)/(b.max-b.min)*100,0),100);return a};a.prototype.$4=function(){var a=this.$3(this.state.value),b=Math.round(a);b="fill"+(b===0?" empty":"")+(b===100?" full":"");return h.createElement("div",{className:b,style:{width:a+"%"}})};a.prototype.animate=function(a,b){var c=this.$3(this.state.value);a=this.$3(a);this.$2&&this.$2.dispose();this.$2=g.play(c,a,b,this.setValue)};a.prototype.render=function(){return h.createElement("div",{className:j(this.props.className,"_lbu")},this.$4())};a.defaultProps={min:0,max:100};e.exports=a}),null);
__d("MComposerBackgroundUploadProgress",["Promise","DOM","Event","MAjaxify","MAjaxifyFormTypes","MLinkHack","MModalDialog","MProgressBar.react","React","ReactDOM","Stratcom","$","cx","fbt","promiseDone","qex","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){"use strict";__p&&__p();var x=5,y=8,z=500,A=.7,B=500,C=1e4,D=250,E=90;function F(a){this.$2=a,this.$3=h.find(this.$2,"div","inprogress"),this.$6=h.find(this.$2,"div","error"),this.$1=r("viewport"),this.$8=!1,this.$10=v._("684052"),this.$11=v._("691282"),this.$4=h.find(this.$3,"div","spinner-container"),this.$5=h.find(this.$3,"div","progress-bar-container"),this.$11&&this.$16(),this.$17(),this.$18(),this.$19(this.$6)}F.prototype.$16=function(){this.$13=p.render(o.createElement(n,{initialValue:0,className:"_6zj1"}),this.$5),this.$12=q.listen("MMultiPhotoUploader:upload:progress",null,function(a){a=a.getData();this.$14=a.totalSize;this.$15=a.totalLoaded;this.$8&&this.$13&&(this.$14===this.$15?this.$13.animate(E,C):this.$13.animate(this.$20(),B))}.bind(this))};F.prototype.$21=function(a){h.show(a),w(function(){this.$2.style.transform="translateY(0%)"}.bind(this),0)};F.prototype.$22=function(a){return new g(function(b,c){this.$2.style.transform="translateY(100%)",w(function(){h.hide(a),b()},z)}.bind(this))};F.prototype.$23=function(a,b){w(function(){u(this.$22(a))}.bind(this),1e3*b)};F.prototype.$24=function(a,b){w(function(){u(this.$22(a),function(){h.remove(a)})}.bind(this),1e3*b)};F.prototype.$17=function(){window.addEventListener("beforeunload",function(a){if(!this.$8)return void 0;var b=t._("A\u00fan estamos subiendo tu publicaci\u00f3n. Si sales ahora, no se publicar\u00e1.");a.returnValue=b;return b}.bind(this))};F.prototype.$18=function(){window.bgUploadInlineComposerCallback=function(){return this.blockNavigateToComposer()}.bind(this)};F.prototype.$19=function(a){var b=h.scry(a,"a");b.map(function(b){return i.listen(b,"click",function(){this.$22(a)}.bind(this))}.bind(this))};F.prototype.$25=function(a,b){__p&&__p();b.kill();var c=a.link;b=[];c.setAttribute("disabled","disabled");b.push({response:function(){F.openModalDialogWithPermalink(c,a.snowflakePermalink),this.$22(this.$7)}.bind(this),error:function(){var a=this.$22(this.$7);a=a.then(function(){return this.showErrorMsg()}.bind(this));u(a)}.bind(this)});j.form(null,a.form,null,k.NO_CACHE,null,!1,b)};F.prototype.$20=function(){var a=this.$15&&this.$14?this.$15/this.$14*100*A:0;return a};F.prototype.$26=function(){this.$13&&this.$13.animate(100,D);return new g(function(a,b){w(function(){a()},D)})};F.prototype.$27=function(){this.$8=!1,this.$15=null,this.$14=null};F.prototype.showErrorMsg=function(){this.$27();var a=this.$22(this.$3);a=a.then(function(){return this.$21(this.$6)}.bind(this));this.$23(this.$6,y);u(a)};F.prototype.setCompleteMsg=function(a,b){h.appendContent(this.$2,a),this.$19(a),this.$7=a,this.$9=b};F.prototype.setBackgroundUploadRunning=function(a,b){__p&&__p();if(!a&&!this.$8)return;if(a){this.$8=!0;this.$13&&b?(this.$13.setValue(this.$20()),h.hide(this.$4),h.show(this.$5),this.$14&&this.$15&&this.$14===this.$15&&(this.$13&&this.$13.animate(E,C))):(h.hide(this.$5),h.show(this.$4));this.$21(this.$3);return}this.$27();a=this.$13?this.$26().then(this.$22.bind(this,this.$3)):this.$22(this.$3);a=a.then(function(){return this.$21(this.$7)}.bind(this));this.$24(this.$7,this.$9||x);u(a)};F.prototype.blockNavigateToComposer=function(){if(this.$8){alert(t._("Podr\u00e1s volver a publicar una vez que se haya subido tu \u00faltima publicaci\u00f3n."));return!0}return!1};F.prototype.isRunning=function(){return this.$8};F.prototype.isWaitingForTagSuggestions=function(){return this.$10};F.prototype.setupTagFriendsButton=function(a){h.listen(a.link,"click",null,this.$25.bind(this,a))};F.openModalDialogWithPermalink=function(a,b){l.remove(a),m.openWithPermalinkURI(a.href,b)};var G=null;e.exports={init:function(){if(!G){var a=h.scry(r("static_templates"),"div","bg-upload-progress-root")[0];if(!a)return null;G=new F(a)}return G},getInstance:function(){return G},isRunning:function(){return!!(G&&G.isRunning())},setUploadFinished:function(a){if(!G)return;G.setCompleteMsg(a.completeMsg,a.msgDismissSeconds);G.setBackgroundUploadRunning(!1)},setUploadError:function(){if(!G)return;G.showErrorMsg()},setupTagFriendsButton:function(a){if(!G)return;G.setupTagFriendsButton(a)},isWaitingForTagSuggestions:function(){return!!(G&&G.isWaitingForTagSuggestions())}}}),null);
__d("UrlMap",["UrlMapConfig","invariant"],(function(a,b,c,d,e,f,g,h){a={resolve:function(a){var b="https";if(a in g)return b+"://"+g[a];a in g||h(0,2511,a);return""}};e.exports=a}),null);
__d("MMultiPhotoUploaderAttachmentType",[],(function(a,b,c,d,e,f){a={VIDEO:"video",PHOTO:"photo",AUDIO:"audio"};e.exports=a}),null);
__d("MMultiPhotoUploaderAttachment.react",["ix","Image.react","MLoadingIndicator.react","MMultiPhotoUploaderAttachmentState","MMultiPhotoUploaderAttachmentType","MProgressBar.react","React","ShimButton.react","asset","cx","fbt","joinClasses"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){__p&&__p();var s,t=2,u=.7,v=500,w=1e4,x=250;b=babelHelpers.inherits(a,m.Component);s=b&&b.prototype;function a(){__p&&__p();var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=s.constructor).call.apply(a,[this].concat(d)),this.$1=!1,this.$2=0,this.state={previewLoaded:!1},this.getError=function(){return this.props.state!==j.ERROR?null:m.createElement("div",{className:"_5r-4"})}.bind(this),this.getAbortButton=function(){var a=this.props.shouldShowWhiteDesign?"_3lx9":"_5r-6",b=this.props.shouldShowWhiteDesign?"_3lxa":"_5r-5";return m.createElement(n,{"aria-label":q._("Eliminar foto"),className:b,"data-sigil":"touchable",onClick:this.props.onRemoveClick},m.createElement("div",{className:a}))}.bind(this),this.getTagCountIndicator=function(){if(this.props.state!==j.UPLOADED&&this.props.state!==j.POLLING_TAG_SUGGESTIONS)return null;if(!this.state.previewLoaded)return null;var a=this.props.tagCount;if(!a)return null;a="_5pt"+(a===1?" _5pu":"")+(a===2?" _5pv":"")+(a>2?" _5pw":"");return m.createElement("div",{className:a})}.bind(this),b}a.prototype.componentDidMount=function(){"use strict";this.$1=!0,(this.props.state===j.UPLOADED||this.props.state===j.POLLING_TAG_SUGGESTIONS)&&!this.state.previewLoaded&&this.loadPreview()};a.prototype.componentDidUpdate=function(a,b){"use strict";if(this.refs.progressBar&&(this.props.state===j.SENDING&&this.props.loaded&&this.props.totalSize))if(this.props.loaded===this.props.totalSize)this.refs.progressBar.animate(100,w);else{var c=100*u*this.props.loaded/this.props.totalSize;this.refs.progressBar.animate(c,v)}a.state===j.SENDING&&this.props.state!==j.SENDING&&this.props.state!==j.ERROR&&this.loadPreview();!b.previewLoaded&&this.state.previewLoaded&&this.props.onPreviewLoaded&&this.props.onPreviewLoaded()};a.prototype.componentWillUnmount=function(){"use strict";this.$1=!1};a.prototype.getLoadingIndicator=function(){"use strict";if(this.props.hideUploadProgress)return null;return this.props.loaded>0&&!this.state.previewLoaded?this.getProgressBar():this.getSpinner()};a.prototype.getProgressBar=function(){"use strict";if(this.props.state===j.ERROR)return null;return this.state.previewLoaded?null:m.createElement("div",{className:"_r6h"},m.createElement(l,{initialValue:0,ref:"progressBar"}))};a.prototype.getSpinner=function(){"use strict";return this.props.state!==j.SENDING&&this.props.state!==j.POLLING_TAG_SUGGESTIONS?null:m.createElement("div",{className:"_451h"+(this.props.state===j.POLLING_TAG_SUGGESTIONS?" _2d1s":"")},m.createElement(i,{className:"_5r-2"}))};a.prototype.loadPreview=function(){"use strict";__p&&__p();if(this.props.type===k.VIDEO){this.setState({previewLoaded:!0});return}var a=++this.$2;this.refs.progressBar&&this.refs.progressBar.animate(100,w);var b=new Image();b.onload=function(){if(!this.$1||a!==this.$2)return;this.refs.progressBar?(this.refs.progressBar.animate(100,x),setTimeout(function(){if(!this.$1||a!==this.$2)return;this.setState({previewLoaded:!0})}.bind(this),x)):this.setState({previewLoaded:!0})}.bind(this);b.src=this.props.imageURI;(b.complete||b.width+b.height>0)&&(b.onload=null,this.setState({previewLoaded:!0}))};a.prototype.getPreviewWithLocalFile=function(a){"use strict";var b=this.props.state===j.SENDING||!this.state.previewLoaded;return b||!this.props.imageURI?!this.props.fileImageURI?null:m.createElement(h,{className:"_5r-3"+(b&&!this.props.hideUploadProgress?" _451j":""),src:this.props.fileImageURI,height:a,width:a}):m.createElement(h,{className:"_5r-3",src:this.props.imageURI,height:a,width:a})};a.prototype.getPreview=function(a,b){"use strict";if(this.props.useLocalFilePreview)return this.getPreviewWithLocalFile(b);if(this.props.state!==j.UPLOADED&&this.props.state!==j.POLLING_TAG_SUGGESTIONS)return null;return!this.state.previewLoaded?null:m.createElement(h,{className:"_5r-3",src:this.props.imageURI,width:a,height:b})};a.prototype.getPhotoBorder=function(){"use strict";var a=null;this.props.shouldShowWhiteDesign&&(a=m.createElement("div",{className:"_23rn"}));return a};a.prototype.getSphericalPhotoIcon=function(){"use strict";return!this.props.isSpherical?null:m.createElement("div",{className:"_42p8"+(!this.state.previewLoaded||this.props.state!==j.UPLOADED&&this.props.state!==j.POLLING_TAG_SUGGESTIONS?" _42p9":"")})};a.prototype.getVideoBadge=function(){"use strict";return this.props.type!==k.VIDEO?null:m.createElement("div",{className:"_451k"},m.createElement(h,{className:"_451l",src:g("484861")}))};a.prototype.render=function(){"use strict";__p&&__p();var a;this.props.shouldShowWhiteDesign?a="_s50":this.props.shouldShowLargeThumbnails?a="_3vnj":a="_51s2";var b=this.props.previewSize-t,c=b;(this.props.state===j.UPLOADED||this.props.state===j.POLLING_TAG_SUGGESTIONS)&&this.state.previewLoaded&&this.props.shouldShowLargeThumbnails&&this.props.thumbnail_width&&this.props.thumbnail_height&&(c=Math.floor(this.props.thumbnail_width*b/this.props.thumbnail_height));var d=this.props.useLocalFilePreview?{}:{width:c};return m.createElement("div",{className:r(this.props.className,a),style:d},m.createElement("div",{onClick:function(){if(this.props.type===k.VIDEO)return;this.props.onThumbnailClicked()}.bind(this),"data-sigil":"touchable",role:"presentation"},this.getPreview(c,b),this.getLoadingIndicator(),this.getError(),this.getTagCountIndicator(),this.getPhotoBorder(),this.getSphericalPhotoIcon(),this.getVideoBadge()),this.getAbortButton())};e.exports=a}),null);
__d("MMultiPhotoUploaderHiddenInputs.react",["React"],(function(a,b,c,d,e,f,g){__p&&__p();var h;b=g.PropTypes;h=babelHelpers.inherits(a,g.Component);h&&h.prototype;a.prototype.render=function(){"use strict";var a=null;this.props.waterfallSource&&(a=g.createElement("input",{name:"waterfall_source",type:"hidden",value:this.props.waterfallSource}));return g.createElement("div",null,a,this.props.photo_fbids.map(function(a){return g.createElement("input",{key:a,type:"hidden",name:"photo_ids["+a+"]",value:a})}),this.props.video_fbids.map(function(a){return g.createElement("input",{key:a,type:"hidden",name:"video_ids["+a+"]",value:a})}))};function a(){"use strict";h.apply(this,arguments)}a.propTypes={photo_fbids:b.array.isRequired,video_fbids:b.array.isRequired,waterfallSource:b.string};e.exports=a}),null);
__d("MMultiPhotoUploaderPlusAttachment.react",["MXUILayout.react","MXUILayoutFillColumn.react","React","ShimButton.react","cx","fbt"],(function(a,b,c,d,e,f,g,h,i,j,k,l){__p&&__p();var m;m=babelHelpers.inherits(a,i.Component);m&&m.prototype;a.prototype.getAttachmentChildContainer=function(){"use strict";if(!this.props.shouldShowWhiteDesign)return null;var a=this.props.shouldShowAddPhotoLabel?i.createElement("div",{className:"_vbw"},l._("Foto")):null,b=this.props.shouldShowAddVideoLabel?i.createElement("div",{className:"_vbw"},l._("V\u00eddeo")):null;return i.createElement(g,null,i.createElement(h,{alignself:"center",className:"_2-24"},i.createElement("div",{className:"_vbx"},i.createElement("div",{className:"_vby"}),a,b)))};a.prototype.getAttachmentClass=function(){"use strict";var a,b=this.props.largeThumbnails;this.props.shouldShowWhiteDesign?a="_vbz":a=(b?"_3vnj":"")+(b?"":" _51s2")+(b?" _14y0":"")+(b?"":" _5e0r");return a};a.prototype.render=function(){"use strict";var a=this.getAttachmentClass(),b=this.getAttachmentChildContainer();return i.createElement(j,{"aria-label":l._("A\u00f1adir foto"),className:a,"data-sigil":"touchable",onClick:this.props.onClick},b)};function a(){"use strict";m.apply(this,arguments)}e.exports=a}),null);
__d("MPhotoUploadDisable",["DOM","Stratcom","fbt"],(function(a,b,c,d,e,f,g,h,i){a={IOS_8_PHOTO_UPLOAD_DISABLE_MESSAGE:i._("No es posible subir fotos en Safari en iOS 8.0 y 8.0.1. Apple ha corregido este problema en la \u00faltima versi\u00f3n de iOS. Actual\u00edzate a iOS 8.0.2 y vuelve a intentarlo."),alertIOS8FileUploadDisabled:function(a){alert(this.IOS_8_PHOTO_UPLOAD_DISABLE_MESSAGE),a.kill()},disableIOS8FileUpload:function(a){this._listeners=[g.listen(a,"click",null,this.alertIOS8FileUploadDisabled.bind(this)),h.listen("m:page:unload",null,this._cleanup.bind(this))]},_cleanup:function(){this._listeners.forEach(function(a){a.remove()})}};e.exports=a}),null);
__d("MPhotoUploadFileInput",["DOM","MTouchClick"],(function(a,b,c,d,e,f,g,h){__p&&__p();function a(a){"use strict";this.$1=a}a.prototype.setChangeHandler=function(a){"use strict";this.$2&&this.$2.remove(),this.$3=a,this.$3!=null&&(this.$2=g.listen(this.$1,"change",null,this.$3))};a.prototype.setClickHandler=function(a){"use strict";this.$4&&this.$4.remove(),this.$5=a,this.$5!=null&&(this.$4=g.listen(this.$1,"click",null,this.$5))};a.prototype.destroy=function(){"use strict";this.setChangeHandler(null),this.setClickHandler(null)};a.prototype.getDOMElement=function(){"use strict";return this.$1};a.prototype.cloneDOMNode=function(){"use strict";var a=this.$1;this.$1=a.cloneNode(!0);this.$1.value="";g.replace(a,this.$1);this.$3&&this.setChangeHandler(this.$3);this.$5&&this.setClickHandler(this.$5);return a};a.prototype.click=function(a){"use strict";var b=a.nativeEvent,c=b.changedTouches;h.click(this.$1,{getRawEvent:function(){return b},getTouch:function(){return c&&c[0]||{}}})};e.exports=a}),null);
/**
 * License: https://www.facebook.com/legal/license/vYaRhD_0hEI/
 */
__d("MegaPixImage",[],(function(a,b,c,d,e,f){__p&&__p();function g(a){var b=a.naturalWidth,c=a.naturalHeight;if(b*c>1024*1024){c=document.createElement("canvas");c.width=c.height=1;c=c.getContext("2d");c.drawImage(a,-b+1,0);return c.getImageData(0,0,1,1).data[3]===0}else return!1}function h(a,b,c){__p&&__p();b=document.createElement("canvas");b.width=1;b.height=c;b=b.getContext("2d");b.drawImage(a,0,0);a=b.getImageData(0,0,1,c).data;b=0;var d=c,e=c;while(e>b){var f=a[(e-1)*4+3];f===0?d=e:b=e;e=d+b>>1}f=e/c;return f===0?1:f}function i(a,b,c){var d=document.createElement("canvas");j(a,d,b,c);return d.toDataURL("image/jpeg",b.quality||.8)}function j(a,b,c,d){__p&&__p();var e=a.naturalWidth,f=a.naturalHeight,i=c.width,j=c.height,l=b.getContext("2d");l.save();k(b,i,j,c.orientation);b=g(a);b&&(e/=2,f/=2);c=1024;b=document.createElement("canvas");b.width=b.height=c;var m=b.getContext("2d");d=d?h(a,e,f):1;i=Math.ceil(c*i/e);j=Math.ceil(c*j/f/d);d=0;var n=0;while(d<f){var o=0,p=0;while(o<e)m.clearRect(0,0,c,c),m.drawImage(a,-o,-d),l.drawImage(b,0,0,c,c,p,n,i,j),o+=c,p+=i;d+=c;n+=j}l.restore();b=m=null}function k(a,b,c,d){__p&&__p();switch(d){case 5:case 6:case 7:case 8:a.width=c;a.height=b;break;default:a.width=b,a.height=c}a=a.getContext("2d");switch(d){case 2:a.translate(b,0);a.scale(-1,1);break;case 3:a.translate(b,c);a.rotate(Math.PI);break;case 4:a.translate(0,c);a.scale(1,-1);break;case 5:a.rotate(.5*Math.PI);a.scale(1,-1);break;case 6:a.rotate(.5*Math.PI);a.translate(0,-c);break;case 7:a.rotate(.5*Math.PI);a.translate(b,-c);a.scale(-1,1);break;case 8:a.rotate(-.5*Math.PI);a.translate(-b,0);break;default:break}}var l=window.URL&&window.URL.createObjectURL?window.URL:window.webkitURL&&window.webkitURL.createObjectURL?window.webkitURL:null;function a(a){__p&&__p();if(a instanceof Blob){var b=new Image();if(!l)throw Error("No createObjectURL function found to create blob url");b.src=l.createObjectURL(a);this.blob=a;a=b}if(!a.naturalWidth&&!a.naturalHeight){var c=this;a.onload=function(){var a=c.imageLoadListeners;if(a){c.imageLoadListeners=null;for(var b=0,d=a.length;b<d;b++)a[b]()}};this.imageLoadListeners=[]}this.srcImage=a}a.isSupported=!!l;a.prototype.render=function(a,b){__p&&__p();if(this.imageLoadListeners){var c=this;this.imageLoadListeners.push(function(){c.render(a,b)});return}b=b||{};var d=this.srcImage.naturalWidth,e=this.srcImage.naturalHeight,f=b.width,g=b.height,h=b.maxWidth,k=b.maxHeight,l=!this.blob||this.blob.type==="image/jpeg";f&&!g?g=e*f/d<<0:g&&!f?f=d*g/e<<0:(f=d,g=e);h&&f>h&&(f=h,g=e*f/d<<0);k&&g>k&&(g=k,f=d*g/e<<0);h={width:f,height:g};for(var m in b)h[m]=b[m];k=a.tagName.toLowerCase();k==="img"?a.src=i(this.srcImage,h,l):k==="canvas"&&j(this.srcImage,a,h,l);typeof this.onrender==="function"&&this.onrender(a)};e.exports=a}),null);
__d("PUWSteps",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({CLIENT_FLOW_BEGIN:"client_flow_begin",CLIENT_SELECT_BEGIN:"client_select_begin",CLIENT_SELECT_SUCCESS:"client_select_success",CLIENT_SELECT_CANCEL:"client_select_cancel",CLIENT_SELECT_FAIL:"client_select_fail",CLIENT_FLOW_POST:"client_flow_post",CLIENT_TRANSFER_BATCH_BEGIN:"client_transfer_batch_begin",CLIENT_UPLOAD_BEGIN:"client_upload_begin",CLIENT_ATTACH_PHOTO:"client_attach_photo",CLIENT_PROCESS_BEGIN:"client_process_begin",CLIENT_PROCESS_SUCCESS:"client_process_success",CLIENT_PROCESS_CANCEL:"client_process_cancel",CLIENT_PROCESS_SKIP:"client_process_skip",CLIENT_PROCESS_FAIL:"client_process_fail",CLIENT_PROCESS_UNAVAILABLE:"client_process_unavailable",CLIENT_SPHERICAL_CHECK_SUCCESS:"client_spherical_check_success",CLIENT_SPHERICAL_CHECK_FAIL:"client_spherical_check_fail",CLIENT_TRANSFER_ENQUEUE:"client_transfer_enqueue",CLIENT_TRANSFER_BEGIN:"client_transfer_begin",CLIENT_TRANSFER_SUCCESS:"client_transfer_success",CLIENT_TRANSFER_CANCEL:"client_transfer_cancel",CLIENT_TRANSFER_FAIL:"client_transfer_fail",CLIENT_TRANSFER_MANUAL_RETRY:"client_transfer_manual_retry",CLIENT_UPLOAD_SUCCESS:"client_upload_success",CLIENT_UPLOAD_FAIL:"client_upload_fail",CLIENT_UPLOAD_CANCEL:"client_upload_cancel",CLIENT_UPLOAD_REMOVE:"client_upload_remove",CLIENT_FACEREC_BEGIN:"client_facerec_begin",CLIENT_FACEREC_SUCCESS:"client_facerec_success",CLIENT_FACEREC_FAIL:"client_facerec_fail",CLIENT_PHOTO_PREVIEW_OPEN:"client_photo_preview_open",CLIENT_PHOTO_PREVIEW_CLOSE:"client_photo_preview_close",CLIENT_TRANSFER_BATCH_SUCCESS:"client_transfer_batch_success",CLIENT_TRANSFER_BATCH_CANCEL:"client_transfer_batch_cancel",CLIENT_TRANSFER_BATCH_FAIL:"client_transfer_batch_fail",CLIENT_PUBLISH_ENQUEUE:"client_publish_enqueue",CLIENT_PUBLISH_BEGIN:"client_publish_begin",CLIENT_PUBLISH_SUCCESS:"client_publish_success",CLIENT_PUBLISH_FAIL:"client_publish_fail",CLIENT_ATTEMPT_FAIL:"client_attempt_fail",CLIENT_FLOW_SUCCESS:"client_flow_success",CLIENT_FLOW_FATAL:"client_flow_fatal",CLIENT_FLOW_GIVEUP:"client_flow_giveup",CLIENT_FLOW_CANCEL:"client_flow_cancel",CLIENT_FLOW_FAIL:"client_flow_fail",CLIENT_FLOW_INCOMPLETE:"client_flow_incomplete",CLIENT_ATTEMPT_INCOMPLETE:"client_attempt_incomplete",CLIENT_FLOW_RETRY:"client_flow_retry",CLIENT_ATTEMPT_RETRY:"client_attempt_retry",CLIENT_DIAGNOSTIC:"client_diagnostic",CLIENT_QUALITY_SWITCH:"client_quality_switch",CLIENT_CANCEL_SURVEY:"client_cancel_survey",CLIENT_PHOTO_EDIT_BEGIN:"client_photo_edit_begin",CLIENT_PHOTO_EDIT_SUCCESS:"client_photo_edit_success",SERVER_UPLOAD_BEGIN:"server_upload_begin",SERVER_UPLOAD_SUCCESS:"server_upload_success",SERVER_UPLOAD_FAIL:"server_upload_fail",SERVER_PUBLISH_BEGIN:"server_publish_begin",SERVER_PUBLISH_SUCCESS:"server_publish_success",SERVER_PUBLISH_FAIL:"server_publish_fail",SERVER_RECEIVER_BEGIN:"server_receiver_begin",SERVER_RECEIVER_PUBLISH_BEGIN:"server_receiver_publish_begin",SERVER_SENTRY_RESTRICTION:"server_sentry_restriction"})}),null);
__d("PhotosUploadWaterfallXMixin",["AsyncSignal","Banzai","PhotosUploadWaterfallXConfig","invariant","randomInt"],(function(a,b,c,d,e,f,g,h,i,j,k){__p&&__p();var l=new Map();function m(a,b){var c={};a.client_time=Math.round(Date.now()/1e3);i.retryBanzai&&(c.retry=!0,a.nonce=k(4294967296));h.post(i.banzaiRoute,a,c);b&&setTimeout(b,0)}function n(a,b){if(i.useBanzai)m(a,b);else{a=new g(i.loggingEndpoint,{data:JSON.stringify(a)}).setHandler(b);i.timeout&&a.setTimeout(10*1e3);a.send()}}e.exports={logStep:function(a,b,c){var d=this.getWaterfallID&&this.getWaterfallID(),e=this.getWaterfallAppName&&this.getWaterfallAppName();if(!d||!e)return;n(babelHelpers["extends"]({step:a,qn:d,uploader:e,ref:this.getWaterfallSource&&this.getWaterfallSource()},b),c)},logPUWStep:function(a,b,c,d,e,f,g){if(f&&f.logOncePerSession){l.has(b)||l.set(b,new Set());if(l.get(b).has(a))return;l.get(b).add(a)}n(Object.assign({step:a,qn:b,uploader:c,ref:d},e),g)}}}),null);
__d("base64toUint8Array",[],(function(a,b,c,d,e,f){function a(a){a=atob(a);var b=a.length,c=new Uint8Array(b);for(var d=0;d<b;d++)c[d]=a.charCodeAt(d);return c}e.exports=a}),null);
__d("DataViewPolyfill",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();function b(a,b,c){b===void 0?this.$1=new Uint8Array(a):c===void 0?this.$1=new Uint8Array(a,b):this.$1=new Uint8Array(a,b,c),this.byteLength=this.$1.byteLength}b.prototype.getUint8=function(a){if(a>=this.$1.length)throw new Error("Trying to read beyond bounds of DataViewPolyfill");return this.$1[a]};b.prototype.getUint16=function(a,b){var c=this.getUint8(a);a=this.getUint8(a+1);return b?a*256+c:c*256+a};b.prototype.getUint32=function(a,b){var c=this.getUint8(a),d=this.getUint8(a+1),e=this.getUint8(a+2);a=this.getUint8(a+3);return b?((a*256+e)*256+d)*256+c:((c*256+d)*256+e)*256+a};b.isSupported=function(){return!!a.Uint8Array};e.exports=b}),null);
__d("getExifOrientation",["DataViewPolyfill"],(function(a,b,c,d,e,f,g){__p&&__p();var h=a.DataView||g;function b(a,b){__p&&__p();var c=new FileReader();c.onload=function(a){__p&&__p();var c="Exif\0\0",d=0,e;a=new h(a.target.result);for(var f=0;f<250;f++)if(a.getUint8(f)===c.charCodeAt(d)){d+=1;e=f+1;if(d===c.length)break}else d=0;if(!d){b(null);return}if(a.getUint8(e)==77&&a.getUint8(e+1)==77)f=!1;else if(a.getUint8(e)==73&&a.getUint8(e+1)==73)f=!0;else{b(null);return}e+=2;e+=2;var g;c=a.getUint32(e,f);e+=c-8+4;d=a.getUint16(e,f);e+=2;for(var c=0;c<Math.min(25,d);c++){g=a.getUint16(e,f);e+=8;if(g==274){g=a.getUint16(e,f);b(g);return}e+=4}b(null)};c.readAsArrayBuffer(a)}e.exports=b}),null);
__d("MPhotoResizer",["MegaPixImage","PhotosUploadWaterfallXMixin","PUWSteps","Vector","base64toUint8Array","getExifOrientation","invariant","mixin","performanceNow","requestAnimationFrame"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){__p&&__p();var q,r="data:image/jpeg;base64,";b=babelHelpers.inherits(a,n(h));q=b&&b.prototype;function a(){"use strict";q.constructor.call(this),this.$MPhotoResizer1=new j(960,960),this.$MPhotoResizer2=.85}a.prototype.setFile=function(a){"use strict";this.$MPhotoResizer3=a;return this};a.prototype.setDimensions=function(a){"use strict";this.$MPhotoResizer1=a;return this};a.prototype.setQuality=function(a){"use strict";this.$MPhotoResizer2=a;return this};a.prototype.setHandler=function(a){"use strict";this.$MPhotoResizer4=a;return this};a.prototype.setWaterfall=function(a,b,c){"use strict";this.$MPhotoResizer5=a;this.$MPhotoResizer6=b;this.$MPhotoResizer7=c;return this};a.prototype.resize=function(){"use strict";__p&&__p();this.$MPhotoResizer3||m(0,3432);this.$MPhotoResizer1||m(0,3433);this.$MPhotoResizer2||m(0,3434);this.$MPhotoResizer4||m(0,3435);this.$MPhotoResizer5||m(0,3436);this.$MPhotoResizer6||m(0,3437);if(!g.isSupported){this.logStep(i.CLIENT_PROCESS_UNAVAILABLE,{error:"canvas_not_supported"});this.$MPhotoResizer4(this.$MPhotoResizer3);return}if(!this.$MPhotoResizer8()){this.logStep(i.CLIENT_PROCESS_UNAVAILABLE,{error:"no_jpeg_output"});this.$MPhotoResizer4(this.$MPhotoResizer3);return}this.logStep(i.CLIENT_PROCESS_BEGIN);var a=o();l(this.$MPhotoResizer3,function(b){__p&&__p();p(function(){__p&&__p();var c=document.createElement("canvas"),d=new g(this.$MPhotoResizer3);d.onrender=function(){__p&&__p();p(function(){var b=c.toDataURL("image/jpeg",this.$MPhotoResizer2);c=null;b=b.substr(r.length);p(function(){var c=k(b);b=null;c=new Blob([c.buffer],{type:"image/jpeg"});this.logStep(i.CLIENT_PROCESS_SUCCESS,{timeResizing:o()-a,originalSize:this.$MPhotoResizer3&&this.$MPhotoResizer3.size,resizedSize:c&&c.size});this.$MPhotoResizer4(c)}.bind(this))}.bind(this))}.bind(this);d.render(c,{maxWidth:this.$MPhotoResizer1.x,maxHeight:this.$MPhotoResizer1.y,orientation:b})}.bind(this))}.bind(this))};a.prototype.$MPhotoResizer8=function(){"use strict";var a=document.createElement("canvas");a.width=1;a.height=1;a=a.toDataURL("image/jpeg");return a.substr(0,r.length)===r};a.prototype.getWaterfallID=function(){"use strict";return this.$MPhotoResizer5};a.prototype.getWaterfallAppName=function(){"use strict";return this.$MPhotoResizer6};a.prototype.getWaterfallSource=function(){"use strict";return this.$MPhotoResizer7};e.exports=a}),null);
__d("XMobilePhotosSaveUnpublishedController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/_mupload_/photo/x/saveunpublished/",{allow_spherical_photo:{type:"Bool",defaultValue:!1},thumbnail_width:{type:"Int"},thumbnail_height:{type:"Int"},waterfall_app_name:{type:"String"},waterfall_id:{type:"String"},waterfall_source:{type:"String"},filter_type:{type:"Int"},use_autoenhance:{type:"Exists",defaultValue:!1},upload_id:{type:"String"},target_id:{type:"Int"},csid:{type:"String"},js_request_module_name:{type:"String"}})}),null);
__d("supportsXHR2",["memoize"],(function(a,b,c,d,e,f,g){function a(){if(!window.FormData||!window.XMLHttpRequest)return!1;var a=new XMLHttpRequest();return"upload"in a&&"withCredentials"in a}e.exports=g(a)}),null);
__d("MPhotoUploadRequest",["ActorURI","CurrentUser","DOM","MPhotoResizer","MRequest","PhotosUploadWaterfallXMixin","PUWSteps","Vector","XMobilePhotosSaveUnpublishedController","invariant","mixin","performanceNow","qex","supportsXHR2"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){__p&&__p();var u;b=babelHelpers.inherits(a,q(l));u=b&&b.prototype;function a(){"use strict";u.constructor.call(this),this.$MPhotoUploadRequest1=0}a.prototype.setClonedFileInput=function(a){"use strict";this.$MPhotoUploadRequest2=a;return this};a.prototype.setAttachedFile=function(a){"use strict";this.$MPhotoUploadRequest3=a;return this};a.prototype.setDTSG=function(a){"use strict";this.$MPhotoUploadRequest4=a;return this};a.prototype.setUploadDomain=function(a){"use strict";this.$MPhotoUploadRequest5=a;return this};a.prototype.setWaterfall=function(a,b,c){"use strict";this.$MPhotoUploadRequest6=a;this.$MPhotoUploadRequest7=b;this.$MPhotoUploadRequest8=c;return this};a.prototype.setHandler=function(a){"use strict";this.$MPhotoUploadRequest9=a;return this};a.prototype.setProgressHandler=function(a){"use strict";this.$MPhotoUploadRequest10=a;return this};a.prototype.setErrorHandler=function(a){"use strict";this.$MPhotoUploadRequest11=a;return this};a.prototype.setThumbnailDimensions=function(a){"use strict";this.$MPhotoUploadRequest12=a;return this};a.prototype.setResizeType=function(a){"use strict";this.$MPhotoUploadRequest13=a;return this};a.prototype.setTargetID=function(a){"use strict";this.$MPhotoUploadRequest14=a;return this};a.prototype.setActorID=function(a){"use strict";this.$MPhotoUploadRequest15=a;return this};a.prototype.setAllowSphericalPhoto=function(a){"use strict";this.$MPhotoUploadRequest16=a;return this};a.prototype.setJpegResizer=function(a){"use strict";return this};a.prototype.send=function(){"use strict";__p&&__p();this.$MPhotoUploadRequest2||p(0,801);this.$MPhotoUploadRequest5||p(0,802);this.$MPhotoUploadRequest4||p(0,803);this.$MPhotoUploadRequest6||p(0,804);this.$MPhotoUploadRequest7||p(0,805);this.$MPhotoUploadRequest8||p(0,806);this.$MPhotoUploadRequest9||p(0,807);this.$MPhotoUploadRequest12||p(0,808);!this.$MPhotoUploadRequest17&&!this.$MPhotoUploadRequest18||p(0,809);!t()?this.$MPhotoUploadRequest19():this.$MPhotoUploadRequest20();return this};a.prototype.$MPhotoUploadRequest21=function(a,b){"use strict";this.logStep(a,babelHelpers["extends"]({retriesNeeded:this.$MPhotoUploadRequest1},b||{}))};a.prototype.abort=function(a){"use strict";if(!this.$MPhotoUploadRequest2)return;this.$MPhotoUploadRequest21(m.CLIENT_TRANSFER_CANCEL,{elapsed_time:r()-this.transferStartTime,bytes:this.fileSize,progress:a});t()?this.$MPhotoUploadRequest22():this.$MPhotoUploadRequest23()};a.prototype.retry=function(){"use strict";this.$MPhotoUploadRequest1++,this.abort(),this.send()};a.prototype.$MPhotoUploadRequest24=function(){"use strict";var a=this.$MPhotoUploadRequest2.files;return a&&a.item&&a.item(0)&&a.item(0).size};a.prototype.$MPhotoUploadRequest25=function(){"use strict";var a=o.getURIBuilder().setBool("allow_spherical_photo",this.$MPhotoUploadRequest16).setInt("thumbnail_width",this.$MPhotoUploadRequest12.x).setInt("thumbnail_height",this.$MPhotoUploadRequest12.y).setString("waterfall_id",this.$MPhotoUploadRequest6).setString("waterfall_app_name",this.$MPhotoUploadRequest7).setString("waterfall_source",this.$MPhotoUploadRequest8).setInt("target_id",this.$MPhotoUploadRequest14).getURI().setProtocol(this.$MPhotoUploadRequest5.getProtocol()).setDomain(this.$MPhotoUploadRequest5.getDomain());return g.create(a,this.$MPhotoUploadRequest15)};a.prototype.$MPhotoUploadRequest20=function(){"use strict";var a=this.$MPhotoUploadRequest3,b=this.$MPhotoUploadRequest13||"no_resize";if(a&&b=="canvas_resize"){b=s._("697678");new j().setFile(a).setWaterfall(this.$MPhotoUploadRequest6,this.$MPhotoUploadRequest7,this.$MPhotoUploadRequest8).setHandler(function(a){this.$MPhotoUploadRequest26(a)}.bind(this)).setDimensions(new n(b,b)).resize()}else this.$MPhotoUploadRequest26(a)};a.prototype.$MPhotoUploadRequest26=function(a){"use strict";__p&&__p();var b=new FormData();b.append(this.$MPhotoUploadRequest2.name,a);this.fileSize=a.size;this.transferStartTime=r();this.$MPhotoUploadRequest21(m.CLIENT_TRANSFER_BEGIN,{bytes:this.fileSize});a=this.$MPhotoUploadRequest17=new k(this.$MPhotoUploadRequest25()).setCORS(!0).setData({fb_dtsg:this.$MPhotoUploadRequest4}).setRawData(b);a.listen("open",function(a){a=a.getTransport();a.withCredentials=!0});a.listen("done",function(a){this.$MPhotoUploadRequest21(m.CLIENT_TRANSFER_SUCCESS,{elapsed_time:r()-this.transferStartTime,bytes:this.fileSize,fbid:a.fbid}),this.$MPhotoUploadRequest9(a)}.bind(this));a.listen("error",function(a){this.$MPhotoUploadRequest21(m.CLIENT_TRANSFER_FAIL,{error_type:"mrequest_fail",elapsed_time:r()-this.transferStartTime,bytes:this.fileSize}),this.$MPhotoUploadRequest11&&this.$MPhotoUploadRequest11(a)}.bind(this));a.listen("uploadprogress",function(a){this.$MPhotoUploadRequest10&&this.$MPhotoUploadRequest10(a)}.bind(this));a.send()};a.prototype.$MPhotoUploadRequest22=function(){"use strict";this.$MPhotoUploadRequest17&&this.$MPhotoUploadRequest17.abort(),this.$MPhotoUploadRequest17=null};a.prototype.$MPhotoUploadRequest27=function(a,b){"use strict";return i.create("input",{type:"hidden",name:a,value:b})};a.prototype.$MPhotoUploadRequest19=function(){"use strict";__p&&__p();var a="MPhotoUpload"+v++,b=this.$MPhotoUploadRequest18=i.create("iframe",{name:a,id:a});b.style.display="none";var c=this.$MPhotoUploadRequest28=i.create("form",{target:a,action:this.$MPhotoUploadRequest25().toString(),method:"POST",enctype:"multipart/form-data"});c.style.display="none";var d={fb_dtsg:this.$MPhotoUploadRequest4,__a:1,__user:h.getID(),upload_id:a};for(var e in d)i.appendContent(c,this.$MPhotoUploadRequest27(e,d[e]));i.appendContent(document.body,b);i.appendContent(document.body,c);i.appendContent(c,this.$MPhotoUploadRequest2);this.fileSize=this.$MPhotoUploadRequest24();w[a]=function(b){if(!b){this.$MPhotoUploadRequest29("no_payload");return}delete w[a];this.$MPhotoUploadRequest23();this.$MPhotoUploadRequest21(m.CLIENT_TRANSFER_SUCCESS,{elapsed_time:r()-this.transferStartTime,bytes:this.fileSize,fbid:b.fbid});this.$MPhotoUploadRequest9(b)}.bind(this);b.onerror=this.$MPhotoUploadRequest29.bind("iframe_onerror");this.transferStartTime=r();this.$MPhotoUploadRequest21(m.CLIENT_TRANSFER_BEGIN,{bytes:this.fileSize});d=window.location.hostname.match(/\.(facebook\.sg|facebookcorewwwi\.onion)$/);document.domain=d?d[1]:"facebook.com";c.submit()};a.prototype.$MPhotoUploadRequest29=function(a){"use strict";this.$MPhotoUploadRequest21(m.CLIENT_TRANSFER_FAIL,{error_type:a,elapsed_time:r()-this.transferStartTime,bytes:this.fileSize}),this.$MPhotoUploadRequest11&&this.$MPhotoUploadRequest11(),this.$MPhotoUploadRequest23()};a.prototype.$MPhotoUploadRequest23=function(){"use strict";this.$MPhotoUploadRequest18&&i.remove(this.$MPhotoUploadRequest18),this.$MPhotoUploadRequest18=null,this.$MPhotoUploadRequest28&&i.remove(this.$MPhotoUploadRequest28),this.$MPhotoUploadRequest28=null};a.prototype.getWaterfallID=function(){"use strict";return this.$MPhotoUploadRequest6};a.prototype.getWaterfallAppName=function(){"use strict";return this.$MPhotoUploadRequest7};a.prototype.getWaterfallSource=function(){"use strict";return this.$MPhotoUploadRequest8};a.handleResponse=function(a,b){"use strict";w[a](b)};var v=0,w={};e.exports=a}),null);
__d("MGraphApiVideoUploader",["FBJSON","URI","UrlMap","ZeroUploadSubdomainModule"],(function(a,b,c,d,e,f,g,h,i,j){__p&&__p();var k=10;function a(a,b,c,d,e,f,g){"use strict";this.$1=a,this.$3=b,this.$2=c,this.$13=d,this.$6=this.$1.size,this.$7=this.$1.name,this.$8=e,this.$9=f,this.$10=g,this.$11=!1}a.prototype.startUploading=function(a){__p&&__p();a===void 0&&(a=k);var b=new FormData();b.append("file_size",this.$6);b.append("title",this.$7);b.append("upload_phase","start");b.append("access_token",this.$3);this.$13&&b.append("is_voice_clip",this.$13);var c=function(b){if(this.$11)return;if(!b||b.error){a==0?this.$9(b.error.error_user_msg):this.startUploading(a-1);return}this.$4=b.upload_session_id;this.$5=b.video_id;this.sendFileChunk(b.start_offset,b.end_offset,k)}.bind(this);this.postRequest("v2.4/"+this.$2+"/videos","POST",b,k,c)};a.prototype.getChunk=function(a,b){"use strict";return this.$1.slice(a,b)};a.prototype.sendFileChunk=function(a,b,c){__p&&__p();c===void 0&&(c=k);if(this.$11)return;var d=new FormData();d.append("upload_phase","transfer");d.append("start_offset",a);d.append("upload_session_id",this.$4);d.append("access_token",this.$3);d.append("video_file_chunk",this.getChunk(a,b));var e=function(d){__p&&__p();if(this.$11)return;if(!d||d.error){if(c==0){this.$9(d.error.error_user_msg);return}else this.sendFileChunk(a,b,c-1);return}this.$14(d)}.bind(this),f=this.$8&&function(c){var d=parseInt(a,10),e=parseInt(b,10);c=c.loaded/c.total;e=e-d;this.$8(Math.floor(d+c*e))}.bind(this);this.postRequest("v2.4/"+this.$2+"/videos","POST",d,k,e,f)};a.prototype.$14=function(a){"use strict";a.start_offset!=a.end_offset?this.sendFileChunk(a.start_offset,a.end_offset,k):this.$9(!0)};a.prototype.postRequest=function(a,b,c,d,e,f){"use strict";__p&&__p();var l=i.resolve("graph")+"/"+a,m=j.subdomain;m!==""&&(l=new h(l).setSubdomain(m).toString());c.pretty=c.pretty||0;this.$12=new XMLHttpRequest();this.$12.onload=function(){var a=g.parse(this.$12.responseText);e(a)}.bind(this);f&&(this.$12.upload.onprogress=f);this.$12.onerror=function(){if(d==0){this.$10!==null&&this.$10();return}setTimeout(function(){this.postRequest(a,b,c,d-1,e)}.bind(this),1e3*Math.pow(2,k-d))}.bind(this);this.$12.open("post",l);this.$12.send(c)};a.prototype.getVideoID=function(){"use strict";return this.$5};a.prototype.abort=function(){"use strict";this.$11=!0,this.$12!==null&&this.$12.abort()};e.exports=a}),null);
__d("MVideoUploadRequest",["MGraphApiVideoUploader","PhotosUploadWaterfallXMixin","PUWSteps","invariant","mixin","performanceNow"],(function(a,b,c,d,e,f,g,h,i,j,k,l){"use strict";__p&&__p();var m;b=babelHelpers.inherits(a,k(h));m=b&&b.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=m.constructor).call.apply(a,[this].concat(d)),this.$MVideoUploadRequest18=!1,b}a.prototype.setClonedFileInput=function(a){this.$MVideoUploadRequest2=a;return this};a.prototype.setWaterfall=function(a,b,c){this.$MVideoUploadRequest6=a;this.$MVideoUploadRequest7=b;this.$MVideoUploadRequest8=c;return this};a.prototype.setHandler=function(a){this.$MVideoUploadRequest9=a;return this};a.prototype.setProgressHandler=function(a){this.$MVideoUploadRequest10=a;return this};a.prototype.setErrorHandler=function(a){this.$MVideoUploadRequest11=a;return this};a.prototype.setThumbnailDimensions=function(a){this.$MVideoUploadRequest12=a;return this};a.prototype.setTargetID=function(a){this.$MVideoUploadRequest13=a;return this};a.prototype.setActorID=function(a){this.$MVideoUploadRequest14=a;return this};a.prototype.setAccessToken=function(a){this.$MVideoUploadRequest15=a;return this};a.prototype.setFileIndex=function(a){this.$MVideoUploadRequest17=a;return this};a.prototype.setIsVoiceClip=function(){this.$MVideoUploadRequest18=!0;return this};a.prototype.getFile=function(){return this.$MVideoUploadRequest2.files[this.$MVideoUploadRequest17]};a.prototype.send=function(){__p&&__p();this.$MVideoUploadRequest2||j(0,801);this.$MVideoUploadRequest9||j(0,807);this.$MVideoUploadRequest16&&j(0,809);this.$MVideoUploadRequest16=new g(this.getFile(),this.$MVideoUploadRequest15,this.$MVideoUploadRequest13,this.$MVideoUploadRequest18,function(a){return this.$MVideoUploadRequest10({loaded:a,total:this.$MVideoUploadRequest19()})}.bind(this),function(){return this.$MVideoUploadRequest9({fbid:this.$MVideoUploadRequest16.getVideoID()})}.bind(this),function(){var a=this.$MVideoUploadRequest11;a!==null&&a!==void 0&&a({fbid:this.$MVideoUploadRequest16.getVideoID()})}.bind(this));this.$MVideoUploadRequest16.startUploading();return this};a.prototype.$MVideoUploadRequest20=function(a,b){this.logStep(a,babelHelpers["extends"]({retriesNeeded:this.$MVideoUploadRequest1},b||{}))};a.prototype.abort=function(a){if(!this.$MVideoUploadRequest2)return;this.$MVideoUploadRequest16&&this.$MVideoUploadRequest16.abort();this.$MVideoUploadRequest16=null;this.$MVideoUploadRequest20(i.CLIENT_TRANSFER_CANCEL,{elapsed_time:l()-this.transferStartTime,bytes:this.fileSize,progress:a})};a.prototype.retry=function(){this.$MVideoUploadRequest1++,this.abort(),this.send()};a.prototype.$MVideoUploadRequest19=function(){var a=this.getFile();return a&&a.size};a.prototype.getWaterfallID=function(){return this.$MVideoUploadRequest6};a.prototype.getWaterfallAppName=function(){return this.$MVideoUploadRequest7};a.prototype.getWaterfallSource=function(){return this.$MVideoUploadRequest8};e.exports=a}),null);
__d("MMultiPhotoUploader.react",["ix","Bootloader","Event","Image.react","MAudioPost.react","MLoadingIndicator.react","MMultiPhotoUploaderAttachment.react","MMultiPhotoUploaderAttachmentState","MMultiPhotoUploaderAttachmentType","MMultiPhotoUploaderHiddenInputs.react","MMultiPhotoUploaderPlusAttachment.react","MPhotoUploadDisable","MPhotoUploadFileInput","MPhotoUploadRequest","MSphericalPhotoConfig","MVideoUploadRequest","PhotosUploadWaterfallXMixin","PUWSteps","React","ReactDOM","Stratcom","URI","Vector","asset","cx","fbt","forEachObject","intlNumUtils","qex","throttle"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J){__p&&__p();a=y.PropTypes;var K=0,L=80,M=56,N;b=y.createClass({displayName:"MMultiPhotoUploader",_pendingUploadRequests:{},propTypes:{dtsg:a.string.isRequired,fileInput:a.instanceOf(s).isRequired,videoFileInput:a.instanceOf(s),formHiddenInputs:a.instanceOf(HTMLElement).isRequired,uploadDomain:a.instanceOf(B).isRequired,allowVideo:a.bool.isRequired,useLocalFilePreview:a.bool.isRequired,separatePhotoAndVideo:a.bool.isRequired,waterfallID:a.string.isRequired,waterfallAppName:a.string.isRequired,waterfallSource:a.string.isRequired,actorID:a.string,targetID:a.string,maxPhotosAllowed:a.number,initCollapsed:a.bool,logFlowBeginOnClick:a.bool,shouldScroll:a.bool,shouldShowLargeThumbnails:a.bool,shouldShowWhiteDesign:a.bool,shouldShowAddPhotoLabel:a.bool,showDropShadow:a.bool,disableIOS8SafariAlert:a.bool,accessToken:a.string,hideUploadProgress:a.bool,onUploadSuccess:a.func,onRemove:a.func,onThumbnailClicked:a.func,onUploadStarted:a.func,startPollingTagSuggestionsCallback:a.func,initialPhotos:a.array},mixins:[w],audioUploadListener:null,audioSrc:null,setCollapsed:function(a){this.setState({collapsed:a})},isCollapsed:function(){return this.state.collapsed},allowSingleAttachment:function(){return+this.props.maxPhotosAllowed===1},getAttachmentCount:function(){return this.attachments.length},hasAttachments:function(){return this.attachments.length>0},hasVideos:function(){return this.state.attachments.filter(function(a){return a.state===n.UPLOADED&&a.type===o.VIDEO}).length>0},clearAttachments:function(){this.setAttachments(this.attachments.filter(function(a){a.state===n.SENDING&&a.request.abort();return!1}))},getInitialState:function(){__p&&__p();var a=this.props.initialPhotos;if(a!==null){for(var b=0;b<a.length;b++)a[b].id=K++,a[b].state=n.UPLOADED;b={};b[n.UPLOADED]=a.length;A.invoke("MMultiPhotoUploader:attachments:change",null,b)}this.attachments=a?a:[];this._throttledProgressUpdate=J.acrossTransitions(this._invokeProgressUpdate,400,this);return{attachments:this.attachments,collapsed:this.props.initCollapsed}},numAttachmentsWithState:function(a){return this.attachments.filter(function(b){return b.state===a}).length},numAttachmentsOfType:function(a){return this.attachments.filter(function(b){return b.type===a}).length},isMaxAttachmentReached:function(){return this.attachments.length>=this.props.maxPhotosAllowed},setAttachments:function(a){A.invoke("multi-photos-attachment-change",null,{attachments:a,multiPhotoUploader:this}),this.setAttachmentsSilent(a)},setAttachmentsSilent:function(a){__p&&__p();this.attachments=a;this.setState({attachments:a});a=this.props.fileInput.getDOMElement();a.disabled=this.isMaxAttachmentReached();A.invoke("multi-photos-change",null,{input_id:a.id});a={input_id:a.id};for(var b in n){if(!Object.prototype.hasOwnProperty.call(n,b)||typeof n[b]!=="string")continue;var c=n[b];a[c]=this.numAttachmentsWithState(c)}A.invoke("MMultiPhotoUploader:attachments:change",null,a)},addAttachment:function(a){A.invoke("MMultiPhotoUploader:attachments:add",null,{photo_count:a.length||1}),this.setAttachments(this.attachments.concat([a]))},removeAttachment:function(a){__p&&__p();A.invoke("MMultiPhotoUploader:attachments:remove",null,{photo_count:1}),this.setAttachments(this.attachments.filter(function(b){__p&&__p();if(b.id===a){if(b.state===n.SENDING){var c=0;b.totalSize&&(c=Math.floor(100*(b.loaded/b.totalSize)));b.request.abort(c)}else this.logStep(x.CLIENT_UPLOAD_REMOVE,{fbid:b.fbid});b.fbid&&(this.props.onRemove&&this.props.onRemove(b.fbid));return!1}return!0}.bind(this)))},updateAttachment:function(a){this.setAttachments(this.attachments.map(function(b){return b.id===a.id?a:b}))},getAttachment:function(a){return this.attachments.filter(function(b){return b.id===a})[0]},setAttachmentProps:function(a,b){a=this.getAttachment(a);var c={};for(var d in a)c[d]=a[d];for(d in b)c[d]=b[d];this.updateAttachment(c)},retryAttachment:function(a){var b=this.getAttachment(a);this.logStep(x.CLIENT_ATTEMPT_RETRY,{fbid:b.fbid});b.request.retry();this.updateAttachment({id:a,state:"sending",request:b.request,isSpherical:b.isSpherical,type:b.type,fileImageURI:b.fileImageURI})},setAttachmentTagCounts:function(a){this.setAttachmentsSilent(this.attachments.map(function(b){b.tagCount=a[b.id];return b}))},componentDidMount:function(){this.props.fileInput.setChangeHandler(this.onFileInputChange),this.props.fileInput.setClickHandler(this.onFileInputClick),this.props.videoFileInput&&(this.props.videoFileInput.setChangeHandler(this.onVideoFileInputChange),this.props.videoFileInput.setClickHandler(this.onVideoFileInputClick)),!this.hasAttachments()&&!this.props.logFlowBeginOnClick&&this.logStep(x.CLIENT_FLOW_BEGIN),this.renderHiddenInputs(),this.resizeAndScroll(),this.audioUploadListener=A.listen("MAudioRecorder:upload",null,function(a){var b=a.getData().blob;a=a.getData().audioSrc;this.uploadAudio(b,a)}.bind(this))},componentWillUnmount:function(){z.unmountComponentAtNode(this.props.formHiddenInputs),this.props.fileInput.setChangeHandler(null),this.props.fileInput.setClickHandler(null),this.props.videoFileInput&&(this.props.videoFileInput.setChangeHandler(null),this.props.videoFileInput.setClickHandler(null)),G(this._pendingUploadRequests,function(a){return a.abort()}),delete this._pendingUploadRequests,this.audioUploadListener&&this.audioUploadListener.remove()},onFileInputChange:function(){var a=this.props.fileInput.getDOMElement();A.invoke("MMultiPhotoUploader:input:change",null,{input:a});this.uploadAttachments(this.props.fileInput)},onVideoFileInputChange:function(){var a=this.props.videoFileInput.getDOMElement();A.invoke("MMultiPhotoUploader:input:change",null,{input:a});this.uploadAttachments(this.props.videoFileInput)},onFileInputClick:function(a){this.props.disableIOS8SafariAlert===!0&&r.alertIOS8FileUploadDisabled(a),!this.hasAttachments()&&this.props.logFlowBeginOnClick&&this.logStep(x.CLIENT_FLOW_BEGIN),this.logStep(x.CLIENT_SELECT_BEGIN),A.invoke("MMultiPhotoUploader:input:click",null,{input:this.props.fileInput.getDOMElement()})},onVideoFileInputClick:function(a){this.props.disableIOS8SafariAlert===!0&&r.alertIOS8FileUploadDisabled(a),!this.hasAttachments()&&this.props.logFlowBeginOnClick&&this.logStep(x.CLIENT_FLOW_BEGIN),this.logStep(x.CLIENT_SELECT_BEGIN),A.invoke("MMultiPhotoUploader:input:click",null,{input:this.props.videoFileInput.getDOMElement()})},uploadAttachments:function(a){__p&&__p();var b=this,c=a.getDOMElement().files;if(c.length===0){this.logStep(x.CLIENT_SELECT_FAIL);return}var d=a.cloneDOMNode();a=this.props.maxPhotosAllowed>c.length?c.length:this.props.maxPhotosAllowed;a<c.length&&window.alert(F._("Se han a\u00f1adido demasiadas fotos. Solo puedes incluir {maxPhotosAllowed} fotos en una publicaci\u00f3n. Si quieres a\u00f1adir m\u00e1s, crea un \u00e1lbum.",[F._param("maxPhotosAllowed",this.props.maxPhotosAllowed)]));var e=function(a){__p&&__p();var e=c[a];if(e.name===""&&e.fileName===""&&e.size===0&&e.fileSize===0){b.logStep(x.CLIENT_SELECT_FAIL);return"continue"}b.logStep(x.CLIENT_SELECT_SUCCESS);if(e.type.match("image.*")){var f=I._("697677")?"canvas_resize":"no_resize",g=K++;f=new t().setAllowSphericalPhoto(!0).setAttachedFile(e).setDTSG(b.props.dtsg).setUploadDomain(b.props.uploadDomain).setResizeType(f);b.uploadAttachment(f,d,g,o.PHOTO,e.size,b.props.useLocalFilePreview?URL.createObjectURL(e):null);u.is_mtouch_basic_uploader_on&&h.loadModules(["SphericalImage"],function(a){a.createFromBlob(e).then(function(a){return this.handleSphericalPhotoCheck(g,a)}.bind(this))["catch"](function(a){}).done()}.bind(b),"MMultiPhotoUploader.react")}else if(e.type.match("video.*")&&b.props.allowVideo){var i=K++;f=new v().setAccessToken(b.props.accessToken).setFileIndex(a);b.uploadAttachment(f,d,i,o.VIDEO,e.size,null);b.props.useLocalFilePreview&&b.getVideoThumbnail(e,function(a){this.updateFileImageURI(i,a)}.bind(b))}};for(var f=0;f<a;f++){var g=e(f);if(g==="continue")continue}},uploadAttachment:function(a,b,c,d,e,f){var g=this.props.shouldShowLargeThumbnails?L:M,h=this.props,i=h.targetID;h=h.actorID;a=a.setClonedFileInput(b).setThumbnailDimensions(new C(g,g)).setWaterfall(this.props.waterfallID,this.props.waterfallAppName,this.props.waterfallSource).setHandler(this.handleUploadSuccess.bind(this,c)).setErrorHandler(this.handleUploadError.bind(this,c)).setProgressHandler(this.handleUploadProgress.bind(this,c)).setTargetID(i&&H.parseNumber(i)).setActorID(h&&H.parseNumber(h)).send();this._pendingUploadRequests[c]=a;this.props.onUploadStarted&&this.props.onUploadStarted();this.allowSingleAttachment()&&this.clearAttachments();this.addAttachment({id:c,state:"sending",type:d,request:a,fileImageURI:f,loaded:0,totalSize:e});this.setCollapsed(!1)},handleSphericalPhotoCheck:function(a,b){a=this.getAttachment(a);this.updateAttachment(babelHelpers["extends"]({},a,{isSpherical:b&&b.isSpherical()}))},updateFileImageURI:function(a,b){a=this.getAttachment(a);this.updateAttachment(babelHelpers["extends"]({},a,{fileImageURI:b}))},handleUploadError:function(a){delete this._pendingUploadRequests[a];var b=this.getAttachment(a);this.updateAttachment({id:a,state:"error",request:b.request,isSpherical:b.isSpherical,type:b.type,fileImageURI:b.fileImageURI})},handleUploadProgress:function(a,b){var c=this.getAttachment(a);this.updateAttachment({id:a,state:c.state,request:c.request,loaded:b.loaded,totalSize:b.total,isSpherical:c.isSpherical,type:c.type,fileImageURI:c.fileImageURI});this._throttledProgressUpdate()},_invokeProgressUpdate:function(){var a=function(a,b){return a+b},b=this.attachments.map(function(a){return a.totalSize}).reduce(a);a=this.attachments.map(function(a){return a.loaded}).reduce(a);A.invoke("MMultiPhotoUploader:upload:progress",null,{totalLoaded:a,totalSize:b})},handleUploadSuccess:function(a,b){delete this._pendingUploadRequests[a];if(!b.fbid){this.handleUploadError(a);return}var c=this.getAttachment(a),d=c.type===o.PHOTO&&this.props.startPollingTagSuggestionsCallback?n.POLLING_TAG_SUGGESTIONS:n.UPLOADED;this.updateAttachment({id:a,state:d,fbid:b.fbid,imageURI:b.thumbnail_uri,thumbnail_width:b.thumbnail_width,thumbnail_height:b.thumbnail_height,loaded:c.loaded,totalSize:c.totalSize,previewURI:b.preview_uri,isSpherical:c.isSpherical,type:c.type,fileImageURI:c.fileImageURI});this.props.onUploadSuccess&&this.props.onUploadSuccess(b.fbid,a);d===n.POLLING_TAG_SUGGESTIONS&&this.props.startPollingTagSuggestionsCallback(b.fbid,a)},onPhotoPlusClick:function(a){this.props.fileInput.click(a)},onVideoPlusClick:function(a){this.props.videoFileInput&&this.props.videoFileInput.click(a)},onRemoveClick:function(a){var b=this.getAttachment(a),c=!1;(b.state===n.SENDING||b.state===n.ERROR)&&(c=confirm(F._("Esta foto no se ha subido. \u00bfQuieres volver a intentarlo?")));c?this.retryAttachment(a):this.removeAttachment(a)},UNSAFE_componentWillUpdate:function(){this.props.shouldScroll&&this.refs&&this.refs.scroller&&this.refs.scroller.checkShouldScrollToEnd()},componentDidUpdate:function(){this.renderHiddenInputs(),this.resizeAndScroll()},renderHiddenInputs:function(){var a=this.state.attachments.filter(function(a){return(a.state===n.UPLOADED||a.state===n.POLLING_TAG_SUGGESTIONS)&&a.type===o.PHOTO}).map(function(a){return a.fbid}),b=this.state.attachments.filter(function(a){return a.state===n.UPLOADED&&(a.type===o.VIDEO||a.type===o.AUDIO)}).map(function(a){return a.fbid});z.render(y.createElement(p,babelHelpers["extends"]({},this.props,{photo_fbids:a,video_fbids:b})),this.props.formHiddenInputs)},resizeAndScroll:function(){this.props.shouldScroll&&this.refs&&this.refs.scroller&&(this.refs.scroller.resizeScroller(),this.refs.scroller.scrollHorizontallyToEnd())},getPlusAttachment:function(){if(this.allowSingleAttachment()&&this.state.collapsed)return null;if(this.isMaxAttachmentReached())return null;return this.props.separatePhotoAndVideo&&this.props.videoFileInput?y.createElement("span",null,y.createElement(q,{onClick:this.onPhotoPlusClick,largeThumbnails:this.props.shouldShowLargeThumbnails,shouldShowWhiteDesign:this.props.shouldShowWhiteDesign,shouldShowAddPhotoLabel:!0}),y.createElement(q,{onClick:this.onVideoPlusClick,largeThumbnails:this.props.shouldShowLargeThumbnails,shouldShowWhiteDesign:this.props.shouldShowWhiteDesign,shouldShowAddVideoLabel:!0})):y.createElement(q,{onClick:this.onPhotoPlusClick,largeThumbnails:this.props.shouldShowLargeThumbnails,shouldShowWhiteDesign:this.props.shouldShowWhiteDesign,shouldShowAddPhotoLabel:this.props.shouldShowAddPhotoLabel})},adjustScroller:function(){this.props.shouldScroll&&this.refs&&this.refs.scroller&&(this.refs.scroller.checkShouldScrollToEnd(),this.refs.scroller.resizeScroller(),this.refs.scroller.scrollHorizontallyToEnd())},getVideoThumbnail:function(a,b){__p&&__p();var c=new FileReader();c.onload=function(){__p&&__p();var d=new Blob([c.result],{type:a.type});d=URL.createObjectURL(d);var e=document.createElement("video"),f=function a(){g()&&(e.removeEventListener("timeupdate",a),e.pause())};i.listen(e,"loadeddata",function(){var a=g();a&&e.removeEventListener("timeupdate",f);b(a)});var g=function(){var a=document.createElement("canvas");a.width=e.videoWidth;a.height=e.videoHeight;a.getContext("2d").drawImage(e,0,0,a.width,a.height);a=a.toDataURL();var b=a.length>1e4;return b?a:null};i.listen(e,"timeupdate",f);e.preload="metadata";e.muted=!0;e.playsInline=!0;e.autoplay=!0;e.src=d};c.readAsArrayBuffer(a)},render:function(){__p&&__p();if(this.state.collapsed)return y.createElement("div",null);if(this.state.attachments.length>0&&this.state.attachments[0].type===o.AUDIO){var a=this.state.attachments[0];return y.createElement("div",{className:"_6psu"},a.request?y.createElement("div",{className:"_6ppq"},y.createElement(l,{className:"_6ppr"})):null,y.createElement(k,{videoSource:this.audioSrc,spinner:document.createElement("div")}),y.createElement("button",{onClick:function(){return this.onRemoveClick(a.id)}.bind(this),className:"_6pps"},y.createElement(j,{src:g("497564")})))}var b=this.state.attachments.map(function(a){var b=this.props.shouldShowLargeThumbnails?L:M;return y.createElement(m,babelHelpers["extends"]({},a,{key:a.id,shouldShowLargeThumbnails:this.props.shouldShowLargeThumbnails,previewSize:b,useLocalFilePreview:this.props.useLocalFilePreview,shouldShowWhiteDesign:this.props.shouldShowWhiteDesign,onRemoveClick:function(){this.onRemoveClick(a.id)}.bind(this),onPreviewLoaded:function(){this.adjustScroller()}.bind(this),loaded:a.loaded,totalSize:a.totalSize,hideUploadProgress:this.props.hideUploadProgress,onThumbnailClicked:function(){this.props.onThumbnailClicked&&this.props.onThumbnailClicked(a)}.bind(this)}))}.bind(this)),c=this.props.shouldScroll&&this.state.attachments.length>1;if(c)if(!N)h.loadModules(["MMultiPhotoUploaderSimpleScroller"],function(a){N=a,this.forceUpdate()}.bind(this),"MMultiPhotoUploader.react");else return y.createElement(N,{options:{scrollingY:!1},className:(this.props.shouldShowLargeThumbnails?"":"_1upb")+" _xy"+(this.props.showDropShadow?" _bgx":""),thumbnailSize:L,ref:"scroller"},b,this.getPlusAttachment());return y.createElement("div",{className:"_5cqb"+(c?" _2nym":"")},b,this.getPlusAttachment())},getWaterfallID:function(){return this.props.waterfallID},getWaterfallAppName:function(){return this.props.waterfallAppName},getWaterfallSource:function(){return this.props.waterfallSource},uploadAudio:function(a,b){var c=K++,d=new v().setAccessToken(this.props.accessToken).setIsVoiceClip().setFileIndex(0);this.audioSrc=b;b=new File([a],"UID"+c);this.uploadAttachment(d,{files:[b]},c,o.AUDIO,b.size,null);this.props.useLocalFilePreview&&this.getVideoThumbnail(a,function(a){this.updateFileImageURI(c,a)}.bind(this))}});e.exports=b}),null);
__d("MMultiPhotoUploaderInitReact",["DOM","MComposerBackgroundUploadProgress","MMultiPhotoUploader.react","MMultiPhotoUploaderAttachmentState","MPhotoUploadFileInput","PUWSteps","ReactComponentRenderer","Run","Stratcom","StratcomManager","SubscriptionsHandler","URI","$","ge"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){__p&&__p();var u="m-raw-file-input";function a(a,b){"use strict";__p&&__p();var c=a.previewGridElem||s(a.previewGridId),d=a.targetFormElem||s(a.targetFormId),e=a.inputId,f=a.inputContainerElem,j=a.containerClassName||null,v=null;if(f){f=g.scry(f,"input",u)[0];f&&f.id===e&&(v=f)}v=v||s(e);f=a.videoInputId?t(a.videoInputId):null;e=document.createElement("div");j!==null&&j.length!==0&&(e.className=j);g.insertBefore(c,e);j=document.createElement("div");g.appendContent(d,j);var w=new k(v);c=f?new k(f):null;this.$1=new m(i,e);this.$1.setProps({fileInput:w,videoFileInput:c,formHiddenInputs:j,uploadDomain:new r(a.uploadDomain),dtsg:a.dtsg,shouldResize:a.shouldResize,maxPhotosAllowed:a.maxPhotosAllowed,waterfallID:a.waterfallID,waterfallAppName:a.waterfallAppName,waterfallSource:a.waterfallSource,initCollapsed:a.initCollapsed,logFlowBeginOnClick:a.logFlowBeginOnClick,targetID:a.targetID,actorID:a.actorID,shouldScroll:a.horizontalScrolling,shouldShowLargeThumbnails:a.largeThumbnails,shouldShowWhiteDesign:a.useWhiteDesign,shouldShowAddPhotoLabel:a.showPhotoLabel,showDropShadow:a.composerDropShadow,disableIOS8SafariAlert:a.disableIOS8SafariAlert,initialPhotos:b,allowVideo:a.allowVideo,accessToken:a.accessToken,useLocalFilePreview:a.useLocalFilePreview,separatePhotoAndVideo:a.separatePhotoAndVideo,hideUploadProgress:a.hideUploadProgress});p.enableDispatch(window,"reset");var x=new q();x.addSubscriptions(o.listen("reset",["id:"+a.targetFormId],function(){this.resetState()}.bind(this)),o.listen("MActorSelector-actorChange",null,function(b){b.getData().targetID===a.targetID&&(this.resetState(),this.$1.setProps({actorID:b.getData().actorID,maxPhotosAllowed:b.getData().maxPhotosAllowed}))}.bind(this)),o.listen("MStructuredComposer-canceled",null,function(){this.$1.component.isCollapsed()||this.$1.component.logStep(l.CLIENT_FLOW_CANCEL,{volume:this.$1.component.getAttachmentCount()})}.bind(this)));n.onLeave(function(){if(h.isRunning())return;this.$1.unmount();w.destroy();x.release()}.bind(this))}a.prototype.logClientPost=function(a){"use strict";this.$1.component.logStep(l.CLIENT_FLOW_POST,{volume:this.$1.component.getAttachmentCount()},a)};a.prototype.alterPreviewGrid=function(a){"use strict";return this.$1.component.setCollapsed(!a)};a.prototype.getUploader=function(){"use strict";return this.$1};a.prototype.resetState=function(){"use strict";this.$1.component.clearAttachments();return this.alterPreviewGrid(!1)};a.prototype.hasPhotos=function(a){a===void 0&&(a=!1);return this.$1.component.numAttachmentsWithState(j.UPLOADED)>0||!h.isWaitingForTagSuggestions()&&this.hasPollingPhotos()||a&&this.hasPendingPhotos()};a.prototype.hasPendingPhotos=function(){"use strict";return this.$1.component.numAttachmentsWithState(j.SENDING)>0||h.isWaitingForTagSuggestions()&&this.hasPollingPhotos()};a.prototype.numAttachmentsOfType=function(a){"use strict";return this.$1.component.numAttachmentsOfType(a)};a.prototype.hasPollingPhotos=function(){"use strict";return this.$1.component.numAttachmentsWithState(j.POLLING_TAG_SUGGESTIONS)>0};a.prototype.getUploadedMediaCount=function(){"use strict";return this.$1.component.numAttachmentsWithState(j.UPLOADED)+this.$1.component.numAttachmentsWithState(j.POLLING_TAG_SUGGESTIONS)};a.prototype.getMediaCount=function(){"use strict";return this.$1.component.getAttachmentCount()};a.prototype.uploadPhotos=function(a){"use strict";this.$1.component.uploadPhotos(a)};e.exports=a}),null);
__d("MJSPlaceholder",["DOM","Parent","Stratcom","StratcomManager"],(function(a,b,c,d,e,f,g,h,i,j){__p&&__p();a={init:function(a,b){__p&&__p();var c=a.getElementsByTagName("textarea")[0];function d(a){!c.value?g.show(b):g.hide(b)}var e=i.listen("MJSPlaceholder",null,d);a="oninput"in c;var f=g.listen(c,a?"input":"change",null,d),k=h.byTag(c,"form");if(k){j.enableDispatch(k,"reset");var l=g.listen(k,"reset",null,d)}var m=a?null:g.listen(c,"keyup",null,d);i.listen("m:page:unload",null,function(){i.removeCurrentListener(),f.remove(),l&&l.remove(),m&&m.remove(),e.remove()})}};e.exports=a}),null);
__d("URLMatcher",["URLMatcherConfig"],(function(a,b,c,d,e,f,g){__p&&__p();a="!\"#%&'()*,-./:;<>?@[\\]^_`{|}";b="\u2000-\u206f\xab\xbb\uff08\uff09";c="(?:25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])";d="(?:(?:ht|f)tps?)://";f="(?:(?:"+c+"[.]){3}"+c+")";c="\\[(?:(?:[A-Fa-f0-9]{1,4}::?){1,7}[A-Fa-f0-9]{1,4})\\]";var h="(?:\\b)www\\d{0,3}[.]";a="[^\\s"+a+b+"]";b="(?:(?:(?:[.:\\-_%@]|"+a+")*"+a+")|"+c+")";a="(?::\\d+){0,1}";var i="(?=[/?#])";g=g.tlds;i="(?:(?:"+d+b+a+")|(?:"+f+a+")|(?:"+c+a+")|(?:"+h+b+g+a+")|(?:"+b+g+a+i+"))";f="(?:(?:"+d+b+a+")|(?:"+f+a+")|(?:"+c+a+")|(?:"+h+b+g+a+")|(?:"+b+g+a+"))";c="[/#?]";var j="\\([^\\s()<>]+\\)",k="[^\\s()<>?#]+",l=new RegExp(i,"im"),m="^\\[[0-9]{1,4}:[0-9]{1,4}:[A-Fa-f0-9]{1,4}\\]",n=new RegExp(m,"im");m="(?:(?:"+c+")(?:(?:"+j+"|"+k+")*)*)*";var o=new RegExp("((?:"+i+")(?:"+m+"))","im"),p=new RegExp("((?:"+f+")(?:"+m+"))","im"),q=new RegExp("((?:"+d+b+a+")|(?:"+h+b+g+a+"))"),r=/[\s\'\";]/,s=new RegExp(c,"im"),t=new RegExp("[\\s!\"#%&'()*,./:;<>?@[\\]^`{|}\xab\xbb\u2000-\u206f\uff08\uff09]","im"),u=new RegExp("[\\s()<>?#]","im"),v=new RegExp("\\s()<>"),w=function(a){if(a&&a.indexOf("@")!=-1)return q.exec(a)?a:null;else return a};j=function(a){return x(a,o)};k=function(a){return x(a,p)};var x=function(a,b){b=(b.exec(a)||[])[1]||null;return w(b)};i=function(a){return l.exec(a)};f=function(a){return!r.test(a.charAt(a.length-1))};m=function(a){__p&&__p();do{var b=l.exec(a);if(!b)return null;var c=!1;if(b[0][0]==="["&&b.index>0&&a[b.index-1]==="@"){var d=n.exec(b[0]);d&&(c=!0,a=a.substr(b.index+d[0].length))}}while(c);d=a.substr(b.index+b[0].length);if(d.length===0||!s.test(d[0]))return w(b[0]);c=0;a=0;var e=1,f=0,g=a;for(var h=1;h<d.length;h++){var i=d[h];if(g===a){if(i==="(")f=f+1,g=e;else if(s.test(i)||!t.test(i))c=h;else if(u.test(i))break}else if(i==="(")f=f+1;else if(i===")")f=f-1,f===0&&(g=a,c=h);else if(v.test(i))break}return w(b[0]+d.substring(0,c+1))};d={};d.permissiveHostPathMatch=k;d.permissiveMatch=j;d.matchToPattern=x;d.matchHost=i;d.trigger=f;d.match=m;e.exports=d}),null);
__d("getHashtagRegexString",[],(function(a,b,c,d,e,f){__p&&__p();function a(){__p&&__p();var a="\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u024f\u0253-\u0254\u0256-\u0257\u0259\u025b\u0263\u0268\u026f\u0272\u0289\u028b\u02bb\u0300-\u036f\u1e00-\u1eff",b="\u0400-\u04ff\u0500-\u0527\u2de0-\u2dff\ua640-\ua69f\u0591-\u05bf\u05c1-\u05c2\u05c4-\u05c5\u05c7\u05d0-\u05ea\u05f0-\u05f4\ufb12-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufb4f\u0610-\u061a\u0620-\u065f\u066e-\u06d3\u06d5-\u06dc\u06de-\u06e8\u06ea-\u06ef\u06fa-\u06fc\u06ff\u0750-\u077f\u08a0\u08a2-\u08ac\u08e4-\u08fe\ufb50-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\u200c-\u200c\u0e01-\u0e3a\u0e40-\u0e4e\u1100-\u11ff\u3130-\u3185\ua960-\ua97f\uac00-\ud7af\ud7b0-\ud7ff\uffa1-\uffdc",c=String.fromCharCode;c="\u30a1-\u30fa\u30fc-\u30fe\uff66-\uff9f\uff10-\uff19\uff21-\uff3a\uff41-\uff5a\u3041-\u3096\u3099-\u309e\u3400-\u4dbf\u4e00-\u9fff"+c(173824)+"-"+c(177983)+c(177984)+"-"+c(178207)+c(194560)+"-"+c(195103)+"\u3003\u3005\u303b";a=a+b+c;b="A-Za-z\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u0241\u0250-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ee\u037a\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03ce\u03d0-\u03f5\u03f7-\u0481\u048a-\u04ce\u04d0-\u04f9\u0500-\u050f\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0621-\u063a\u0640-\u064a\u066e-\u066f\u0671-\u06d3\u06d5\u06e5-\u06e6\u06ee-\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u076d\u0780-\u07a5\u07b1\u0904-\u0939\u093d\u0950\u0958-\u0961\u097d\u0985-\u098c\u098f-\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc-\u09dd\u09df-\u09e1\u09f0-\u09f1\u0a05-\u0a0a\u0a0f-\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32-\u0a33\u0a35-\u0a36\u0a38-\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2-\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0-\u0ae1\u0b05-\u0b0c\u0b0f-\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32-\u0b33\u0b35-\u0b39\u0b3d\u0b5c-\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99-\u0b9a\u0b9c\u0b9e-\u0b9f\u0ba3-\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c60-\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0-\u0ce1\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d28\u0d2a-\u0d39\u0d60-\u0d61\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32-\u0e33\u0e40-\u0e46\u0e81-\u0e82\u0e84\u0e87-\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa-\u0eab\u0ead-\u0eb0\u0eb2-\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edd\u0f00\u0f40-\u0f47\u0f49-\u0f6a\u0f88-\u0f8b\u1000-\u1021\u1023-\u1027\u1029-\u102a\u1050-\u1055\u10a0-\u10c5\u10d0-\u10fa\u10fc\u1100-\u1159\u115f-\u11a2\u11a8-\u11f9\u1200-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u1676\u1681-\u169a\u16a0-\u16ea\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19a9\u19c1-\u19c7\u1a00-\u1a16\u1d00-\u1dbf\u1e00-\u1e9b\u1ea0-\u1ef9\u1f00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u2094\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2131\u2133-\u2139\u213c-\u213f\u2145-\u2149\u2c00-\u2c2e\u2c30-\u2c5e\u2c80-\u2ce4\u2d00-\u2d25\u2d30-\u2d65\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u3005-\u3006\u3031-\u3035\u303b-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312c\u3131-\u318e\u31a0-\u31b7\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fbb\ua000-\ua48c\ua800-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\uac00-\ud7a3\uf900-\ufa2d\ufa30-\ufa6a\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc";c="\u0300-\u036f\u0483-\u0486\u0591-\u05b9\u05bb-\u05bd\u05bf\u05c1-\u05c2\u05c4-\u05c5\u05c7\u0610-\u0615\u064b-\u065e\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7-\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u0901-\u0903\u093c\u093e-\u094d\u0951-\u0954\u0962-\u0963\u0981-\u0983\u09bc\u09be-\u09c4\u09c7-\u09c8\u09cb-\u09cd\u09d7\u09e2-\u09e3\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47-\u0a48\u0a4b-\u0a4d\u0a70-\u0a71\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2-\u0ae3\u0b01-\u0b03\u0b3c\u0b3e-\u0b43\u0b47-\u0b48\u0b4b-\u0b4d\u0b56-\u0b57\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0c01-\u0c03\u0c3e-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55-\u0c56\u0c82-\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5-\u0cd6\u0d02-\u0d03\u0d3e-\u0d43\u0d46-\u0d48\u0d4a-\u0d4d\u0d57\u0d82-\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0df2-\u0df3\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb-\u0ebc\u0ec8-\u0ecd\u0f18-\u0f19\u0f35\u0f37\u0f39\u0f3e-\u0f3f\u0f71-\u0f84\u0f86-\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102c-\u1032\u1036-\u1039\u1056-\u1059\u135f\u1712-\u1714\u1732-\u1734\u1752-\u1753\u1772-\u1773\u17b6-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u192b\u1930-\u193b\u19b0-\u19c0\u19c8-\u19c9\u1a17-\u1a1b\u1dc0-\u1dc3\u20d0-\u20dc\u20e1\u20e5-\u20eb\u302a-\u302f\u3099-\u309a\ua802\ua806\ua80b\ua823-\ua827\ufb1e\ufe00-\ufe0f\ufe20-\ufe23";var d="0-9\u0660-\u0669\u06f0-\u06f9\u0966-\u096f\u09e6-\u09ef\u0a66-\u0a6f\u0ae6-\u0aef\u0b66-\u0b6f\u0be6-\u0bef\u0c66-\u0c6f\u0ce6-\u0cef\u0d66-\u0d6f\u0e50-\u0e59\u0ed0-\u0ed9\u0f20-\u0f29\u1040-\u1049\u17e0-\u17e9\u1810-\u1819\u1946-\u194f\u19d0-\u19d9\uff10-\uff19";b=b+c+a;c=d+"_";a=b+c;d="["+b+"]";c="["+a+"]";b="^|$|[^&/"+a+"]";a="[#\\uFF03]";b="("+b+")("+a+")("+c+"*"+d+c+"*)";return b}e.exports=a}),null);
__d("getHashtagRegex",["getHashtagRegexString"],(function(a,b,c,d,e,f,g){function a(){return new RegExp(g(),"ig")}e.exports=a}),null);
__d("HashtagParser",["URLMatcher","getHashtagRegex"],(function(a,b,c,d,e,f,g,h){__p&&__p();var i=100,j=30,k=/@\[([0-9]+):([0-9]+):((?:[^\\\]]*(?:\\.)*)*)\]/g;function a(a){var b=w(a),c=0,d=0;return l(a).map(function(a){while(c<b.length){var e=b[c],f=e.offset-d;if(f<a.offset)d+=e.token.length-e.name.length,c++;else break}return{marker:a.marker,tag:a.hashtag,rawOffset:a.offset+d,offset:a.offset}})}function b(a){return m(a,r(a))}function l(a){var b=y(a);return m(b,n(a,b))}function m(a,b){return p(a).slice(0,j).filter(function(a){var c=t(a.offset,a.hashtag.length,b);return!c&&a.hashtag.length<=i})}function n(a,b){return s(q(a),r(b))}var o=h();function p(a){var b=[];a.replace(o,function(a,c,d,e,f){b.push({marker:d,hashtag:e,offset:f+c.length})});return b}function q(a){return z(a).map(function(a){return[a.offset,a.name.length]})}function r(a){var b=[],c,d=0;while(c=g.permissiveMatch(a)){var e=a.indexOf(c);b.push([d+e,c.length]);a=a.substring(e+c.length);d+=e+c.length}return b}function s(a,b){var c=[],d=0,e=0,f=0;while(d<a.length&&e<b.length)a[d][0]>b[e][0]?c[f++]=b[e++]:c[f++]=a[d++];return c.concat(a.slice(d),b.slice(e))}function t(a,b,c){if(!c)return!1;var d=v(c,a);return u(a,b,c,d)||u(a,b,c,d+1)}function u(a,b,c,d){if(!c[d])return!1;var e=c[d][0];c=c[d][1];return!(a+b-1<e||a>e+c-1)}function v(a,b){var c=0,d=a.length-1;while(c<=d){var e=Math.floor((c+d)/2),f=a[e][0];if(f==b)return e;else f<b?c=e+1:d=e-1}return d}function w(a){var b=[];a.replace(k,function(a,c,d,e,f){b.push({token:a,id:c,type:d,name:e,offset:f})});return b}function x(a){return a?a.replace(/\\([^\\])/g,"$1").replace(/\\\\/g,"\\"):null}function y(a){return a.replace(k,function(a,b,c,d,e){return x(d)})}function z(a){var b=0,c=0;return w(a).map(function(d){var e=a.indexOf(d.token,c);c=e+1;e-=b;var f=x(d.name);b+=d.token.length-f.length;if(e>=0)return{id:d.id,name:f,type:d.type,offset:e}})}c={};c.parse=a;c.parseWithoutMentions=b;e.exports=c}),null);
__d("MMentions",["CancelableEventListener","DOM","FBLogger","HashtagParser","HTML","MJSEnvironment","MLegacyDataStore","MParent","MViewport","Scroll","Stratcom","StratcomManager","Style","TouchEventType","Vector","clearInterval","clearTimeout","eventsMixinDeprecated","fbt","getActiveElement","setIntervalAcrossTransitions","setTimeout","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C){__p&&__p();var D={};function E(a){var b=D[a];b||(b="<br>\n".repeat(a.length),D[a]=b);return b}function F(a,b){a=Math.sqrt(Math.pow(a.x-b.x,2)+Math.pow(a.y-b.y,2));return a<=5}function G(a,b,c){"use strict";__p&&__p();this._onSubmit=function(){var a=this._input.value,b=A(function(){this._disposed?v(b):this._input.value!==a&&(this._sync(),v(b))}.bind(this),100);C(function(){v(b)},1e4)}.bind(this);this._onFocusChange=function(a){if(this._suggestionShown&&this._ignoreFocusChange)return;switch(a.getType()){case"focus":a.getTarget()===this._input?this._focus():this._blur();break;default:this._blur();break}}.bind(this);this._forceInputPosition=function(){var a=this._input.getBoundingClientRect(),b=o.getHeight();if(a.top<0||a.top>b){this._forceInputPositionTimer=C(this._forceInputPosition,16);return}if(z()!==this._input){this._blur();return}}.bind(this);this._onSuggestionTouch=function(a){__p&&__p();if(!this._suggestionShown){a.prevent();this._suggestionTouchStartData=null;return}var b=a.getType();if(b==="touchstart"){this._clearSuggestionTouchendSelectFallbackTimer();var c=a.getTouch(),d=c.clientX;c=c.clientY;this._suggestionTouchStartData={startItem:a.getNode(this._SUGGESTION_SIGIL),startLoc:{x:d,y:c}}}else if(b==="touchend"&&this._suggestionTouchStartData){d=this._suggestionTouchStartData;c=d.startItem;b=d.startLoc;var e=a.getNode(this._SUGGESTION_SIGIL);d=a.getTouch();a=d.clientX;d=d.clientY;a={x:a,y:d};this._suggestionTouchStartData=null;if(c===e&&F(b,a)){this._clearSuggestionTouchendSelectFallbackTimer();this._suggestionTouchendSelectFallbackTimer=B(function(){this._onSuggestionItemClickedOrTapped(e)}.bind(this),350);return}}this.setIgnoreFocusChange(!0)}.bind(this);this._onSuggestionClick=function(a){if(!this._suggestionShown){a.prevent();return}this._onSuggestionItemClickedOrTapped(a.getNode(this._SUGGESTION_SIGIL));this._suggestionTouchStartData=null}.bind(this);this._onBodyTouchStart=function(a){a=a.getTouch();var b=a.clientX;a=a.clientY;this._bodyTouchStartLocation={x:b,y:a}}.bind(this);this._onBodyTouchEndOrClick=function(a){__p&&__p();var b=a.getTarget();if(G._suggestion===b||this._element===b||this._element.contains(b)||G._suggestion.contains(b))return;b=this._bodyTouchStartLocation;if(a.getType()==="touchend"&&b){this._bodyTouchStartLocation=null;a=a.getTouch();var c=a.clientX;a=a.clientY;c={x:c,y:a};if(!F(b,c))return}this._blur()}.bind(this);this._hideSuggestion=function(a){this._suggestionShown&&(delete this._suggestionShown,w(this._hideSuggestionTimer),a===!0?(delete this._hideSuggestionTimer,this._hideSuggestionInternal()):this._hideSuggestionTimer=C(this._hideSuggestionInternal,350))}.bind(this);this._hideSuggestionInternal=function(){delete this._hideSuggestionTimer,this._isInstanceSuggestion()&&(this._releaseSuggestion(),h.hide(G._suggestion),h.setContent(G._suggestion,"")),this._clearBottomMargin()}.bind(this);this._updatePosition=function(){__p&&__p();if(!this._suggestionShown)return;var a=G._suggestion,b=a.offsetHeight,c=this._input,d=c.offsetHeight,e=u.getElementPosition(c);c=c.getBoundingClientRect();var f=a.offsetParent,g;f===document.documentElement?g=new u(0,0):g=u.getElementPosition(f);f=c.left-g.x;e=e.y-g.y;g=o.getHeight()/2;f=f;d=e+d;g=c.bottom+b>g&&c.top-b>=0;g&&(d=e-b);s.apply(a,{left:f+"px",top:d+"px"})}.bind(this);this._onBeforeEdit=function(a){if(!this._focused)return;this._inputTimer&&w(this._inputTimer);switch(a.getRawEvent().keyCode){case 8:this._onBackSpaceKey(a);break}}.bind(this);this._onEdit=function(a){this._inputTimer&&w(this._inputTimer);switch(a.getRawEvent().keyCode){case 13:this._hideSuggestion();this._syncShadow();return;default:this._sync(),this._inputTimer=C(this._processInput,160)}}.bind(this);this._processInput=function(){__p&&__p();if(this._disabled)return;this._sync();this._onQueryResult(null,null);this._hideSuggestion();this._query=null;this._inputTimer=null;var a=this._input,b=a.value,c=a.selectionStart;if(c!==a.selectionEnd)return;b=b.charAt(c);if(b&&!/\s/.test(b))return;b=a.value.substr(0,c);a=b.match(this._queryStringMatcher);if(!a)return;a=a[0];var d;a.charAt(0)==="@"?(a=a.slice(1),d=a.length>0):d=a.length>2&&(G._EN_NAMES.test(a)||G._JP_SYLLABARY_CHARS.test(a)||G._CJK_CHARS.test(a));var e=b.lastIndexOf("@");e>-1&&(a=b.substr(e+1),d=!0);d=d&&!this._getTokenByCursorPosition(c);d&&(this._query=a,this._source.didChange(a),this._source.didStart())}.bind(this);this._onQueryResult=function(a){__p&&__p();var b=a&&a.length>0,c=this._query&&this._input.value.indexOf(this._query)>=0;if(!c||!b||this._disposed)return;this._hideSuggestion();this._queryResult=null;if(this._enforceStringMatch&&!this._createRegex(this._query,"ig").test(a[0].getAttribute("display")))return;var d=[],e=document.createDocumentFragment(),f=0,g={};for(var j in this._uids){c=this._uids[j];for(var b=0,k=c.length;b<k;b++)g[c[b]]=!0}b=function(a){__p&&__p();if(!g[a.getAttribute("uid")]){a.htmlFor=this._input.id;q.addSigil(a,this._SUGGESTION_SIGIL);q.addSigil(a,"touchable");m.set(a,{nativeClick:!0});a.queryIndex=f;e.appendChild(a);d[f]=a;f++;if(f>5)return!0}};if(this._typeObjects&&this._typeObjectsOrder){k={};for(var c=0;c<a.length;c++){var l=a[c].getAttribute("renderType");if(!l)continue;l in k||(k[l]=[]);k[l].push(a[c])}for(var c=0;c<this._typeObjectsOrder.length;c++){l=this._typeObjectsOrder[c];var n=this._typeObjects[l];n||i("MMentions").mustfix("Unknown renderType: %s",l);var o=k[l];o=o?o.filter(function(a){return!g[a.getAttribute("uid")]}):[];o.length>0?(e.appendChild(this._buildSectionHeader(n)),o.some(b,this)):n&&n.show_always&&(e.appendChild(this._buildSectionHeader(n)),e.appendChild(this._buildNoResultEntry()))}}else a.some(b,this);f&&(h.setContent(G._suggestion,""),this._queryResult=d,G._suggestion.appendChild(e),this._showSuggestion(),this._updatePosition())}.bind(this);this._syncAndParse=function(){!this._disposed&&!this._disabled&&(this._input&&this._input.value&&this._parse(this._input.value),this._sync())}.bind(this);this._sync=function(){!this._disposed&&!this._disabled&&(this._syncMentionedUIDs(),this._syncHashtags(),this._syncShadow(),this._syncMeasurer(),this._syncValue())}.bind(this);this._parse=function(a){__p&&__p();this._uids={};var b=/[0-9]+/,c=/^@\[(?:[0-9]+:){2}(.+)\]/,d=a.match(G._MENTIONS_REGEX);if(d){for(var e=0;e<d.length;e++){var f=d[e].match(b),g=d[e].match(c);g=g?g[1].replace(/\\([^\\])/g,"$1").replace(/\\\\/g,"\\"):null;if(!g)continue;this._uids[g]||(this._uids[g]=[]);this._uids[g].push(f);a=a.replace(d[e],g)}this._input.value=a}this._sync()}.bind(this);this._renderHashtags=function(a){if(!this._hasHashtags)return h.htmlize(a);var b=j.parseWithoutMentions(a),c=[],d=0;for(var e=0;e<b.length;e++)c.push(h.htmlize(a.substring(d,b[e].offset)),'<span class="mentions-highlight">',a.charAt(b[e].offset),b[e].hashtag,"</span>"),d=b[e].offset+b[e].hashtag.length+1;c.push(h.htmlize(a.substring(d)));return c.join("")}.bind(this);this._syncShadow=function(a){__p&&__p();var b=this._input,c=b.value,d=this._shadow;if(!c){h.setContent(d,"");return}if(a&&(a.getType()==="scroll"||a.getType()==="touchmove")){p.setTop(d,p.getTop(b));p.setLeft(d,p.getLeft(b));return}var e="\u200b{\u200b";a="\u200b}";var f="\u200b{\u200b\u200b}",g,i=function(a,b){a=this._uids[a][g];a=this._weakReferences[a]||this._initialWeakReferences[a];g++;return(a?f:e)+b+e};for(var j in this._uids){var k=this._createRegex(j,"g");g=0;c=c.replace(k,i.bind(this,j))}k=c.split(e);i=[];var l=!1;for(var m=0;m<k.length;m++)l?k[m].startsWith(a)?i.push('<span class="mentions-highlight-weak-reference">',h.htmlize(k[m].substr(a.length)),"</span>"):i.push('<span class="mentions-highlight">',h.htmlize(k[m]),"</span>"):i.push(this._renderHashtags(k[m])),l=!l;c=i.join("");c=c.replace(/\n+$/,E);this._shadowHTML!==c&&(this._shadowHTML=c,d.innerHTML=c);p.setTop(d,p.getTop(b));p.setLeft(d,p.getLeft(b))}.bind(this);this._mentionId=a.id;this._bottomMargin=null;var d=a.getElementsByTagName("textarea")[0];this.minDistance=G._MIN_DISTANCE;this._listeners=[];this._editListeners=[];this._query=null;this._queryResult=null;this._focused=!1;this._disabled=!1;this._hasHashtags=!1;this._ignoreFocusChange=!1;this._ignoreFocusChangeTimeout=null;this.shouldShowHashtags=!1;this._enforceStringMatch=!0;this._typeObjects=null;this._typeObjectsOrder=null;this._uids={};this._weakReferences={};this._source=b;this._element=a;this._input=d;this._queryStringMatcher=/[^\s]+$/;this._bodyTouchStartLocation=null;this._suggestionTouchStartData=null;this._suggestionTouchendSelectFallbackTimer=null;b=m.get(this._input);this._initialWeakReferences=b.initial_weak_references?b.initial_weak_references:{};this._eventData={input:this._input,hasTags:!1};this._shadow=h.create("div",{className:"mentions-shadow","aria-hidden":!0},"");this._measurer=h.create("div",{className:"mentions-measurer","aria-hidden":!0});G._suggestion=G._suggestion||h.create("div",{className:"mentions-suggest"});G._prevInsertParent=G._prevInsertParent||null;this._hiddenInput=h.create("input",{type:"hidden",name:d.name,sigil:"mentionsHiddenInput"});d.removeAttribute("name");h.uniqID(d);this._syncStyles(this._shadow);this._syncStyles(this._measurer);r.enableDispatch(d,"cut");r.enableDispatch(d,"paste");r.enableDispatch(d,"scroll");this._listeners.push(h.listen(d,"blur",null,this._onFocusChange),h.listen(d,"focus",null,this._onFocusChange),h.listen(this._input,"scroll",null,this._syncShadow));this._listeners.push(q.listen("MMentions:update",null,this._sync),q.listen("MMentions:reset",null,this._syncAndParse),q.listen("MMentions:clearHiddenInput",null,this._clearHiddenInput.bind(this)),q.listen("MMentions:disable",null,this._disable.bind(this)),q.listen("MMentions:enable",null,this._enable.bind(this)),q.listen("MStructuredComposerSATP:changed",null,this._syncStyles.bind(this,this._shadow)));this._input.form&&(r.enableDispatch(this._input.form,"reset"),this._listeners.push(h.listen(this._input.form,"submit",null,this._onSubmit),h.listen(this._input.form,"reset",null,this._onEdit)));this._listeners.push(q.listen("MMentions:decorations:hide",null,function(a){h.hide(this._shadow),h.hide(this._measurer)}.bind(this)));this._listeners.push(q.listen("MMentions:decorations:show",null,function(a){h.show(this._shadow),h.show(this._measurer)}.bind(this)));b=document.createDocumentFragment();b.appendChild(this._hiddenInput);b.appendChild(this._shadow);b.appendChild(this._measurer);a.appendChild(b);this._insertParent=c||n.bySigil(a,"m-mentions-insert-parent")||s.getScrollParent(a);this._input.value&&this._parse(this._input.value)}G.prototype._mountIntoInsertParent=function(){"use strict";var a=this._insertParent;a!==G._prevInsertParent&&h.remove(G._suggestion);a===window?o.appendNode(G._suggestion):h.appendContent(a,G._suggestion);G._prevInsertParent=a};G.prototype.dispose=function(){"use strict";__p&&__p();if(!this._disposed){while(this._listeners.length)this._listeners.pop().remove();while(this._editListeners.length)this._editListeners.pop().remove();w(this._inputTimer);w(this._hideSuggestionTimer);w(this._forceInputPositionTimer);this._clearSuggestionTouchendSelectFallbackTimer();this._releaseSuggestion();h.remove(this._hiddenInput);h.remove(this._shadow);h.remove(this._measurer);h.remove(G._suggestion);G._prevInsertParent=null;for(var a in this)delete this[a];this._disposed=!0}};G.prototype.setTypeObjects=function(a){"use strict";this._typeObjects=a};G.prototype.setTypeObjectsOrder=function(a){"use strict";this._typeObjectsOrder=a};G.prototype.disableStringMatch=function(){"use strict";this._enforceStringMatch=!1};G.prototype.insertMention=function(a){"use strict";__p&&__p();var b=a.name+this._NAME_SUFFIX,c=this._uids[b],d=this._input,e=d.value;c||(c=this._uids[b]=[]);if(c.indexOf(a.uid)===-1)c.push(a.uid);else{d.focus();return}c=d.selectionStart;a=d.selectionEnd;c=e.substring(0,c);e=e.substr(a+1);d.value=c+b+" "+e;a=d.value.length-e.length;l.IS_APPLE_WEBKIT_IOS&&(this.setIgnoreFocusChange(!0),d.blur(),d.focus(),this.setIgnoreFocusChange(!1));d.setSelectionRange(a,a);q.invoke("MJSPlaceholder");d.focus();this._tagsUpdated();this._sync()};G.prototype.insertText=function(a){"use strict";__p&&__p();var b=this._input,c=b.value,d=b.selectionStart,e=b.selectionEnd;d=c.substring(0,d);c=c.substr(e);b.value=d+a+c;e=b.value.length-c.length;l.IS_APPLE_WEBKIT_IOS&&(this.setIgnoreFocusChange(!0),b.blur(),b.focus(),this.setIgnoreFocusChange(!1));b.setSelectionRange(e,e);q.invoke("MJSPlaceholder");b.focus();this._sync()};G.prototype._getExpandElement=function(){"use strict";return n.bySigil(this._element,"m-mentions-expand")||this._element};G.prototype._focus=function(){"use strict";__p&&__p();if(this._focused)return;this._focused=!0;if(!this._editListeners.length){var a=G._suggestion,b=this._SUGGESTION_SIGIL,c=this._updatePosition.bind(this);this._editListeners.push(q.listen("scroll",null,function(a){a.getTarget(),c(a),this.setIgnoreFocusChange(!1)}.bind(this)),this._source.listen("waiting",this._hideSuggestion),this._source.listen("resultsready",this._onQueryResult),h.listen(this._input,"touchmove",null,this._syncShadow),h.listen(this._input,"keydown",null,this._onBeforeEdit),h.listen(this._input,"keyup",null,this._onEdit),h.listen(this._input,"input",null,this._onEdit),h.listen(this._input,"cut",null,this._onEdit),h.listen(this._input,"paste",null,this._onEdit),h.listen(document.body,t.START,null,this._onBodyTouchStart),h.listen(document.body,t.END,null,this._onBodyTouchEndOrClick),h.listen(document.body,"click",null,this._onBodyTouchEndOrClick),h.listen(this._input,t.START,null,this._hideSuggestion),g.listen(a,t.END,b,this._onSuggestionTouch),h.listen(a,t.START,b,this._onSuggestionTouch),h.listen(a,"click",b,this._onSuggestionClick))}this._source._startedByMentions||(this._source._startedByMentions=!0,this._source.didChange(""),this._source.didStart());this._hideSuggestion();w(this._forceInputPositionTimer);this._forceInputPositionTimer=C(this._forceInputPosition,100);this._sync()};G.prototype._blur=function(){"use strict";__p&&__p();if(!this._focused||z()===this._input)return;delete this._focused;while(this._editListeners.length)this._editListeners.pop().remove();this._suggestionTouchStartData=null;this._bodyTouchStartLocation=null;w(this._forceInputPositionTimer);w(this._inputTimer);delete this._forceInputPositionTimer;this._clearBottomMargin();this._hideSuggestion(!0);this._sync()};G.prototype.getIgnoreFocusChange=function(){"use strict";return this._ignoreFocusChange};G.prototype.setIgnoreFocusChange=function(a){"use strict";this._ignoreFocusChange=a};G.prototype._clearSuggestionTouchendSelectFallbackTimer=function(){"use strict";this._suggestionTouchendSelectFallbackTimer&&(w(this._suggestionTouchendSelectFallbackTimer),this._suggestionTouchendSelectFallbackTimer=null)};G.prototype._onSuggestionItemClickedOrTapped=function(a){"use strict";this._clearSuggestionTouchendSelectFallbackTimer(),this.setIgnoreFocusChange(!1),this._onSuggestionSelect(this._queryResult[a.queryIndex]),this._hideSuggestion(!0),this._input.focus()};G.prototype._onSuggestionSelect=function(a){"use strict";__p&&__p();var b=this._input,c=b.selectionStart;if(c!==b.selectionEnd)return;var d=b.value,e=this._query,f=a.getAttribute("display"),g=this._createRegex(f,"i"),h=this._createRegex(e,"i"),i=f+this._NAME_SUFFIX,j=d.substring(c-e.length,c);if(!h.test(j))return;if(g.test(d.substring(c-f.length,c)))g=d.substring(0,c-f.length);else if(h.test(d)){f=j.substr(-e.length);if(f===e){g=d.substring(0,c-e.length);h="";for(var j=0,f=i.length;j<f;j++){h+=i.charAt(j);if(g.endsWith(h))break}(g.endsWith(" "+h)||g===h)&&(g=g.substr(0,g.lastIndexOf(h)))}else return}else return;g&&g.charAt(g.length-1)==="@"&&(g=g.slice(0,-1));e=g+i+d.substring(c);b.value=e;c+=e.length-d.length;l.IS_APPLE_WEBKIT_IOS&&(this.setIgnoreFocusChange(!0),b.blur(),b.focus(),this.setIgnoreFocusChange(!1));b.setSelectionRange(c,c);j=this._uids[i];j||(j=this._uids[i]=[]);j.indexOf(a.getAttribute("uid"))===-1&&(j.push(a.getAttribute("uid")),this._tagsUpdated());a.getAttribute("weak_reference")&&(this._weakReferences[a.getAttribute("uid")]=!0);this._sync()};G.prototype._clearBottomMargin=function(){"use strict";var a=this._getExpandElement();a.style.marginBottom=this._bottomMargin||""};G.prototype._assignSuggestion=function(){"use strict";m.get(G._suggestion).mentionId=this._mentionId};G.prototype._releaseSuggestion=function(){"use strict";m.get(G._suggestion).mentionId=null};G.prototype._isInstanceSuggestion=function(){"use strict";return m.get(G._suggestion).mentionId===this._mentionId};G.prototype._showSuggestion=function(){"use strict";__p&&__p();this._assignSuggestion();if(this._suggestionShown)return;this._suggestionShown=!0;this._mountIntoInsertParent();var a=this._input,b=G._suggestion;s.apply(b,{display:"block",width:a.offsetWidth+"px"});this._bottomMargin===void 0&&(this._bottomMargin=this._getExpandElement().style.marginBottom);b=this.minDistance;a=a.getBoundingClientRect();var c=document.elementFromPoint(1,a.bottom+b);if(!c){c=this._getExpandElement();c.style.marginBottom=b+"px";if(!n.bySigil(c,"scroll-area")){b=o.getScroll();o.scrollTo(b.x,Math.max(b.y,b.y+a.top-30))}}this._hideSuggestionTimer&&(w(this._hideSuggestionTimer),delete this._hideSuggestionTimer)};G.prototype._onBackSpaceKey=function(a){"use strict";__p&&__p();var b=this._input,c=b.selectionStart;if(c!==b.selectionEnd)return;var d=b.value,e=this._getTokenByCursorPosition(c-1);if(e){var f=d.substring(0,c),g=e.name;if(f.indexOf(g)===f.length-g.length){var h;if(G._CJK_ALTER_NAME.test(g))h=this._trim(g.replace(G._CJK_ALTER_NAME,""));else if(G._LATIN_ALTER_NAME.test(g))h=this._trim(g.replace(G._LATIN_ALTER_NAME,""));else{f=g.split(/\s+/g);f.length>1&&(f.pop(),h=f.join(" "))}if(h){h+=this._NAME_SUFFIX;this._uids[g].splice(this._uids[g].indexOf(e.uid),1);this._uids[h]=this._uids[h]||[];this._uids[h].push(e.uid);d=d.substr(0,c-g.length)+h+d.substr(c);c-=g.length-h.length;b.value=d;b.setSelectionRange(c,c);a.prevent();this._sync();return}}}var i;while(!0){f=d.charAt(c-1);if(f==="\u200b")d=d.substring(0,c-2)+d.substr(c),c-=1,i=!0;else break}i&&(a.prevent(),d=d.substring(0,c-2)+d.substr(c),b.value=d)};G.prototype._buildSectionHeader=function(a){"use strict";return a==null?null:new k(a.xhp).getFragment().firstChild};G.prototype._buildNoResultEntry=function(){"use strict";var a=h.create("i",{className:"mentions-suggest-item-img noResultsIcon"}),b=h.create("span",{className:"no-results"},y._("No hay resultados")),c=h.create("label",{className:"mentions-suggest-item"},a,b);c.appendChild(a);c.appendChild(b);return c};G.prototype._disable=function(a){"use strict";this._disabled=!0};G.prototype._enable=function(){"use strict";this._disabled=!1};G.prototype._syncMentionedUIDs=function(){"use strict";__p&&__p();var a=this._input.value;if(!a){this._uids={};return}var b=!1;for(var c in this._uids){var d=this._createRegex(c,"g");d=a.match(d);if(!d||!d.length){delete this._uids[c];b=!0;continue}var e=this._uids[c];!e.length?delete this._uids[c]:e.length>d.length&&(e.length=d.length)}b&&this._tagsUpdated()};G.prototype._syncHashtags=function(){"use strict";var a=this._input.value;this.shouldShowHashtags&&(this._hasHashtags=G._HASHTAG_TRIGGER.test(a))};G.prototype._syncMeasurer=function(){"use strict";__p&&__p();var a=this._input,b=a.value;if(!b){h.setContent(this._measurer,"");return}b=a.selectionStart;var c=a.selectionEnd;if(b!==c)return;c=h.create("div",{},a.value.substr(0,b));this._measurer.innerHTML=c.innerHTML+"<br><div></div>"};G.prototype._syncValue=function(){"use strict";__p&&__p();var a=this._input.value;for(var b in this._uids){var c=this._createRegex(b,"g"),d=this._uids[b],e=0;a=a.replace(c,function(a){var b=parseInt(d[e++],10);if(b)return"@["+b+":"+a+"]";else return a})}a=a.replace(/\u200B/g,"");this._hiddenInput.value!==a&&this.invoke("change",a);this._hiddenInput.value=a};G.prototype._syncStyles=function(a){"use strict";var b=getComputedStyle(this._input,null);a=a.style;var c=["fontSize","fontFamily","letterSpacing","lineHeight","paddingTop","paddingLeft","paddingRight","paddingBottom","textIndent","wordSpacing","textAlign"];while(c.length){var d=c.pop();a[d]=b[d]}};G.prototype._getTokenByCursorPosition=function(a){"use strict";__p&&__p();var b=this._input.value,c=null,d=this._uids;for(var e in d){if(c)break;var f=b.indexOf(e);if(f<0)continue;f=this._createRegex(e,"g");var g=0;b.replace(f,function(b,f){!c&&a>f&&a<f+b.length&&(c={name:e,uid:d[e][g]}),g++})}return c};G.prototype._trim=function(a){"use strict";return a.trim?a.trim():a.replace(/(^\s*)|(\s*$)/g,"")};G.prototype._createRegex=function(a,b){"use strict";a=a.replace(G._REGEX_SPECIAL_CHARS,"\\$&");return new RegExp(a,b)};G.prototype._tagsUpdated=function(){"use strict";this._eventData.hasTags=Object.keys(this._uids).length>0,this._eventData.numTags=Object.keys(this._uids).length,q.invoke("MMentions:change",null,this._eventData)};G.prototype._clearHiddenInput=function(){"use strict";this._hiddenInput.value=""};Object.assign(G,{_MENTIONS_REGEX:/@\[([0-9]+)\:(([^\\\]]*(?:\\.)*)*)\]/g,_EN_NAMES:/^[A-Z][a-z]{1}/,_CJK_ALTER_NAME:/\uff08[^\uff09]+\uff09(\u200B\u200B)?$/g,_LATIN_ALTER_NAME:/\([^\)]+\)(\u200B\u200B)?$/g,_JP_SYLLABARY_CHARS:/(^[\u3040-\u309F]{3,3})|(^[\u30A0-\u30FF]{3,3})/g,_CJK_CHARS:/^[\u4E00-\u9FFF\uF900-\uFAFF\u3400-\u4DBF]{2,2}/g,_REGEX_SPECIAL_CHARS:/[\/\.\*\+\?\}\(\)\[\]\{\}\\]/g,_HASHTAG_TRIGGER:/[#\uFF03]/,_MIN_DISTANCE:130});Object.assign(G.prototype,{_NAME_SUFFIX:"\u200b\u200b",_SUGGESTION_SIGIL:"mentionsSuggestionItem",_COMPOSER_SIGIL:"composer-textarea"});x(G,["change"]);e.exports=G}),null);
__d("MMentionsRenderer",["DOM"],(function(a,b,c,d,e,f,g){__p&&__p();a={createSuggestionNode:function(a){__p&&__p();var b=g.create("img",{src:a.photo,className:"mentions-suggest-item-img"}),c=g.create("div",{className:"mentions-suggest-item-text"});c.appendChild(g.create("span",{className:"mentions-suggest-item-name"},a.display));if(a.subtext){var d=a.subtext;a.type&&a.type!="user"&&(d=d?a.type+" \xb7 "+d:a.type);c.appendChild(g.create("span",{className:"mentions-suggest-item-subtext"},d))}d=g.create("label",{className:"mentions-suggest-item",display:a.display,uid:a.id,rel:a.id,photo:a.photo,subtext:a.subtext},b,c);d.appendChild(b);d.appendChild(c);a.weak_reference&&d.setAttribute("weak_reference","y");a.renderType&&d.setAttribute("renderType",a.renderType);return d}};e.exports=a}),null);
__d("MTypeaheadTouchSourceShowOnFocus",["MRequest","MTypeaheadTouchSource","Stratcom"],(function(a,b,c,d,e,f,g,h,i){__p&&__p();var j;b=babelHelpers.inherits(a,h);j=b&&b.prototype;function a(a,b,c){"use strict";__p&&__p();j.constructor.call(this,a,b);this.uri=a;this._bootstrapData=[];this._query=null;this._isFocused=!1;this.maximumResultCount=c||5;if(b==="work_position_inference"){var d=i.listen("MProfileEditWork:dataChanged",null,function(a){a=a.getData().existing_fields;a&&this.updateBootstrapData(a)}.bind(this));i.listen("m:page:unload",null,function(){d.remove(),i.removeCurrentListener()})}}a.prototype.updateBootstrapData=function(a){"use strict";var b=new g(this.uri);b.addData({existing_fields_json:JSON.stringify(a)});b.setMethod("POST");b.listen("done",function(a){this._bootstrapData=[],a.payload!==void 0&&this.ondata(a.payload)}.bind(this));b.send()};a.prototype.showOnFocus=function(){"use strict";if(this._isFocused&&this._query===""){var a=this.renderNodes(null,this._bootstrapData);this.invoke("resultsready",a);this.invoke("complete")}};a.prototype.ondata=function(a){"use strict";h.prototype.ondata.call(this,a);var b=Math.min(a.length,this.getMaximumResultCount());for(var c=0;c<b;++c)a[c].uid&&this._bootstrapData.push(a[c].uid);this.showOnFocus()};a.prototype.setQuery=function(a){"use strict";this._query=a};a.prototype.setIsFocused=function(a){"use strict";this._isFocused=a};a.prototype.didChange=function(a){"use strict";this._query=a};a.prototype.getMaximumResultCount=function(){"use strict";return this.maximumResultCount};e.exports=a}),null);
__d("MMentionsBootstrapDataSource",["MMentionsRenderer","MTypeaheadTouchSourceShowOnFocus"],(function(a,b,c,d,e,f,g,h){__p&&__p();var i;b=babelHelpers.inherits(a,h);i=b&&b.prototype;function a(a,b){"use strict";i.constructor.call(this,a,b)}a.prototype.createNode=function(a){"use strict";return g.createSuggestionNode(a)};e.exports=a}),null);
__d("MMentionsOnDemandDataSource",["MMentionsRenderer","MTypeaheadOnDemandSource"],(function(a,b,c,d,e,f,g,h){__p&&__p();var i;i=babelHelpers.inherits(a,h);i&&i.prototype;a.prototype.createNode=function(a){"use strict";return g.createSuggestionNode(a)};function a(){"use strict";i.apply(this,arguments)}e.exports=a}),null);
__d("InitMMentions",["MLegacyDataStore","MMentions","MMentionsBootstrapDataSource","MMentionsOnDemandDataSource","Stratcom","TypeaheadCompositeSource"],(function(a,b,c,d,e,f,g,h,i,j,k,l){__p&&__p();var m={},n={},o={};a={main:function(a){__p&&__p();var b=a.element;if(!b)return;if(!b.getBoundingClientRect)return;var c=[],d=a.sources.bootstrapped||[],e=a.sources.online||[],f=a.typeObjects,p=a.typeObjectsOrder,q="|",r=[];d.forEach(function(a){d=new i(a.src,a.source_key);a=a.source_key+q+a.src;m[a]||(m[a]=d);c.push(m[a]);r.push(a)});e.forEach(function(a){var b=q+a.src;n[b]||(n[b]=new j(a.src));c.push(n[b]);r.push(b)});if(!c.length)return;e=r.join(q);e in o||(o[e]=new l(c));var s=new h(b,o[e]);s.setTypeObjects(f);s.setTypeObjectsOrder(p);s.shouldShowHashtags=a.shouldShowHashtags;a.enforceStringMatch||s.disableStringMatch();g.set(b,{mentionsInstance:s});k.listen("m:page:unload-complete",null,function(a){document.documentElement.contains(b)||(k.removeCurrentListener(),s.dispose(),s=null,b=null)})}};e.exports=a}),null);
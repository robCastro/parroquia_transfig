if (self.CavalryLogger) { CavalryLogger.start_js(["2l6Dq"]); }

__d("MStoriesCardVideo",["MInlineVideo","MStoriesDOMUtils","MStoriesProgressbarSegment","MStoriesStratcomEvents","MStoriesUIConstants","MStoriesUtils","MVideoUtils","Run","Stratcom","Style","VideoPlayerReason"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){"use strict";__p&&__p();var r="m-video-play-button";function s(){__p&&__p();this.$1=0,this.$3=!1,this.$4=null,this.$5=!0,this.$6=null,this.$7=null,this.$13=function(){var a=!this.$5&&this.$6?this.$6:k.PROGRESS_BAR.DEFAULT_TIMER_DURATION_IN_SEC*k.SEC_TO_MS;this.$1+=k.PROGRESS_BAR.STORY_UPDATE_TICK_IN_SEC;a=this.$1*100*k.SEC_TO_MS/a;a=Math.min(a,100);var b=i.updateProgressbarSegment(a);(!b||a===100)&&(this.$9(),o.invoke(j.NEXT_CARD))}.bind(this),this.$9=function(){this.$15(),this.$14(),this.$3=!1,this.$6=0,this.$5=!0,this.$1=0}.bind(this),this.$10=function(){this.$2.forEach(function(a){return a.remove()}),this.$2=[],this.$9(),s.$8=null}.bind(this),this.$9=this.$9.bind(this),n.onLeave(this.$10)}s.getInstance=function(){this.$8||(this.$8=new s());return this.$8};s.init=function(a){s.getInstance().setup(a.videoDuration,a.shouldPauseMedia,a.videoElem)};s.prototype.setup=function(a,b,c){this.$9(),this.$6=a,this.$5=!0,this.$3=!0,this.$7=h.find(c,"div",r),this.$11(),b||this.$12()};s.prototype.$11=function(){this.$2=[o.listen(j.VIDEO_PLAYING,null,function(){o.removeCurrentListener(),this.$14(),this.$1=0,this.$5=!1,this.$12()}.bind(this)),o.listen(j.VIDEO_PLAY,null,function(){this.$5&&(this.$14(),this.$1=0)}.bind(this)),o.listen(j.MEDIA_PAUSE,null,function(){this.$15()}.bind(this)),o.listen(j.MEDIA_PLAY,null,function(){this.$16()}.bind(this)),o.listen(j.TOAST_HIDING,null,function(){this.$5&&this.$7&&p.set(this.$7,"display","block")}.bind(this)),o.listen(j.TOAST_SHOWING,null,function(){this.$5&&this.$7&&p.set(this.$7,"display","none")}.bind(this))],this.$2=this.$2.concat(l.listenForThreadTransition(this.$9))};s.prototype.$15=function(){if(!this.$3||!this.$4)return;this.$14();g.getPlayerState()===m.PLAYER_STATE.playing&&g.pause(q.USER)};s.prototype.$16=function(){if(!this.$3||this.$4)return;this.$12();this.$5||g.play(q.USER)};s.prototype.$12=function(){if(this.$4)return;this.$4=setInterval(this.$13,k.PROGRESS_BAR.STORY_UPDATE_TICK_IN_SEC*k.SEC_TO_MS)};s.prototype.$14=function(){this.$4&&(clearInterval(this.$4),this.$4=null)};s.$8=null;e.exports=s}),null);
__d("FeedbackReactionType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({NONE:0,LIKE:1,LOVE:2,WOW:3,HAHA:4,YAY:5,OUCH:6,SORRY:7,ANGER:8,JACKO:9,CONFUSED:10,DOROTHY:11,TOTO:12,SELFIE:13,FLAME:14,PLANE:15})}),null);
__d("MFBStoriesConstants",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({INPUT_PLACE_HOLDER:"Reply...",RAINBOW_NO_EFFECT_ICON:"/images/stories/rainbow_no_effect_icon.png"})}),null);
__d("MStoriesLoggingConstants",[],(function(a,b,c,d,e,f){"use strict";a={REPLY_TYPES:{LIGHT_WEIGHT:"light_weight",TEXT:"text"}};e.exports=a}),null);
__d("FBKeyframesProject",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({ADS_ANIMATOR:"ads_animator",AWESOME_TEXT_POSTS:"awesome_text_posts",AWESOME_TEXT_STORIES:"awesome_text_stories",BALLOT:"ballot",CIVIC_PROPOSAL:"civic_proposal",CMS:"cms",CULTURAL_MOMENTS_QP:"cultural_moments_qp",CULTURAL_MOMENTS_QP_TOOL:"cultural_moments_qp_tool",DIGITAL_LITERACY:"digital_literacy",ELECTION_PHOTO_FORWARD:"election_photo_forward",FACEBOOK_STORIES:"facebook_stories",FEEDBACK_REACTIONS:"feedback_reactions",FUN_FACTS:"fun_facts",FUNDRAISER:"fundraiser",GOODWILL_AR_BIRTHDAY:"goodwill_ar_birthday",GOODWILL_MC:"goodwill_mc",ILLUSTRATION_KIT_TEMPLATE:"illustration_kit_template",KEYFRAMES_UICE:"keyframes_uice",KEYFRAMES_UNIT_TEST:"keyframes_unit_test",LIFE_EVENTS:"life_events",MESSAGING_REACTIONS:"messaging_reactions",MLE_REACTIONS:"mle_reactions",NT_EXAMPLES:"nt_examples",PAGE_SURFACE:"page_surface",PIXELCLOUD:"pixelcloud",PRIVACY_BASICS:"privacy_basics",RECRUITING_DELIGHT:"recruiting_delight",SOCIAL_PLAYER:"social_player",TEXT_DELIGHTS:"text_delights",TIME_IN_APP:"time_in_app",VIDEO_HOME_SOCIAL_GLYPH:"video_home_social_glyph",VOTER_REGISTRATION_DRIVE:"voter_registration_drive",YOUTH_PORTAL:"youth_portal",ONCALL_DASHBOARD:"oncall_dashboard"})}),null);
__d("once",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){var b=g(a);for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b}function g(a){__p&&__p();var b=a,c;a=function(){if(b){for(var a=arguments.length,d=new Array(a),e=0;e<a;e++)d[e]=arguments[e];c=b.apply(this,d);b=null}return c};return a}e.exports=a}),null);
__d("MStoriesToast",["CSS","DOM","FBKeyframesProject","FBLogger","Keyframes","MStoriesStratcomEvents","Run","Stratcom","cx","fbt","promiseDone"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){"use strict";__p&&__p();var r=1e3,s=500;function t(){this.$2=[],this.$4=function(){this.$1&&(h.remove(this.$1),this.$1=null),this.$2=[],t.$3=null}.bind(this),m.onLeave(this.$4)}t.getInstance=function(){this.$3||(this.$3=new t());return this.$3};t.prototype.showToast=function(a,b,c){__p&&__p();this.$1&&(this.$2.forEach(function(a){return clearTimeout(a)}),h.remove(this.$1),this.$1=null);c&&n.invoke(l.MEDIA_PAUSE_WITH_COVER,null);this.$1=h.create("div",null,a);a=b===null||b===void 0?r:b;n.invoke(l.TOAST_SHOWING,null);h.appendContent(document.body,this.$1);this.$2=[setTimeout(function(){this.$1&&g.addClass(this.$1,"_1ufk")}.bind(this),a),setTimeout(function(){h.remove(this.$1),c&&n.invoke(l.THREAD_MODAL_HIDE,null),n.invoke(l.TOAST_HIDING,null),this.$1=null}.bind(this),a+s)]};t.showDefaultToast=function(a,b){a=h.create("div",{className:"_3fcy"},a);a=h.create("div",{className:"_30l6 bottom"},a);t.getInstance().showToast(a,b)};t.showReplySentSuccessToast=function(a,b){b===void 0&&(b=!0);var c=null;a?c=h.create("div",{className:"_30l3"},a):c=h.create("div",{className:"_30l4"});a=h.create("div",{className:"_30l5"},p._("Respuesta enviada"));c=h.create("div",{className:"_30l6"},[c,a]);t.getInstance().showToast(c,r,b)};t.showReactionSentSuccessToast=function(a,b){var c=h.create("div",{className:"_6kiw"});n.invoke(l.MEDIA_PAUSE_WITH_COVER,null);n.invoke(l.TOAST_SHOWING,null);q(k.requestRenderer(a,{projectName:i.FACEBOOK_STORIES,assetName:b}),function(a){h.appendContent(document.body,c),h.appendContent(c,a.getElement()),a.play(),setTimeout(function(){h.remove(c),n.invoke(l.TOAST_HIDING,null),n.invoke(l.THREAD_MODAL_HIDE,null)},s)},function(a){j("fb_stories_web").catching(a).warn("Cannot load mtouch reaction animation")})};t.showReplySentFailedToast=function(){var a=h.create("div",{className:"_30l7"}),b=h.create("div",{className:"_30l5"},p._("Error en el env\u00edo"));a=h.create("div",{className:"_30l6"},[a,b]);t.getInstance().showToast(a,r)};e.exports=t}),null);
__d("MStoriesPostReplyInstance",["Bootloader","CSS","FBStoriesReactionAnimationConfig","FeedbackReactionType","MFBStoriesConstants","MFBStoriesGatingConfig","MFBStoriesSigil","MStoriesLoggingConstants","MStoriesStratcomEvents","MStoriesToast","MStoriesUtils","MViewport","Run","Stratcom","cx","fbt","gkx","promiseDone"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x){"use strict";__p&&__p();var y=function(a){switch(a){case j.LIKE:return"\ud83d\udc4d";case j.LOVE:return"\u2764\ufe0f";case j.HAHA:return"\ud83d\ude06";case j.WOW:return"\ud83d\ude2e";case j.SORRY:return"\ud83d\ude22";case j.ANGER:return"\ud83d\ude21";default:return null}};z.init=function(a){var b=z.getInstance();b.$1=babelHelpers["extends"]({},a);this.$4=b};z.getInstance=function(){this.$4||(this.$4=new z());return this.$4};function z(){this.$2=null,this.$5=function(){this.$3.forEach(function(a){return a.remove()}),this.$3=[],z.$4=null}.bind(this),this.$6=function(){this.$2&&this.$2.dispose(),this.$2=null}.bind(this),this.$3=[],this.listenForSendButton(),this.listenForEmojiOrLightweightReaction(),this.listenForReplyInput(),this.listenForSwipeReply(),this.listenForProfileDiv(),this.listenForBucketTransition(),this.listenForScrollableArea(),s.onLeave(this.$5)}z.prototype.listenForBucketTransition=function(){this.$3.push(t.listen(o.NEXT_BUCKET,null,this.$5),t.listen(o.PREV_BUCKET,null,this.$5))};z.prototype.listenForScrollableArea=function(){this.$3.push(t.listen("MScrollArea:create",null,function(a){a=a.getData();a.element.id==="mtouch-stories-reply-scroll-area"&&(z.getInstance().$2=a.scrollarea)})),this.$3.concat(q.listenForThreadTransition(this.$6))};z.prototype.listenForSendButton=function(){__p&&__p();var a="",b=t.listen("input",m.VIEWER_REPLY_INPUT,function(b){a=b.getTarget().value,a=a&&a.trim(),a&&a.length>0?(this.$1.sendButton.disabled=!1,h.addClass(this.$1.sendButton,"highlight")):(this.$1.sendButton.disabled=!0,h.removeClass(this.$1.sendButton,"highlight"))}.bind(this)),c=t.listen("click",m.VIEWER_REPLY_SEND_BUTTON,function(){if(!a||a.length===0)return;g.loadModules(["MStoriesMutationAPIs"],function(b){x(b.sendMessage(this.$1.threadId,a,this.$1.postType,this.$1.ownerID,n.REPLY_TYPES.TEXT))}.bind(this),"MStoriesPostReplyInstance");this.$1.sendButton.disabled=!0;this.$1.input.blur();h.removeClass(this.$1.sendButton,"highlight");p.showReplySentSuccessToast(null,!1)}.bind(this)),d=t.listen("blur",m.VIEWER_REPLY_INPUT,function(){return h.addClass(this.$1.sendButton,"hidden_elem")}.bind(this)),e=t.listen("focus",m.VIEWER_REPLY_INPUT,function(){return h.removeClass(this.$1.sendButton,"hidden_elem")}.bind(this));this.$3.push(c,b,d,e)};z.prototype.listenForEmojiOrLightweightReaction=function(){__p&&__p();this.$3.push(t.listen("blur",m.VIEWER_REPLY_INPUT,function(){return h.show(this.$1.emoji)}.bind(this))),this.$3.push(t.listen("focus",m.VIEWER_REPLY_INPUT,function(){return h.hide(this.$1.emoji)}.bind(this))),this.$3.push(t.listen("MScrollArea:scrollstart",null,function(){t.invoke(o.MEDIA_PAUSE_WITH_COVER)})),this.$3.push(t.listen("MScrollArea:scrollend",null,function(a){a=a.getData();a.scrollarea.getScrollLeft()<=0&&t.invoke(o.MEDIA_PLAY)})),this.$3.push(t.listen("click",m.VIEWER_REPLY_REACTION,function(a){__p&&__p();a=(a=a.getTarget())!=null?(a=a.firstChild)!=null?(a=a.dataset)!=null?a.reaction:a:a:a;if(!a)return;var b=y(Number(a));if(!b)return;g.loadModules(["MStoriesMutationAPIs"],function(a){x(a.sendLightweightReaction(this.$1.threadId,this.$1.postType,this.$1.ownerID,b))}.bind(this),"MStoriesPostReplyInstance");var c=i.uris[a];a="reaction_type_"+a;p.showReactionSentSuccessToast(c,a)}.bind(this))),this.$3.push(t.listen("click",m.VIEWER_REPLY_EMOJI,function(a){var b=(a=a.getTarget())!=null?(a=a.firstChild)!=null?a.data:a:a;if(!b||b.length===0)return;g.loadModules(["MStoriesMutationAPIs"],function(a){x(a.sendMessage(this.$1.threadId,b,this.$1.postType,this.$1.ownerID,n.REPLY_TYPES.LIGHT_WEIGHT))}.bind(this),"MStoriesPostReplyInstance");p.showReplySentSuccessToast(b)}.bind(this)))};z.prototype.listenForReplyInput=function(){__p&&__p();var a=v._("{Placeholder string}",[v._param("Placeholder string",k.INPUT_PLACE_HOLDER)]).toString(),b=function(a){return v._("Responder a {Story's owner name}",[v._param("Story's owner name",a)]).toString()},c=t.listen("focus",m.VIEWER_REPLY_INPUT,function(){document.removeEventListener("touchmove",q.touchMoveListener);var a=z.getInstance().$2;a&&a.reset();t.invoke(o.MEDIA_PAUSE_WITH_COVER,null);a=this.$1.input.value;this.$1.ownerName&&(!a||a.length===0)&&(this.$1.input.placeholder=b(this.$1.ownerName))}.bind(this)),d=t.listen("blur",m.VIEWER_REPLY_INPUT,function(){document.addEventListener("touchmove",q.touchMoveListener,{passive:!1});r.scrollToTop();t.invoke(o.THREAD_MODAL_HIDE,null);var b=this.$1.input.value;(!b===null||b.length===0)&&(this.$1.input.placeholder=a)}.bind(this)),e=t.listen("click",m.VIEWER_REPLY_SEND_BUTTON,function(){this.$1.input.value="",this.$1.input.placeholder=a}.bind(this)),f=t.listen("keyup",m.VIEWER_REPLY_INPUT,function(a){var b=a.getRawEvent().key;b==="Enter"&&(a.prevent(),this.$1.sendButton.click())}.bind(this));this.$3.push(e,c,d,f)};z.prototype.listenForSwipeReply=function(){var a=t.listen(o.SWIPE_REPLY,null,function(){if(!l.enableSwipeReply)return;this.$1.input.focus()}.bind(this));this.$3.push(a)};z.prototype.listenForProfileDiv=function(){var a=t.listen("blur",m.VIEWER_REPLY_INPUT,function(){return h.addClass(this.$1.profilePicDiv,"hidden_elem")}.bind(this)),b=t.listen("focus",m.VIEWER_REPLY_INPUT,function(){return h.removeClass(this.$1.profilePicDiv,"hidden_elem")}.bind(this));this.$3.push(a,b)};e.exports=z}),null);
__d("XWebGraphQLMutationController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/webgraphql/mutation/",{query_id:{type:"FBID"},variables:{type:"String"},doc_id:{type:"FBID"}})}),null);
__d("WebGraphQLLegacyHelper",["invariant"],(function(a,b,c,d,e,f,g){"use strict";e.exports={getURI:function(a){var b=a.controller,c=a.docID,d=a.queryID;a=a.variables;c!=d&&(c||d)!=null||g(0,5819,c,d);b=b.getURIBuilder();d?b.setFBID("query_id",d):b.setFBID("doc_id",c);a&&b.setString("variables",JSON.stringify(a));return b.getURI()}}}),null);
__d("base62",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function a(a){if(!a)return"0";var b="";while(a>0)b=g[a%62]+b,a=Math.floor(a/62);return b}e.exports=a}),null);
__d("WebGraphQLMutationBase",["CurrentUser","WebGraphQLLegacyHelper","XWebGraphQLMutationController","base62","invariant"],(function(a,b,c,d,e,f,g,h,i,j,k){"use strict";__p&&__p();var l=0;function a(a){this.$1=a}a.prototype.__getVariables=function(){return this.$1};a.prototype.__getDocID=function(){return this.constructor.__getDocID()};a.__getController=function(){return i};a.__getDocID=function(){k(0,1804)};a.getURI=function(a){return h.getURI({controller:this.__getController(),docID:this.__getDocID(),variables:{data:babelHelpers["extends"]({client_mutation_id:j(l++),actor_id:g.getID()},a)}})};e.exports=a}),null);
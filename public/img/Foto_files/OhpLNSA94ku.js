if (self.CavalryLogger) { CavalryLogger.start_js(["ht+6v"]); }

__d("MComposerStoreToInputMap",[],(function(a,b,c,d,e,f){e.exports={CONFIG:{csid:"csid"},SHARE:{ID:"sid",SHARE_URI:"linkUrl",FEEDBACK_SOURCE:"fs",APP_ID:"appid",INTERNAL_EXTRA:"internal_extra",LINK_NO_CHANGE:"link_no_change"}}}),null);
__d("MCompositionAudioFields",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({AUDIO_POST:"audio_post"})}),null);
__d("MCompositionAudioStore",["MCompositionAudioFields","MCompositionStore","MCompositionStoreID","emptyFunction","MCompositionConstants"],(function(a,b,c,d,e,f,g,h,i,j){a=b("MCompositionConstants").ActionTypes;c=new h(i.AUDIO,g).setMutable(!0).setHandlerFor(a.COMPOSITION_FINALIZE,j.thatReturnsNull).setHandlerFor(a.COMPOSITION_INITIALIZE,j.thatReturnsArgument).setHandlerFor(a.AUDIO_CHANGE,j.thatReturnsArgument).register();e.exports=c}),null);
__d("MCompositionFormatStore",["MCompositionFormatFields","MCompositionFormatID","MCompositionStore","MCompositionStoreID","emptyFunction","invariant","MCompositionConstants"],(function(a,b,c,d,e,f,g,h,i,j,k,l){__p&&__p();c=b("MCompositionConstants").ActionTypes;function a(a){if(a){var b=a[g.FORMAT_ID];Object.values(h).indexOf(b)!==-1||l(0,183);b=m.get(g.FORMAT_ID,null);a[g.PREVIOUS_FORMAT_ID]=b}return a}var m=new i(j.FORMAT,g).setRequiredFields(g.FORMAT_ID).setHandlerFor(c.COMPOSITION_FINALIZE,k.thatReturnsNull).setHandlerFor(c.COMPOSITION_INITIALIZE,a).setHandlerFor(c.FORMAT_CHANGE,a).register();e.exports=m}),null);
__d("MCompositionMinutiaeFields",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({ACTION_TYPE_ID:"action_type",CUSTOM_ICON_ID:"custom_icon",FBT_PHRASE:"fbt_phrase",ICON:"icon_src",ICON_LEGACY:"icon",OBJECT_ID:"object",OBJECT_NAME:"object_str",SHOW_ATTACHMENT:"show_attachment",SUGGESTION_MECHANISM:"suggestion_mechanism",TRIGGERS_EVENT_TAG_EXPANSION:"triggers_event_tag_expansion",USE_DEFAULT_ICON:"use_default_icon"})}),null);
__d("MCompositionMinutiaeStore",["MCompositionMinutiaeFields","MCompositionStore","MCompositionStoreID","emptyFunction","MCompositionConstants"],(function(a,b,c,d,e,f,g,h,i,j){a=b("MCompositionConstants").ActionTypes;c=new h(i.MINUTIAE,g).setRequiredFields(g.ACTION_TYPE_ID,g.ICON,g.ICON_LEGACY,g.OBJECT_ID,g.OBJECT_NAME).setHandlerFor(a.COMPOSITION_FINALIZE,j.thatReturnsNull).setHandlerFor(a.COMPOSITION_INITIALIZE,j.thatReturnsArgument).setHandlerFor(a.MINUTIAE_REMOVE,j.thatReturnsNull).setHandlerFor(a.MINUTIAE_SET,j.thatReturnsArgument).register();e.exports=c}),null);
__d("MCompositionPageRecommendationsStore",["MCompositionPageRecommendationsFields","MCompositionStore","MCompositionStoreID","emptyFunction","MCompositionConstants"],(function(a,b,c,d,e,f,g,h,i,j){c=b("MCompositionConstants").ActionTypes;function a(a){a=a||{};return a}d=new h(i.PAGE_RECOMMENDATIONS,g).setHandlerFor(c.COMPOSITION_FINALIZE,j.thatReturnsNull).setHandlerFor(c.COMPOSITION_INITIALIZE,a).register();e.exports=d}),null);
__d("MCompositionPhotoFields",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({PHOTO_INFO_LIST:"photo_info_list"})}),null);
__d("MCompositionPhotoStore",["MCompositionPhotoFields","MCompositionStore","MCompositionStoreID","emptyFunction","MCompositionConstants"],(function(a,b,c,d,e,f,g,h,i,j){a=b("MCompositionConstants").ActionTypes;c=new h(i.PHOTO,g).setMutable(!0).setHandlerFor(a.COMPOSITION_FINALIZE,j.thatReturnsNull).setHandlerFor(a.COMPOSITION_INITIALIZE,j.thatReturnsArgument).setHandlerFor(a.PHOTO_CHANGE,j.thatReturnsArgument).register();e.exports=c}),null);
__d("MCompositionPlaceFields",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({ADDRESS:"address",FREEFORM_NAME:"FREEFORM_NAME",ID:"id",IS_CURRENT:"is_current",IS_EVENT:"isEventResult",IS_NEW:"new_place",IS_NON_SPECIFIC:"isNonSpecific",JSON_LOCATION:"JSON_LOCATION",LATITUDE:"latitude",LONGITUDE:"longitude",NAME:"name",PHONE:"phone",SUGGESTION_MECHANISM:"suggestion_mechanism",SUGGESTED_OG_ACTION_TYPE_ID:"og_action_type_id",TOPIC_TOKENS:"topic_tokens",WEBSITE:"website",ZIP:"zip"})}),null);
__d("MCompositionPlaceStore",["FBJSON","MCompositionConfigStore","MCompositionDispatcher","MCompositionPlaceFields","MCompositionStore","MCompositionStoreID","MPlaces","emptyFunction","MCompositionConstants"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){a=b("MCompositionConstants").ActionTypes;c=new k(l.PLACE,j).setRequiredFields(j.NAME).setHandlerFor(a.COMPOSITION_INITIALIZE,function(a){i.waitFor([h.toUpdate()]);return a}).setHandlerFor(a.PLACE_REMOVE,n.thatReturnsNull).setHandlerFor(a.PLACE_SET,function(a){var b=a[j.LATITUDE],c=a[j.LONGITUDE];b&&c?a[j.JSON_LOCATION]=g.stringify({latitude:b,longitude:c}):a[j.JSON_LOCATION]=m.getCurrentJSONLocation();return a}).register();e.exports=c}),null);
__d("MCompositionSlideshowStore",["MCompositionDispatcher","MCompositionPhotoFields","MCompositionPhotoStore","MCompositionSlideshowFields","MCompositionStore","MCompositionStoreID","MMultiPhotoUploaderAttachmentState","SlideshowConstants","emptyFunction","MCompositionConstants"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){__p&&__p();c=b("MCompositionConstants").ActionTypes;function a(a){g.waitFor([i.toUpdate()]);a=i.get(h.PHOTO_INFO_LIST,null);var b=p.getAll(),c={};c[j.IS_VALID]=Boolean(a&&a.length>=n.min_photo_num&&a.length<=n.max_photo_num&&a.filter(function(a){return a.state!==m.UPLOADED}).length===0);return babelHelpers["extends"]({},b,c)}var p=new k(l.SLIDESHOW,j).setRequiredFields(j.IS_VALID).setHandlerFor(c.COMPOSITION_FINALIZE,o.thatReturnsNull).setHandlerFor(c.COMPOSITION_INITIALIZE,a).setHandlerFor(c.PHOTO_CHANGE,a).register();e.exports=p}),null);
__d("MCompositionStatusFields",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({TEXT:"TEXT",LONGEST_LENGTH:"LONGEST_LENGTH"})}),null);
__d("MCompositionStatusStore",["MCompositionStatusFields","MCompositionStore","MCompositionStoreID","emptyFunction","MCompositionConstants"],(function(a,b,c,d,e,f,g,h,i,j){c=b("MCompositionConstants").ActionTypes;function a(a){a=a||{};Object.prototype.hasOwnProperty.call(a,g.TEXT)||(a[g.TEXT]="");a[g.LONGEST_LENGTH]=Math.max(k.get(g.LONGEST_LENGTH,0),a[g.TEXT].length);return a}var k=new h(i.STATUS,g).setRequiredFields(g.LONGEST_LENGTH,g.TEXT).setHandlerFor(c.COMPOSITION_FINALIZE,j.thatReturnsNull).setHandlerFor(c.COMPOSITION_INITIALIZE,a).setHandlerFor(c.STATUS_CHANGE,a).register();e.exports=k}),null);
__d("MCompositionWithFields",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({TOKENS:"TOKENS"})}),null);
__d("MCompositionWithStore",["MCompositionStore","MCompositionStoreID","MCompositionWithFields","emptyFunction","MCompositionConstants"],(function(a,b,c,d,e,f,g,h,i,j){a=b("MCompositionConstants").ActionTypes;c=new g(h.WITH_TAGS,i).setMutable(!0).setHandlerFor(a.COMPOSITION_FINALIZE,j.thatReturnsNull).setHandlerFor(a.COMPOSITION_INITIALIZE,j.thatReturnsArgument).setHandlerFor(a.WITH_CHANGE,j.thatReturnsArgument).register();e.exports=c}),null);
__d("MTaggableActivityPreviewTemplate",["invariant"],(function(a,b,c,d,e,f,g){__p&&__p();function a(a,b){"use strict";this.$1=a,this.$2=b}a.prototype.getTemplateArray=function(){"use strict";var a=0,b=this.$2.length,c,d=[];for(var e=0;e<=this.$2.length;e++)c=e!==b?this.$2[e].position:this.$1.length,d.push(this.$1.slice(a,c)),a=c;return d};a.prototype.getTokens=function(){"use strict";return this.$2};a.prototype.renderArray=function(a){"use strict";this.$2.length===a.length||g(0,4693,this.$2.length,a.length);var b=this.getTemplateArray().concat();for(var c=a.length;c>0;c--)b.splice(c,0,a[c-1]);return b};e.exports=a}),null);
__d("XTaggableActivityPreviewTemplateQueryController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/composer/intl/preview_template/",{action_type_id:{type:"Int",required:!0}})}),null);
__d("MTaggableActivityPreviewTemplateQuery",["Promise","ErrorUtils","MCache","MRequest","MTaggableActivityPreviewTemplate","MTaggableActivityPreviewTemplateConstants","XTaggableActivityPreviewTemplateQueryController","invariant"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){__p&&__p();var o=l.TOKEN_TYPES,p=12096e5,q="__created_at";function r(a){return h.applyWithGuard(a,null,null,null,"MTaggableActivityPreviewTemplate")}function a(a){"use strict";this.$1=a,this.$2={has_place_type:"",has_users_type:""}}a.prototype.$3=function(a){"use strict";a[q]=Date.now();r(function(){return i.setItem(this.getCacheKey(),a)}.bind(this));return this.$4(a)};a.prototype.$4=function(a){"use strict";a=a[this.$5()];a||n(0,12251,this.$5());return new k(a.string,a.tokens)};a.prototype.getCacheKey=function(){"use strict";return[l.CACHE_PREFIX,l.VERSION,this.$1,l.LOCALE,l.GENDER].join("_")};a.prototype.$6=function(){"use strict";__p&&__p();var a=this.getCacheKey(),b=r(function(){return i.getItem(a)});if(!b)return null;if(Date.now()-b[q]>p){r(function(){return i.removeItem(a)});return null}return this.$4(b)};a.prototype.$5=function(){"use strict";return l.KEY_PREFIX+"_"+Object.keys(this.$2).sort().map(function(a){return this.$2[a]}.bind(this)).join("_")};a.prototype.getURI=function(){"use strict";return m.getURIBuilder().setInt("action_type_id",this.$1).getURI()};a.prototype.fetch=function(){"use strict";var a=this.$6();return a?g.resolve(a):this.$7()};a.prototype.$7=function(){"use strict";return new g(function(a){var b=new j(this.getURI()).setMethod("GET");b.listen("done",function(b){a(this.$3(b.payload.templates))}.bind(this));b.send()}.bind(this))};a.prototype.setHasPeople=function(){"use strict";this.$2.has_users_type=o.PEOPLE.MULTIPLE;return this};a.prototype.setHasPerson=function(){"use strict";this.$2.has_users_type=o.PEOPLE.SINGLE;return this};a.prototype.setHasPlace=function(){"use strict";this.$2.has_place_type=o.PLACE.SPECIFIC;return this};e.exports=a}),null);
__d("MComposerLoggerPublishingListeners",["MComposerLogger","MComposerWaterfallEvent"],(function(a,b,c,d,e,f,g,h){function a(a,b){"use strict";this.error=this.fail=function(){g.logWithSessionID(h.COMPOSER_POST_FAILURE,a,b)},this.done=function(){g.logWithSessionID(h.COMPOSER_POST_SUCCESS,a,b)}}e.exports=a}),null);
__d("MComposerSlideshowLogger",["MCompositionConfigFields","MCompositionConfigStore","MCompositionPhotoFields","MCompositionPhotoStore","SlideshowCreationWaterfallLogger"],(function(a,b,c,d,e,f,g,h,i,j,k){a={log:function(a){var b=h.get(g.SESSION_ID,null),c=j.get(i.PHOTO_INFO_LIST,[]).length;k.logEvent(a,{photo_count:c,composer_session_id:b},"composer_slideshow")}};e.exports=a}),null);
__d("MComposerNavigationMixin",["MComposerNavigation","invariant"],(function(a,b,c,d,e,f,g,h){__p&&__p();a={__navigationPolicy:null,currentNavigationPolicy:function(){this.hasNavigationPolicy()||h(0,6080);return this.__navigationPolicy},hasNavigationPolicy:function(){return!!this.__navigationPolicy},newNavigationPolicy:function(){this.hasNavigationPolicy()&&h(0,6081);this.__navigationPolicy=g.newPolicy().addOnClose(function(){return this.__navigationPolicy=null}.bind(this));return this.__navigationPolicy},cleanupSoftState:function(){g.cleanupSoftState()}};e.exports=a}),null);
__d("MAlbumPicker",["CSS","DOM","MComposerNavigationMixin","MLegacyDataStore","Stratcom","$","eventsMixinDeprecated","mixin"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){__p&&__p();var o;a=babelHelpers.inherits(p,n(i));o=a&&a.prototype;function p(a){"use strict";__p&&__p();o.constructor.call(this);this._root=a;this._albumList=h.scry(this._root,"div","album-list")[0];this._createAlbumRoot=h.scry(this._root,"div","create-album")[0];this._albumListInputs=this._getAlbumListInputs();for(var a=0;a<this._albumListInputs.length;a++){var b=this._albumListInputs[a];if(b.checked){b=j.get(b);this._currentSelectedAlbumID=b.album_id;break}}this._listeners=[k.listen("click","cancel_album_picker",function(){this._navigateAwayAndCancel()}.bind(this)),k.listen("click","album-input",this._onAlbumSelected.bind(this))];this._albumList&&this._createAlbumRoot&&(this._listeners.push(k.listen("click","create-album-item",this._openCreateAlbum.bind(this))),this._listeners.push(k.listen("click","cancel_create_album",this._cancelCreateAlbum.bind(this))),this._listeners.push(k.listen("MPhotosCreateAlbum:created",null,this._onCreateAlbum.bind(this))))}p.prototype._getAlbumListInputs=function(){"use strict";return h.scry(this._albumList,"input").filter(function(a){return a.type==="radio"})};p.prototype._navigateAway=function(){"use strict";if(!this.hasNavigationPolicy())return;this.currentNavigationPolicy().addOnClose(function(){return h.hide(this._root)}.bind(this)).close()};p.prototype._navigateAwayAndCancel=function(){"use strict";if(!this.hasNavigationPolicy())return;this.currentNavigationPolicy().addOnClose(function(){return this._cancel()}.bind(this)).close()};p.prototype.hide=function(){"use strict";this._navigateAway()};p.prototype.show=function(){"use strict";this.newNavigationPolicy().addOnCloseByBrowser(function(){return this._cancel()}.bind(this)).addOnOpen(function(){return h.show(this._root)}.bind(this)).open(),this._albumListInputs.length===0&&(this._albumListInputs=this._getAlbumListInputs())};p.prototype.resetAlbumSelection=function(){"use strict";this._currentSelectedAlbumID=null;for(var a=0;a<this._albumListInputs.length;a++){var b=this._albumListInputs[a],c=j.get(b);c.is_mobile_uploads_album?(b.checked=!0,this._currentSelectedAlbumID=c.album_id):b.checked=!1}};p.prototype._openCreateAlbum=function(a){"use strict";k.invoke("MAlbumPicker:createalbum:open"),h.hide(this._albumList),h.show(this._createAlbumRoot)};p.prototype._closeCreateAlbum=function(){"use strict";k.invoke("MAlbumPicker:createalbum:close"),h.hide(this._createAlbumRoot),h.show(this._albumList)};p.prototype._cancelCreateAlbum=function(){"use strict";this._albumListInputs.forEach(function(a){var b=j.get(a);b.album_id===this._currentSelectedAlbumID&&(a.checked=!0)}.bind(this)),this._closeCreateAlbum()};p.prototype._onCreateAlbum=function(a){"use strict";a=a.getData();this._closeCreateAlbum();this._chooseAlbum(!1,a.album_id,a.privacy_id)};p.prototype._onAlbumSelected=function(a){"use strict";a=a.getNode("album-input");a=j.get(a);var b=a.is_mobile_uploads_album,c=a.album_id;a=a.privacy_id;this._currentSelectedAlbumID=c;this._chooseAlbum(b,c,a)};p.prototype._chooseAlbum=function(a,b,c){"use strict";g.conditionClass(l("album-button"),"active",!a),this._navigateAway(),this.invoke("choose-album",{is_mobile_uploads_album:a,album_id:b,privacy_id:c})};p.prototype._cancel=function(){"use strict";h.hide(this._root),this.invoke("cancel")};p.fromID=function(a){"use strict";a=l(a);var b=j.get(a);b._albumPicker||(b._albumPicker=new p(a));return b._albumPicker};m(p,["cancel","choose-album"]);Object.assign(p.prototype,{_root:null,_listeners:null});e.exports=p}),null);
__d("GroupSellUserActionsTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();function a(){this.$1={}}a.prototype.log=function(){h.log("logger:GroupSellUserActionsLoggerConfig",this.$1,g.BASIC)};a.prototype.logVital=function(){h.log("logger:GroupSellUserActionsLoggerConfig",this.$1,g.VITAL)};a.prototype.logImmediately=function(){h.log("logger:GroupSellUserActionsLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setAccountstatus=function(a){this.$1.accountstatus=a;return this};a.prototype.setAppID=function(a){this.$1.appid=a;return this};a.prototype.setAppversion=function(a){this.$1.appversion=a;return this};a.prototype.setCategoryID=function(a){this.$1.category_id=a;return this};a.prototype.setClassifierWords=function(a){this.$1.classifier_words=h.serializeVector(a);return this};a.prototype.setClientCarrier=function(a){this.$1.client_carrier=a;return this};a.prototype.setClientUserID=function(a){this.$1.client_userid=a;return this};a.prototype.setClienttime=function(a){this.$1.clienttime=a;return this};a.prototype.setContainermodule=function(a){this.$1.containermodule=a;return this};a.prototype.setCountry=function(a){this.$1.country=a;return this};a.prototype.setCrossPostTargets=function(a){this.$1.cross_post_targets=h.serializeVector(a);return this};a.prototype.setDescription=function(a){this.$1.description=a;return this};a.prototype.setDeviceid=function(a){this.$1.deviceid=a;return this};a.prototype.setDuplicateHash=function(a){this.$1.duplicate_hash=a;return this};a.prototype.setEvent=function(a){this.$1.event=a;return this};a.prototype.setForSaleItemFbType=function(a){this.$1.for_sale_item_fb_type=a;return this};a.prototype.setGroupID=function(a){this.$1.group_id=a;return this};a.prototype.setGroupMembersCountBucket=function(a){this.$1.group_members_count_bucket=a;return this};a.prototype.setGroupMessageID=function(a){this.$1.group_message_id=a;return this};a.prototype.setGroupPostHash=function(a){this.$1.group_post_hash=a;return this};a.prototype.setHashid=function(a){this.$1.hashid=a;return this};a.prototype.setInterceptWords=function(a){this.$1.intercept_words=a;return this};a.prototype.setInterestCommentBucket=function(a){this.$1.interest_comment_bucket=a;return this};a.prototype.setInterestLikeBucket=function(a){this.$1.interest_like_bucket=a;return this};a.prototype.setInterestMessageBucket=function(a){this.$1.interest_message_bucket=a;return this};a.prototype.setIsAdmin=function(a){this.$1.is_admin=a;return this};a.prototype.setIsEdit=function(a){this.$1.is_edit=a;return this};a.prototype.setIsFsGroup=function(a){this.$1.is_fs_group=a;return this};a.prototype.setIsMarketplace=function(a){this.$1.is_marketplace=a;return this};a.prototype.setIsemployee=function(a){this.$1.isemployee=a;return this};a.prototype.setLatitude=function(a){this.$1.latitude=a;return this};a.prototype.setLocationID=function(a){this.$1.location_id=a;return this};a.prototype.setLongitude=function(a){this.$1.longitude=a;return this};a.prototype.setMarketplaceXpostCheckboxShown=function(a){this.$1.marketplace_xpost_checkbox_shown=a;return this};a.prototype.setMarketplaceXpostCheckedOnComposerLoad=function(a){this.$1.marketplace_xpost_checked_on_composer_load=a;return this};a.prototype.setMarketplaceXpostCheckedOnPost=function(a){this.$1.marketplace_xpost_checked_on_post=a;return this};a.prototype.setMarketplaceXpostExperimentQeMode=function(a){this.$1.marketplace_xpost_experiment_qe_mode=a;return this};a.prototype.setMarketplaceXpostFirstTimeCheckboxSeen=function(a){this.$1.marketplace_xpost_first_time_checkbox_seen=a;return this};a.prototype.setMarketplaceXpostSplitQeMode=function(a){this.$1.marketplace_xpost_split_qe_mode=a;return this};a.prototype.setName=function(a){this.$1.name=a;return this};a.prototype.setNumPhotos=function(a){this.$1.num_photos=a;return this};a.prototype.setOriginatedGroupID=function(a){this.$1.originated_group_id=a;return this};a.prototype.setPickupNote=function(a){this.$1.pickup_note=a;return this};a.prototype.setPriceAmount=function(a){this.$1.price_amount=a;return this};a.prototype.setPriceCurrency=function(a){this.$1.price_currency=a;return this};a.prototype.setPriceType=function(a){this.$1.price_type=a;return this};a.prototype.setProductAvailability=function(a){this.$1.product_availability=a;return this};a.prototype.setProductItemID=function(a){this.$1.product_item_id=a;return this};a.prototype.setReferralSurface=function(a){this.$1.referral_surface=a;return this};a.prototype.setSavedSearchID=function(a){this.$1.saved_search_id=a;return this};a.prototype.setSavedSearchResultCount=function(a){this.$1.saved_search_result_count=a;return this};a.prototype.setSavedSearchText=function(a){this.$1.saved_search_text=a;return this};a.prototype.setSellOptionsID=function(a){this.$1.sell_options_id=a;return this};a.prototype.setSeq=function(a){this.$1.seq=a;return this};a.prototype.setSessionid=function(a){this.$1.sessionid=a;return this};a.prototype.setSurface=function(a){this.$1.surface=a;return this};a.prototype.setSyncMetadataID=function(a){this.$1.sync_metadata_id=a;return this};a.prototype.setTaxonCategoryPath=function(a){this.$1.taxon_category_path=a;return this};a.prototype.setTime=function(a){this.$1.time=a;return this};a.prototype.setTitle=function(a){this.$1.title=a;return this};a.prototype.setUuid=function(a){this.$1.uuid=a;return this};a.prototype.setVC=function(a){this.$1.vc=a;return this};a.prototype.setWeight=function(a){this.$1.weight=a;return this};a.prototype.updateExtraData=function(a){a=i(h.serializeMap(a));h.checkExtraDataFieldNames(a,j);this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.addToExtraData=function(a,b){var c={};c[a]=b;return this.updateExtraData(c)};var j={accountstatus:!0,appid:!0,appversion:!0,category_id:!0,classifier_words:!0,client_carrier:!0,client_userid:!0,clienttime:!0,containermodule:!0,country:!0,cross_post_targets:!0,description:!0,deviceid:!0,duplicate_hash:!0,event:!0,for_sale_item_fb_type:!0,group_id:!0,group_members_count_bucket:!0,group_message_id:!0,group_post_hash:!0,hashid:!0,intercept_words:!0,interest_comment_bucket:!0,interest_like_bucket:!0,interest_message_bucket:!0,is_admin:!0,is_edit:!0,is_fs_group:!0,is_marketplace:!0,isemployee:!0,latitude:!0,location_id:!0,longitude:!0,marketplace_xpost_checkbox_shown:!0,marketplace_xpost_checked_on_composer_load:!0,marketplace_xpost_checked_on_post:!0,marketplace_xpost_experiment_qe_mode:!0,marketplace_xpost_first_time_checkbox_seen:!0,marketplace_xpost_split_qe_mode:!0,name:!0,num_photos:!0,originated_group_id:!0,pickup_note:!0,price_amount:!0,price_currency:!0,price_type:!0,product_availability:!0,product_item_id:!0,referral_surface:!0,saved_search_id:!0,saved_search_result_count:!0,saved_search_text:!0,sell_options_id:!0,seq:!0,sessionid:!0,surface:!0,sync_metadata_id:!0,taxon_category_path:!0,time:!0,title:!0,uuid:!0,vc:!0,weight:!0};e.exports=a}),null);
__d("MComposerEligibility",["MCompositionAudioFields","MCompositionAudioStore","MCompositionMinutiaeFields","MCompositionMinutiaeStore","MCompositionPhotoFields","MCompositionPhotoStore","MCompositionPlaceFields","MCompositionPlaceStore","MCompositionShareFields","MCompositionShareStore","MCompositionStatusFields","MCompositionStatusStore","MCompositionWithFields","MCompositionWithStore","gkx"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){__p&&__p();a={isTextEligible:function(a){return a===null||a===""?!1:a.length<=150},isComposerEmpty:function(){__p&&__p();var a=l.get(k.PHOTO_INFO_LIST,null);a=a!==null&&a.length>0;var b=h.get(g.AUDIO_POST,null);b=b!==null;var c=r.get(q.TEXT,"");c=c.trim();c=c.replace(/\n{3,}/,"\n\n");c=c.replace(/\t+/," ");c=c!=="";var d=t.get(s.TOKENS);d=d!==null&&d.length>0;var e=n.get(m.ID)!==null,f=j.get(i.ACTION_TYPE_ID),u=j.get(i.OBJECT_ID);f=f!==null||u!==null;u=p.get(o.SHARE_URI)!==null;return!a&&!b&&!c&&!d&&!e&&!f&&!u?!0:!1},isStoryPostEligible:function(a){__p&&__p();var b=l.get(k.PHOTO_INFO_LIST,null),c=r.get(q.TEXT,"");c=c.trim();c=c.replace(/\n{3,}/,"\n\n");c=c.replace(/\t+/," ");var d=t.get(s.TOKENS),e=n.get(m.ID),f=j.get(i.ACTION_TYPE_ID),g=j.get(i.OBJECT_ID);d=d!==null&&d.length>0||e!==null||f!==null||g!==null;e=b!==null&&b.length>0&&(!d||d&&b[0].type==="photo");f=p.get(o.SHARE_URI)!==null;g=u("676786")&&f&&a&&!d;if(d&&c===""&&!e&&!f)return!1;return c!==""&&this.isTextEligible(c)&&!f||c===""&&e&&!f||c!==""&&this.isTextEligible(c)&&!e&&g||c===""&&!e&&g?!0:!1}};e.exports=a}),null);
__d("MGroupSellInterceptUtil",["escapeRegex"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a={parseInterceptedPrices:function(a,b){__p&&__p();var c=[];if(!b)return c;var d=new RegExp("\\d+","ig"),e=new RegExp(g(b)+"\\s*\\d+","ig");b=new RegExp("\\d+(?=\\s*"+g(b)+")","ig");e=a.match(e);e&&e.forEach(function(a){return c=c.concat(a.match(d))});e=a.match(b);e&&(c=c.concat(e));return c}};e.exports=a}),null);
__d("MStructuredComposerOGInput",["CSS","DOM","MAjaxify","MarauderLogger","MComposerLogger","MComposerNavigationMixin","MComposerOGStrings","MComposerWaterfallEvent","MCompositionMinutiaeFields","MCompositionMinutiaeStore","MCompositionUserActions","MRequest","MSubscriptionsHandlerMixin","MUnifiedTaggerConstants","MViewport","Stratcom","cx","mixin","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y){__p&&__p();var z,A=t.SHOW_UNIFIED_TAGGER,B=55;b=babelHelpers.inherits(a,x(l,s));z=b&&b.prototype;function a(a,b,c,d,e){"use strict";__p&&__p();z.constructor.call(this),this.$MStructuredComposerOGInput1=a,this.$MStructuredComposerOGInput2=!0,this.$MStructuredComposerOGInput3=!0,this.$MStructuredComposerOGInput4=null,this.$MStructuredComposerOGInput5=b,this.$MStructuredComposerOGInput6=c,this.$MStructuredComposerOGInput7=c.parentNode,this.$MStructuredComposerOGInput8=e,this.$MStructuredComposerOGInput9=h.find(this.$MStructuredComposerOGInput1,"input","og-action-input"),this.$MStructuredComposerOGInput10=h.find(this.$MStructuredComposerOGInput1,"input","og-object-input"),this.$MStructuredComposerOGInput11=h.find(this.$MStructuredComposerOGInput1,"input","og-phrase-input"),this.$MStructuredComposerOGInput12=h.find(this.$MStructuredComposerOGInput1,"input","og-icon-input"),this.$MStructuredComposerOGInput13=h.find(this.$MStructuredComposerOGInput1,"input","og-suggestion-mechanism"),this.$MStructuredComposerOGInput14=h.find(this.$MStructuredComposerOGInput1,"input","og-hide-attachment"),this.$MStructuredComposerOGInput15=!1,this.$MStructuredComposerOGInput16=null,this.$MStructuredComposerOGInput17=h.find(this.$MStructuredComposerOGInput1,"ul","og-tag"),this.$MStructuredComposerOGInput18=d,this.$MStructuredComposerOGInput8&&this.addSubscriptions(this.$MStructuredComposerOGInput18.listen("clear",function(){this.$MStructuredComposerOGInput8.clear(),this.$MStructuredComposerOGInput19()}.bind(this)),this.$MStructuredComposerOGInput8.addListener("clear",function(){return this.$MStructuredComposerOGInput19()}.bind(this))),this.addSubscriptions(this.$MStructuredComposerOGInput18.listen("submit",this.$MStructuredComposerOGInput20.bind(this)),p.addChangeListener(function(){return this.$MStructuredComposerOGInput21()}.bind(this)),this.$MStructuredComposerOGInput18.listen("iconChanged",function(a){__p&&__p();if(A)v.invoke("MComposer:tagger:update:og-icon",null,{icon:a.icon_src});else{var b=h.find(this.$MStructuredComposerOGInput17,"li","token");b=h.find(b,"i");h.replace(b,a.icon)}this.$MStructuredComposerOGInput12.value=a.custom_icon_id;this.$MStructuredComposerOGInput22();this.$MStructuredComposerOGInput8&&(this.$MStructuredComposerOGInput4["{icon}"]=h.create("i",{className:a.icon.className,style:a.icon.style}),this.$MStructuredComposerOGInput8.setValue(this.$MStructuredComposerOGInput4));v.invoke("MStructuredComposerOGInput-done",null,{icon_changed:!0});k.log(n.MINUTIAE_CHANGE_ICON,{action_type_id:a.action_type_id,query:a.query})}.bind(this)),this.$MStructuredComposerOGInput18.listen("cancel",function(){v.invoke("MStructuredComposerOGInput-done",null,{cancel:!0}),k.log(n.MINUTIAE_CANCEL),this.$MStructuredComposerOGInput22()}.bind(this)),this.$MStructuredComposerOGInput18.listen("cancelIconSelection",function(a){k.log(n.MINUTIAE_CHANGE_ICON_CANCEL,{action_type_id:a.action_type_id,query:a.query})})),this.addSubscriptions(v.listen("click","inline-og-button",function(){y(function(){this.$MStructuredComposerOGInput23()}.bind(this),10)}.bind(this))),A?this.addSubscriptions(v.listen("MComposer:tagger:click",t.TOKEN_TYPES.OBJECT,this.$MStructuredComposerOGInput24.bind(this)),v.listen("MComposer:tagger:click",t.TOKEN_TYPES.ICON,function(){return this.$MStructuredComposerOGInput25()}.bind(this))):this.addSubscriptions(h.listen(this.$MStructuredComposerOGInput1,"click","og-tags",this.$MStructuredComposerOGInput26.bind(this)),h.listen(this.$MStructuredComposerOGInput1,"click","remove-token",this.$MStructuredComposerOGInput27.bind(this))),this.addSubscriptions(v.listen("MComposer:open:activity",null,function(){this.$MStructuredComposerOGInput3=!1,this.$MStructuredComposerOGInput28()}.bind(this)),v.listen("click","og_included_place_checkin",this.$MStructuredComposerOGInput29.bind(this)),h.listen(this.$MStructuredComposerOGInput5,"click",null,this.$MStructuredComposerOGInput24.bind(this)),h.listen(this.$MStructuredComposerOGInput7,"click","close-composer-attachment",this.$MStructuredComposerOGInput30.bind(this)))}a.prototype.$MStructuredComposerOGInput19=function(){"use strict";this.reset(),this.$MStructuredComposerOGInput31(),v.invoke("MStructuredComposerOGInput-done",null,{remove:!0}),k.log(n.MINUTIAE_REMOVE)};a.prototype.$MStructuredComposerOGInput30=function(){"use strict";var a={};a[o.SHOW_ATTACHMENT]=!1;q.minutiaeSet(babelHelpers["extends"]({},p.getAll(),a))};a.prototype.$MStructuredComposerOGInput20=function(a){"use strict";var b={};for(var c in o){var d=o[c];b[d]=a[d]}q.minutiaeSet(b)};a.prototype.$MStructuredComposerOGInput21=function(){"use strict";__p&&__p();var a=h.find(this.$MStructuredComposerOGInput17,"li","token");this.$MStructuredComposerOGInput32();var b=p.get(o.ACTION_TYPE_ID);if(!b)return;var c=p.get(o.CUSTOM_ICON_ID),d=p.get(o.ICON_LEGACY),e=p.get(o.ICON),f=p.get(o.OBJECT_NAME),g=p.get(o.OBJECT_ID),i=!this.$MStructuredComposerOGInput15&&p.get(o.SHOW_ATTACHMENT),j=p.get(o.SUGGESTION_MECHANISM),l=p.get(o.USE_DEFAULT_ICON,!1),q=p.get(o.FBT_PHRASE);this.$MStructuredComposerOGInput16=p.get(o.TRIGGERS_EVENT_TAG_EXPANSION)?String(g):null;q||(q=m.getFBTPhrase(b,d,f,g));f&&!g?this.$MStructuredComposerOGInput11.value=f:(this.$MStructuredComposerOGInput11.value="",i?(this.$MStructuredComposerOGInput33(g,f),this.$MStructuredComposerOGInput14.value=!1):(this.$MStructuredComposerOGInput32(),this.$MStructuredComposerOGInput14.value=!0));if(A)v.invoke("MComposer:tagger:update",null,{ogActivity:{id:b,icon:e,object:f}});else{h.remove(a.firstChild);i={"max-width":u.getUseableWidth()-B+"px"};e=h.create("span",{className:"_52x0",style:i},q);h.prependContent(a,e)}this.$MStructuredComposerOGInput8&&(this.$MStructuredComposerOGInput4=q,this.$MStructuredComposerOGInput8.setValue(this.$MStructuredComposerOGInput4));this.$MStructuredComposerOGInput10.value=g;this.$MStructuredComposerOGInput9.value=b;this.$MStructuredComposerOGInput12.value=c;this.$MStructuredComposerOGInput18.hide();this.$MStructuredComposerOGInput34();this.$MStructuredComposerOGInput13.value=j;!g&&!l?(this.$MStructuredComposerOGInput8&&this.$MStructuredComposerOGInput8.hide(),this.$MStructuredComposerOGInput18.showIconSelector(b,g,f,d)):(this.$MStructuredComposerOGInput22(),v.invoke("MStructuredComposerOGInput-done",null,{add:!0}),k.log(n.MINUTIAE_ADD));v.invoke("MStructuredComposerOGInput:update")};a.prototype.$MStructuredComposerOGInput22=function(){"use strict";this.$MStructuredComposerOGInput3&&this.hasNavigationPolicy()?this.$MStructuredComposerOGInput31():(this.$MStructuredComposerOGInput29(),v.invoke("MComposer:close:activity","og-tagger"))};a.prototype.reset=function(){"use strict";this.$MStructuredComposerOGInput4=null,this.$MStructuredComposerOGInput9.value="",this.$MStructuredComposerOGInput10.value="",this.$MStructuredComposerOGInput11.value="",this.$MStructuredComposerOGInput12.value="",this.$MStructuredComposerOGInput14.value=!1,this.$MStructuredComposerOGInput15=!1,this.$MStructuredComposerOGInput16=null,A&&v.invoke("MComposer:tagger:update",null,{ogActivity:null}),this.$MStructuredComposerOGInput32(),this.$MStructuredComposerOGInput8&&this.$MStructuredComposerOGInput8.clear(),this.$MStructuredComposerOGInput34(),v.invoke("MStructuredComposerOGInput:update")};a.prototype.getEventIDForExpansion=function(){"use strict";return this.$MStructuredComposerOGInput16};a.prototype.setVisible=function(a){"use strict";this.$MStructuredComposerOGInput2=a,this.$MStructuredComposerOGInput34()};a.prototype.setDisableOgTagPreview=function(a){"use strict";this.$MStructuredComposerOGInput15=a};a.prototype.hasValue=function(){"use strict";return!!this.$MStructuredComposerOGInput9.value};a.prototype.getLoggingData=function(){"use strict";return this.$MStructuredComposerOGInput9.value?{action_type:this.$MStructuredComposerOGInput9.value,object:this.$MStructuredComposerOGInput10.value,object_str:this.$MStructuredComposerOGInput11.value}:null};a.prototype.$MStructuredComposerOGInput34=function(){"use strict";var a=!!this.$MStructuredComposerOGInput9.value;A||(a&&this.$MStructuredComposerOGInput2?h.show:h.hide)(this.$MStructuredComposerOGInput1);(this.$MStructuredComposerOGInput2?h.show:h.hide)(this.$MStructuredComposerOGInput5);g.conditionClass(this.$MStructuredComposerOGInput5,"active",a)};a.prototype.$MStructuredComposerOGInput33=function(a,b){"use strict";this.$MStructuredComposerOGInput32();h.show(this.$MStructuredComposerOGInput6);b="/platform/og/composer/attachment";b=new r(b).setData({object_id:a});i.ajaxify(null,null,b,null)};a.prototype.$MStructuredComposerOGInput32=function(){"use strict";h.replace(h.find(this.$MStructuredComposerOGInput7,"div","og-object-attachment"),this.$MStructuredComposerOGInput6),h.hide(this.$MStructuredComposerOGInput6)};a.prototype.$MStructuredComposerOGInput26=function(){"use strict";k.log(n.MINUTIAE_CHANGE_ICON_INTENT),this.$MStructuredComposerOGInput8&&this.$MStructuredComposerOGInput8.hide(),this.$MStructuredComposerOGInput25()};a.prototype.$MStructuredComposerOGInput24=function(){"use strict";k.log(n.MINUTIAE_INTENT),j.log("og_composer_icon_clicked"),this.$MStructuredComposerOGInput23()};a.prototype.$MStructuredComposerOGInput27=function(a){"use strict";a.kill(),this.reset(),q.minutiaeRemove(),v.invoke("MStructuredComposerOGInput-done",null,{remove:!0}),k.log(n.MINUTIAE_REMOVE)};a.prototype.$MStructuredComposerOGInput35=function(){"use strict";this.$MStructuredComposerOGInput3=!1,this.$MStructuredComposerOGInput18.cancel()};a.prototype.$MStructuredComposerOGInput29=function(){"use strict";this.$MStructuredComposerOGInput3||(this.$MStructuredComposerOGInput3=!0),this.$MStructuredComposerOGInput18.hide()};a.prototype.$MStructuredComposerOGInput28=function(){"use strict";this.$MStructuredComposerOGInput8&&this.$MStructuredComposerOGInput8.showIfHasValue(),this.$MStructuredComposerOGInput18.show()};a.prototype.$MStructuredComposerOGInput36=function(){"use strict";this.$MStructuredComposerOGInput8&&this.$MStructuredComposerOGInput8.hide(),k.log(n.MINUTIAE_CHANGE_ICON_INTENT),this.$MStructuredComposerOGInput18.showIconSelector(this.$MStructuredComposerOGInput9.value,this.$MStructuredComposerOGInput10.value,this.$MStructuredComposerOGInput11.value,this.$MStructuredComposerOGInput12.value)};a.prototype.$MStructuredComposerOGInput31=function(){"use strict";this.currentNavigationPolicy().addOnClose(function(){return this.$MStructuredComposerOGInput18.hide()}.bind(this)).close()};a.prototype.$MStructuredComposerOGInput37=function(){"use strict";this.currentNavigationPolicy().addOnClose(function(){return this.$MStructuredComposerOGInput35()}.bind(this)).close()};a.prototype.$MStructuredComposerOGInput23=function(){"use strict";this.newNavigationPolicy().addOnCloseByBrowser(function(){return this.$MStructuredComposerOGInput35()}.bind(this)).addOnOpen(function(){return this.$MStructuredComposerOGInput28()}.bind(this)).open()};a.prototype.$MStructuredComposerOGInput25=function(){"use strict";this.newNavigationPolicy().addOnCloseByBrowser(function(){return this.$MStructuredComposerOGInput35()}.bind(this)).addOnOpen(function(){return this.$MStructuredComposerOGInput36()}.bind(this)).open()};e.exports=a}),null);
__d("MStructuredComposerPhotoPreviewBootloader",["BootloadedComponent.react","DOM","JSResource","MComposerNavigationMixin","MLoadingSpinner.react","PhotosUploadWaterfallXMixin","PUWSteps","React","ReactDOM","cx","fbt","mixin","performanceNow"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){__p&&__p();var t;b=babelHelpers.inherits(a,r(l,j));t=b&&b.prototype;function a(a){"use strict";t.constructor.call(this),this.$MStructuredComposerPhotoPreviewBootloader1=a.root,this.$MStructuredComposerPhotoPreviewBootloader2=a.typeaheadConfig,this.$MStructuredComposerPhotoPreviewBootloader3=a.suggestions,this.$MStructuredComposerPhotoPreviewBootloader4=null,this.$MStructuredComposerPhotoPreviewBootloader5=null,this.$MStructuredComposerPhotoPreviewBootloader6=h.find(this.$MStructuredComposerPhotoPreviewBootloader1,"div","structured-composer-photo-preview-card")}a.prototype.$MStructuredComposerPhotoPreviewBootloader7=function(a,b){"use strict";var c=h.find(this.$MStructuredComposerPhotoPreviewBootloader1,"div","photo-preview-title");b&&Object.keys(b).length>0&&c?h.setContent(c,q._("Etiquetar foto")):c&&h.setContent(c,q._("Vista previa de la foto"));o.render(n.createElement(g,babelHelpers["extends"]({},this.props,{bootloadLoader:i("MStructuredComposerPhotoPreviewBootloadable.react").__setRef("MStructuredComposerPhotoPreviewBootloader"),bootloadPlaceholder:n.createElement("div",{className:"_4ldw"},n.createElement(k,null),q._("Cargando...")),imageSrc:a,initialFaceboxes:b,onTagAdd:this.$MStructuredComposerPhotoPreviewBootloader4,onTagDelete:this.$MStructuredComposerPhotoPreviewBootloader5,typeaheadConfig:this.$MStructuredComposerPhotoPreviewBootloader2,typeaheadSuggestions:this.$MStructuredComposerPhotoPreviewBootloader3})),this.$MStructuredComposerPhotoPreviewBootloader6);h.show(this.$MStructuredComposerPhotoPreviewBootloader1)};a.prototype.$MStructuredComposerPhotoPreviewBootloader8=function(){"use strict";h.hide(this.$MStructuredComposerPhotoPreviewBootloader1),o.unmountComponentAtNode(this.$MStructuredComposerPhotoPreviewBootloader6)};a.prototype.show=function(a,b){"use strict";if(this.hasNavigationPolicy())return;this.newNavigationPolicy().addOnOpen(function(){this.$MStructuredComposerPhotoPreviewBootloader7(a.previewURI,b),this.$MStructuredComposerPhotoPreviewBootloader9=s(),this.logStep(m.CLIENT_PHOTO_PREVIEW_OPEN,{})}.bind(this)).addOnClose(function(){h.hide(this.$MStructuredComposerPhotoPreviewBootloader1),this.logStep(m.CLIENT_PHOTO_PREVIEW_CLOSE,{elapsed_time:s()-this.$MStructuredComposerPhotoPreviewBootloader9})}.bind(this)).open()};a.prototype.setOnDeleteXYTag=function(a){"use strict";this.$MStructuredComposerPhotoPreviewBootloader5=a};a.prototype.setOnAddXYTag=function(a){"use strict";this.$MStructuredComposerPhotoPreviewBootloader4=a};a.prototype.hide=function(){"use strict";if(!this.hasNavigationPolicy())return;this.currentNavigationPolicy().close()};a.prototype.setWaterfall=function(a,b,c){"use strict";this.$MStructuredComposerPhotoPreviewBootloader10=a;this.$MStructuredComposerPhotoPreviewBootloader11=b;this.$MStructuredComposerPhotoPreviewBootloader12=c;return this};a.prototype.getWaterfallID=function(){"use strict";return this.$MStructuredComposerPhotoPreviewBootloader10};a.prototype.getWaterfallAppName=function(){"use strict";return this.$MStructuredComposerPhotoPreviewBootloader11};a.prototype.getWaterfallSource=function(){"use strict";return this.$MStructuredComposerPhotoPreviewBootloader12};e.exports=a}),null);
__d("MSlideshowPlayer.react",["DOM","MImageFetchNotifier","React","ReactDOM","ShimButton.react","SlideshowFrameImage.react","SlideshowImageUtil","Style","SubscriptionsHandler","cancelAnimationFrame","cx","requestAnimationFrame"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){"use strict";__p&&__p();a=i.PropTypes;var s=300,t=1.7143;b=i.createClass({displayName:"MSlideshowPlayer",_animationID:null,_timeout:null,_currIndex:0,_subscriptions:null,propTypes:{durationInMS:a.number.isRequired,transitionInMS:a.number.isRequired},getInitialState:function(){return{imagesAllLoaded:!1,playing:!1}},UNSAFE_componentWillMount:function(){var a=new o(),b=i.Children.count(this.props.children);i.Children.forEach(this.props.children,function(c){c=c.props.src;a.addSubscriptions(h.notifyWhenFetched(c,function(){b--,b===0&&this.setState({imagesAllLoaded:!0})}.bind(this)))}.bind(this));this._subscriptions=a},componentDidMount:function(){this._timeout=null},componentWillUnmount:function(){this._clearTimeout(),this._subscriptions&&this._subscriptions.release()},shouldComponentUpdate:function(a,b){return b.imagesAllLoaded!==this.state.imagesAllLoaded||b.playing!==this.state.playing},_clearTimeout:function(){this._timeout&&(clearTimeout(this._timeout),this._timeout=null),this._animationID&&(p(this._animationID),this._animationID=null)},_getItemCount:function(){return i.Children.count(this.props.children)},_moveNext:function(){this._currIndex++,this._currIndex>=this._getItemCount()?this._stopPlaying():this._fadeImage()},_setTimeout:function(){this._timeout=setTimeout(this._moveNext,this.props.durationInMS)},_fadeImage:function(){var a=j.findDOMNode(this.refs[this._currIndex-1]),b=0,c=function(d){b=b===0?d:b;d=Math.max(1-(d-b)/this.props.transitionInMS,0);n.set(a,"opacity",d);d===0?this._setTimeout():this._animationID=r(c)}.bind(this);this._animationID=r(c)},_resetImages:function(){this._currIndex=0;for(var a=0;a<this._getItemCount();a++)n.set(j.findDOMNode(this.refs[a]),"opacity",1)},_startPlaying:function(){if(this._timeout)return;this.setState({playing:!0},this._setTimeout)},_stopPlaying:function(){this._timeout&&(this.setState({playing:!1}),this._clearTimeout(),this._resetImages())},_getImageDimensions:function(a){if(this.refs[a]){a=g.find(j.findDOMNode(this.refs[a]),"img");return{width:a.naturalWidth,height:a.naturalHeight}}return{width:0,height:0}},_getCurrentImages:function(a,b,c){return i.Children.map(this.props.children,function(d,e){var f=this._getImageDimensions(e),g=c?m.getDefaultCroppingSpec(f):null;return i.createElement(l,{imageSrc:d.props.src,imageWidth:f.width,imageHeight:f.height,croppingSpec:g,maxWidth:a,maxHeight:b,ref:e,key:e})}.bind(this)).reverse()},render:function(){if(this._getItemCount()===0)return i.createElement("div",null);var a=i.Children.map(this.props.children,function(a,b){return this._getImageDimensions(b)}.bind(this)),b=m.shouldCropImages(a);a=b||!this.state.imagesAllLoaded?1:a[0].width/a[0].height;a=s/Math.max(a,t);return i.createElement("div",{className:"_1k7"},i.createElement("div",{className:"_1k8",style:{width:s,height:a}},this._getCurrentImages(s,a,b)),i.createElement("div",{className:"_1k9"+(this.state.playing||!this.state.imagesAllLoaded?" _1ka":"")},i.createElement(k,{className:"_1o0y",onClick:this._startPlaying})))}});e.exports=b}),null);
__d("MStructuredComposerSlideshowPreview",["CSS","DOM","Image.react","MComposerNavigationMixin","MComposerSlideshowLogger","MCompositionPhotoFields","MCompositionPhotoStore","MSlideshowPlayer.react","MSubscriptionsHandlerMixin","React","ReactDOM","SlideshowConstants","SlideshowCreationWaterfallEvent","Stratcom","mixin"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){__p&&__p();var v,w="cancel_slideshow_preview",x="show_slideshow_preview",y="submit_slideshow";b=babelHelpers.inherits(a,u(j,o));v=b&&b.prototype;function a(a,b){"use strict";v.constructor.call(this),this.$MStructuredComposerSlideshowPreview1=a,this.$MStructuredComposerSlideshowPreview2=b,this.$MStructuredComposerSlideshowPreview3=null,this.addSubscriptions(h.listen(this.$MStructuredComposerSlideshowPreview2,"click",x,this.$MStructuredComposerSlideshowPreview4.bind(this)),h.listen(this.$MStructuredComposerSlideshowPreview1,"click",w,this.$MStructuredComposerSlideshowPreview5.bind(this)),h.listen(this.$MStructuredComposerSlideshowPreview1,"click",y,this.$MStructuredComposerSlideshowPreview6.bind(this)))}a.prototype.$MStructuredComposerSlideshowPreview7=function(a){"use strict";var b=m.get(l.PHOTO_INFO_LIST,[]).map(function(a,b){return p.createElement(i,{src:a.previewURI,key:b})});return q.render(p.createElement(n,{durationInMS:r.photo_duration,transitionInMS:r.photo_transition_duration},b),a)};a.prototype.$MStructuredComposerSlideshowPreview4=function(){"use strict";this.newNavigationPolicy().addOnOpen(function(){this.$MStructuredComposerSlideshowPreview3=this.$MStructuredComposerSlideshowPreview7(h.find(this.$MStructuredComposerSlideshowPreview1,"div","slideshow_preview_placeholder")),g.show(this.$MStructuredComposerSlideshowPreview1),k.log(s.SLIDESHOW_PREVIEW_INTENT)}.bind(this)).addOnClose(function(){q.unmountComponentAtNode(h.find(this.$MStructuredComposerSlideshowPreview1,"div","slideshow_preview_placeholder")),g.hide(this.$MStructuredComposerSlideshowPreview1),k.log(s.SLIDESHOW_PREVIEW_CANCEL)}.bind(this)).addOnCloseByBrowser(function(){return g.hide(this.$MStructuredComposerSlideshowPreview1)}.bind(this)).open()};a.prototype.$MStructuredComposerSlideshowPreview5=function(){"use strict";if(!this.hasNavigationPolicy())return;this.currentNavigationPolicy().close()};a.prototype.$MStructuredComposerSlideshowPreview6=function(){"use strict";[h.find(this.$MStructuredComposerSlideshowPreview1,"button",y),h.find(this.$MStructuredComposerSlideshowPreview1,"button",w)].forEach(function(a){a.disabled=!0}),t.invoke("MStructuredComposerSlideshowPreview-submit")};a.prototype.setSubmitButtonText=function(a){"use strict";h.setContent(h.find(this.$MStructuredComposerSlideshowPreview1,"button",y),a)};e.exports=a}),null);
__d("XPhotosIncrementThumbnailPreviewNUXImpressionsController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/photos/tagging/increment_thumbnail_preview_nux_impressions/",{})}),null);
__d("XPrivacyRemindersImpressionLoggingController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/privacy/reminders/log_imp/",{type:{type:"String",required:!0}})}),null);
__d("MStructuredComposer",["ActorURI","BanzaiLogger","CSS","CurrentUser","DateTime","DOM","GroupSellLogger","LoadingIndicator","MAjaxify","MAjaxifyFormTypes","MarauderLogger","MComposerBackgroundUploadProgress","MComposerDataStoreKeys","MComposerDestinationPickerConfig","MComposerEligibility","MComposerEntry","MComposerLogger","MComposerLoggerPublishingListeners","MComposerNavigationConstants","MComposerNavigationMixin","MComposerPresence","MComposerSigils","MComposerSlideshowLogger","MComposerTypes","MComposerWaterfallEvent","MComposition","MCompositionConfigFields","MCompositionConfigStore","MCompositionFormatFields","MCompositionFormatID","MCompositionFormatStore","MCompositionMinutiaeFields","MCompositionMinutiaeStore","MCompositionPageRecommendationsFields","MCompositionPageRecommendationsStore","MCompositionPhotoFields","MCompositionPhotoStore","MCompositionPlaceFields","MCompositionPlaceStore","MCompositionPrivacyStore","MCompositionShareFields","MCompositionShareStore","MCompositionSlideshowFields","MCompositionSlideshowStore","MCompositionStatusFields","MCompositionStatusStore","MCompositionStoreID","MCompositionUserActions","MCompositionWithFields","MCompositionWithStore","MCompositionAudioStore","MCompositionAudioFields","MGroupSellInterceptUtil","MInputFocus","MJSEnvironment","MLegacyDataStore","MMultiPhotoUploaderAttachmentState","MMultiPhotoUploaderAttachmentType","MPrivacyComposerSelector","MRequest","MRequestTypes","MStoriesProductionTrayAsync","MStoriesToast","MStoriesUIConstants","MStructuredComposerOGInput","MStructuredComposerPhotoPreviewBootloader","MStructuredComposerSlideshowPreview","MTagSuggestionsController","MTouchClick","MViewport","PageRecommendationsMinChar","PrivacyConst","PrivacyRemindersLoggingTypes","SlideshowConstants","SlideshowCreationWaterfallEvent","Stratcom","Timezone","UnpublishedContentTypeJSConstants","URI","URLMatcher","UserAgent","Vector","WebGraphQLLegacyHelper","XAsyncRequest","XInlineComposerAudienceEducationController","XPhotosIncrementThumbnailPreviewNUXImpressionsController","XPrivacyRemindersImpressionLoggingController","XWebGraphQLMutationController","$","areEqual","createDeprecatedProperties","cx","fbt","ge","getActiveElement","getObjectValues","gkx","mixin","setTimeoutAcrossTransitions","uuid","whitelistObjectKeys","WildeLoader"],(function(a,b,c,d,e,f,aa,g,h,i,j,k,l,m,n,o,p,ba,q,r,ca,s,t,da,ea,fa,ga,ha,ia,u,v,ja,w,x,y,z,A,B,ka,C,D,E,F,G,H,la,I,J,ma,na,K,L,M,N,oa,pa,qa,O,ra,sa,ta,P,ua,va,wa,Q,xa,ya,za,Aa,Ba,Ca,Da,Ea,R,S,Fa,T,Ga,Ha,Ia,U,Ja,V,Ka,La,Ma,Na,Oa,Pa,Qa,Ra,Sa,Ta,W,Ua,Va,Wa,X,Y,Xa,Ya,Za,$a,ab,bb,cb){__p&&__p();var db,Z=b("WildeLoader").MWildeTimelinePublisherBar,eb=5,fb=6*3600*1e3,gb=100;f=babelHelpers.inherits(c,$a(fa));db=f&&f.prototype;function c(a,b,c,e,f,aa,g,i,j,l,m,n,o,p,ba,q,s,t){"use strict";__p&&__p();db.constructor.call(this);this._resetComposer=function(){__p&&__p();this._onComposerCancel=null;this._onComposerSubmit=null;this._isPageCheckin&&(this._isPageCheckin=!1,this._changeConfig(this._defaultConfig));this._submitted=!1;this._updateSubmitButtonState();k.hide(this._error_btn);this._hasMentions=!1;this._numMentions=0;this._friendsInputController.reset();this._ogTagger&&(this._ogInputController.reset(),U.invoke("composerReset"),this._ogTagger.hide());k.empty(this._xyTagsInput);this._photoAction&&(k.find(this._attachPhoto,"input","photo-input").value="",this._hasPhoto=!1,!this._getIsAlbumDisabled()?(this._removeAlbumAndPhoto(),this._albumPicker.hide()):(k.hide(this._attachPhoto),this._photoOpen=!1),h.conditionClass(this._photoButton,"active",!1),k.show(this._photoButton));this._slideshowToggle&&h.hide(this._slideshowToggle);this._slideshowNUX&&this._slideshowNUX.hasShown()&&(this._slideshowNUX.dismiss(),this._slideshowNUX=null);this._pageInfo&&k.hide(this._pageInfo);this._longReviewTips&&k.hide(this._longReviewTips);this._starsRatableInput&&k.hide(this._starsRatableInput);this._newcomerAudienceNux=null;this._audienceAlignmentFlyout=null;this._showStickyGuardrailFlyout=!1;this._photoButton&&k.show(this._photoButton);var a=this._getPrivacySelector();a&&a.isOpen()&&a.hideMenu();this._privacySelector&&k.show(this._privacySelector);this._updateTagExpansion();this._onlyMeFlyoutShown=!1;this._mentionsEnabled=!0;U.invoke("MComposer:tagger:clear");this._resetPosition();this._determineFormAction();U.invoke("MMentions:clearHiddenInput");U.invoke("MCustomPrivacy::removeListener");this._closeComposer();this._cleanupLogWritten();U.invoke("MMentions:enable");U.invoke("MStructuredComposer:reset");this._multiPhotoUploader&&this._multiPhotoUploader.resetState();N.finalize();this._bgUploadWaitForMediaListener&&(this._bgUploadWaitForMediaListener.remove(),this._bgUploadWaitForMediaListener=null)}.bind(this);this._composerHasContent=function(){if(ca.isComposerEmpty()){this._showError(X._("A\u00f1ade contenido a tu estado antes de publicarlo"));return!1}return!0}.bind(this);this._handleEditChange=function(){this._hasEditChanges=!0}.bind(this);d=n;this._ogClearablePreview=p;this._albumPicker=e;this._ogTagger=f;this._multiPhotoUploader=aa;this._pageInfo=g;this._createLabel=i;this._updateLabel=j;this._photosPreviewConfig=s;this._photoPreview=null;this._photosPreviewNux=t;this._numMentions=0;this._hasMentions=!!this._numMentions;this._defaultHideConfig={};this._targetType=l;this._entryPointRef=m;this._stayHiddenUntilOGTaggerCloses=!1;this._logWrittenListener=null;this._onComposerCancel=null;this._onComposerSubmit=null;this._root=a;this._isCreateAlbumDialogOpen=!1;this._mentionsEnabled=!0;this._albumID=W("album_fbid").value;c=W("attach_photo");o=x.get(w.DISABLE_ALBUM,this._defaultHideConfig[w.DISABLE_ALBUM]);!o&&(this._albumPicker||this._multiPhotoUploader)?h.conditionClass(c,"_6-k",!0):k.hide(c);this._mainPage=W("viewport");this._composer=k.find(this._root,"div","composer-main-view");this._composerTitle=k.find(this._composer,"div","composer-title");this._submitButtonNodes=k.scry(this._composer,"button","submit_composer");this._staticTemplates=W("static_templates");this._error_btn=k.find(this._composer,"div","m-status-empty-error");this._forsaleIntercept=k.scry(this._composer,"div","m-forsale-intercept")[0];this._forsaleIntercept&&(this._forsaleInterceptForsale=k.find(this._forsaleIntercept,"button","forsale_intercept_forsale"),this._forsaleInterceptNonForsale=k.find(this._forsaleIntercept,"button","forsale_intercept_nonforsale"),this._groupID=k.find(this._forsaleIntercept,"input","sell-composer-group-id").value);this._forsaleInterceptShown=!1;this._forsaleInterceptDeclinedTimestamp=0;this._form=k.find(this._composer,"form");this._starsRatableInput=k.find(this._form,"div","composer-stars-ratable-input");this._ratingTextContainer=k.scry(this._form,"div","composer-stars-rating-text")[0];this._xyTagsInput=k.find(this._form,"div","xy-tags-input");this._friendsInputController=new d(b,k.find(this._form,"div","with-tags"),k.find(this._form,"button","with-button"));this._multiPhotoUploader&&ba&&(this._tagSuggestionsController=new Ea(b,this._multiPhotoUploader,this._targetType,this._form.target.value,this._friendsInputController,q),this._photosPreviewConfig&&this._multiPhotoUploader.getUploader().setProps({onUploadStarted:this._initPhotoPreview.bind(this)}));this._slideshowToggle=k.scry(this._form,"div","slideshow-toggle")[0];this._slideshowToggleOptions=this._slideshowToggle?k.scry(this._slideshowToggle,"input","slideshow-option"):null;this._slideshowInput=k.scry(this._form,"input","slideshow-input")[0];this._slideshowNoticePhotoMin=k.scry(this._composer,"div","slideshow-photo-min-msg")[0];this._slideshowNoticePhotoMax=k.scry(this._composer,"div","slideshow-photo-max-msg")[0];this._contextualMessage=k.scry(this._form,"div","contextual_message")[0];n=k.scry(this._form,"div","js_placeholder");this._placeholder=n.length>0?n[0]:null;this._textarea=k.find(this._form,"textarea","composer-textarea");this._postTypeInput=k.scry(this._form,"input","unpublished_content_type_input")[0];this._defaultAction=this._form.action;f&&(this._ogInputController=new Ba(k.find(this._form,"div","og-tags"),k.find(this._form,"button","og-button"),k.find(this._form,"div","og-object-attachment"),f,this._ogClearablePreview));this._buttonbar=k.find(this._root,"div","composer-buttons");this._listeners=[];this._editChangesProducers=[ka,H,la,L,pa];this._postToStoryEnabled=r.default_select_stories;this._postToFeedEnabled=r.default_select_newsfeed;this._textFormatPresetId=null;this._isExternalLinkPreview=!1;this._waitForPollingTagSuggestions=!1;this._saveConfig();this._uploadButtons={audioButton:k.scry(this._form,"button","audio-button")[0],photoButton:k.scry(this._form,"button","photo-button")[0],videoButton:k.scry(this._form,"button","video-button")[0]}}c.prototype._getNavigationPolicy=function(a,b){"use strict";var c=this.newNavigationPolicy().addOnOpen(function(){return this._showComposer(a,b||{})}.bind(this)).addOnOpenChild(function(){return this._hideForInterstitial()}.bind(this)).addOnReturnFromChild(function(){h.conditionShow(this._composer,!this._stayHiddenUntilOGTaggerCloses),this._focusOnTextarea()}.bind(this)).addCloseByBrowserApprover(function(){return this._confirmClose()}.bind(this)).addOnCloseByBrowser(function(){return this._cancelComposer()}.bind(this));this._onComposerCancel&&c.addOnCloseByBrowser(this._onComposerCancel);return c};c.prototype._getDefaultCancelConfirmMessage=function(){"use strict";if(this._composerType===u.EDIT)return X._("\u00bfSeguro que quieres descartar los cambios?");else return X._("\u00bfSeguro que quieres rechazar esta publicaci\u00f3n?")};c.prototype._confirmClose=function(){"use strict";__p&&__p();this._composerType===u.RECOMMENDATION&&g.log("ReviewProductionLoggerConfig",{event:"composer_discard_dialog_shown",page_id:this._recommendationData.pageid,surface:this._getRecommendationSurface()});t.log(v.COMPOSER_CANCEL_INTENT);var b;this._composerType===u.EDIT?b=this._shouldEditStatus():this._composerType===u.GROUP_SELL?b=this._isValidForSalePost():b=this._shouldPostStatus();b=Ma.isBrowser("Mobile Safari 9")?!1:b;if(b){b=x.get(w.CANCEL_CONFIRMATION_MESSAGE)||this._getDefaultCancelConfirmMessage();if(!a.confirm(b)){this._composerType===u.RECOMMENDATION&&g.log("ReviewProductionLoggerConfig",{event:"composer_discard_dialog_cancel",page_id:this._recommendationData.pageid,surface:this._getRecommendationSurface()});return!1}this._composerType===u.RECOMMENDATION&&g.log("ReviewProductionLoggerConfig",{event:"composer_discard_dialog_confirm",page_id:this._recommendationData.pageid,surface:this._getRecommendationSurface()})}this._composerType===u.RECOMMENDATION&&g.log("ReviewProductionLoggerConfig",{event:"composer_cancel",page_id:this._recommendationData.page_id,surface:this._getRecommendationSurface()});return!0};c.prototype._navigateAwayFromComposerAndCancel=function(){"use strict";if(!this.hasNavigationPolicy())return;if(!this._confirmClose())return;var a=this.currentNavigationPolicy().addOnClose(function(){return this._cancelComposer()}.bind(this));this._onComposerCancel&&a.addOnClose(this._onComposerCancel);a.close()};c.prototype._navigateAwayFromComposer=function(a){"use strict";if(!this.hasNavigationPolicy())return;var b=this.currentNavigationPolicy().addOnClose(function(){return this._resetComposer()}.bind(this));b.setIsOnSubmit();this._onComposerSubmit&&b.addOnClose(this._onComposerSubmit.bind(null,a));b.close()};c.prototype._navigateToComposer=function(a,b){"use strict";if(s.blockNavigateToComposer())return;this._getNavigationPolicy(a,b).open()};c.prototype._navigateToComposerAndCheckin=function(){"use strict";if(s.blockNavigateToComposer())return;this._getNavigationPolicy(u.CHECKIN).addOnOpen(function(){k.hide(this._composer),this._startCheckin()}.bind(this)).addOnCloseByBrowser(function(){U.invoke("back","MComposer:dialog:place")}).open()};c.prototype._focusOnTextarea=function(){"use strict";this._skipFocus()||this._textarea.focus()};c.prototype._initializeComposition=function(a){"use strict";a[M.CONFIG]=babelHelpers["extends"]({},this._defaultConfig,a[M.CONFIG]),N.initialize(a)};c.prototype._setPlaceholder=function(a){"use strict";this._placeholder?(this._textarea.placeholder="",k.setContent(this._placeholder,a)):this._textarea.placeholder=a};c.prototype._showComposer=function(a,b){"use strict";__p&&__p();b.targetid&&(this._form.target.value=b.targetid);U.invoke("MPrivacyDeferredSelector::init");U.listen("MPrivacyDeferredSelector-loaded",null,function(){this._privacyDeferredSelectorHasLoaded=!0}.bind(this));var c=b[q.COMPOSITION]||{};Object.prototype.hasOwnProperty.call(c,M.CONFIG)||(c[M.CONFIG]=cb(b,Ya(w)));var d=this._getFormInput();this._wasLoadedWithAsyncPlaceholderComposer?this.copyPlaceholderComposerFormTextAndFocus(c):d.value&&d.value.length>0&&this._setCompositionDataStatusText(c,d.value);this._initializeComposition(c);U.invoke("MMentions:reset");this._composerType=x.get(w.COMPOSER_TYPE,a);if(b&&b.og_activity){d={};for(var e in B){c=B[e];d[c]=b.og_activity[c]}N.minutiaeSet(d)}this._logWrittenListener=k.listen(this._textarea,"keyup",null,function(){return this._logWritten()}.bind(this));c=x.get(w.PLACEHOLDER);c&&this._setPlaceholder(c);b=x.get(w.CONTEXTUAL_MESSAGE);this._syncSubmit=x.get(w.SYNC_SUBMIT);this._contextualMessage&&(this._contextualMessage.textContent=b||"",h.conditionShow(this._contextualMessage,!!b));if(this._ogTagger){p.log("og_composer_show_composer");if(!this._ogTaggerLoaded){d="/platform/og/composer/tagger";c=new Q(d).setData({entry_ref:this._entryPointRef}).setType(xa.DEPENDENT);c.listen("postprocess",function(){this._composerType===u.ACTIVITY&&this._ogTagger.toggleIncludedPlaceSelector(!0),p.log("og_composer_async_loaded")}.bind(this));n.ajaxify(null,null,c,null);this._ogTaggerLoaded=!0}}this._multiPhotoUploader&&a===u.PHOTO?this._showMultiPhotoUploader():this._ogTagger&&a===u.ACTIVITY&&this._ogTagger.toggleIncludedPlaceSelector(!0);this._composerType===u.EDIT&&this._observeEditChanges();k.hide(this._mainPage);k.show(this._composer);S.scrollTo(0,0);this._forsaleInterceptShown&&(k.hide(this._forsaleIntercept),this._forsaleInterceptShown=!1);U.invoke("MStructuredComposer-opened",null,{session_id:this._getSessionID(),composer_type:a,target_type:this._targetType,entry_point_ref:this._entryPointRef,opened_time:x.get(w.OPENED_AT)});t.log(v.COMPOSER_ENTRY,{composer_type:a,ref:this._entryPointRef,target_type:this._targetType});b=x.get(w.DISABLE_VOICE_SELECTOR);d=k.scry(this._form,"div","composer-actor-selector")[0];d&&(b?k.hide(d):k.show(d));c=J.get(I.LINK_NO_CHANGE);this._sharePreview&&this._shouldShowLinkPreview()&&this._composerType===u.EDIT&&c&&this._sharePreview.init();this._hasPageRecommendations()&&this._toggleSubmitButtonState(!1);this._backgroundUploadProgress=ba.init();this._backgroundUploadProgress&&(this._waitForPollingTagSuggestions=this._backgroundUploadProgress.isWaitingForTagSuggestions());return!0};c.prototype._setCompositionDataStatusText=function(a,b){"use strict";Object.prototype.hasOwnProperty.call(a,M.STATUS)||(a[M.STATUS]={}),a[M.STATUS][K.TEXT]=b};c.prototype._observeEditChanges=function(){"use strict";this._hasEditChanges=!1,this._editChangesProducers.forEach(function(a){this._listeners.push(a.once("change",this._handleEditChange,this))}.bind(this))};c.prototype._navigateToComposerAndOpenAudioRecorder=function(a){"use strict";if(s.blockNavigateToComposer())return;this._getNavigationPolicy(u.AUDIO,a).addOnOpen(function(){k.hide(this._composer),U.invoke("MComposer:open:audio")}.bind(this)).addOnClose(function(){U.invoke("MComposer:close:audio")}).open()};c.prototype._navigateToComposerAndOpenFriendTagger=function(a){"use strict";if(s.blockNavigateToComposer())return;this._getNavigationPolicy(u.TAG_FRIEND,a).addOnOpen(function(){k.hide(this._composer),U.invoke("MComposer:tagger:open")}.bind(this)).open()};c.prototype._navigateToComposerAndShowActivitySelector=function(a){"use strict";if(s.blockNavigateToComposer())return;this._getNavigationPolicy(u.ACTIVITY,a).addOnOpen(function(){k.hide(this._composer),U.invoke("MComposer:open:activity")}.bind(this)).open()};c.prototype._navigateToComposerAndShowFileDialog=function(a,b){"use strict";if(s.blockNavigateToComposer())return;this._getNavigationPolicy(u.PHOTO,a).addOnOpen(function(){ta.IS_ANDROID&&this._form.offsetHeight,R.click(W("photo_input"),b)}.bind(this)).open()};c.prototype._navigateToComposerAndFocus=function(a,b){"use strict";__p&&__p();if(s.blockNavigateToComposer())return;this._getNavigationPolicy(a,b).addOnOpen(function(){var a=ta.IS_APPLE_WEBKIT_IOS&&ta.OS_VERSION>=7;if(!this._skipFocus()&&a&&!this._audienceAlignmentFlyout&&!this._newcomerAudienceNux&&!this._showStickyGuardrailFlyout){this._textarea.focus();a=this._getStatusText().length;this._textarea.setSelectionRange(a,a)}}.bind(this)).open()};c.prototype._showPrivacyEducationOnComposerOpen=function(){"use strict";this._showStickyGuardrailFlyout?U.invoke("show_sticky_guardrail_flyout",null,{textarea:this._textarea}):this._newcomerAudienceNux?this._showNewcomerAudienceNux():this._audienceAlignmentFlyout&&this._showAudienceAlignmentTux()};c.prototype._showNewcomerAudienceNux=function(){"use strict";this._textarea.blur(),this._newcomerAudienceNux.registerComposer(this._composer),this._newcomerAudienceNux.handleVerticalPadding(),this._newcomerAudienceNux.registerPrivacySelector(this._privacySelector),this._newcomerAudienceNux.show(),this._addNewcomerAudienceNuxListeners()};c.prototype._showAudienceAlignmentTux=function(){"use strict";__p&&__p();if(this._inAudienceAlignmentPublicExp){if(!this._composerEligibleForInterstitial(T.PostParam.EVERYONE))return}else if(this._inAudienceAlignmentOnlyMeExp&&!this._composerEligibleForInterstitial(T.PostParam.ONLY_ME))return;U.invoke("MMentions:decorations:hide",null,{});S.scrollTo(0,0);this._textarea.blur();this._audienceAlignmentFlyout.registerComposer(this._composer);this._audienceAlignmentFlyout.registerPrivacySelector(this._privacySelector);this._audienceAlignmentFlyout.show();this._addAudienceAlignmentNuxListeners()};c.prototype._addNewcomerAudienceNuxListeners=function(){"use strict";this._listeners.push(U.listen("MNewcomerAudienceNux:public",null,function(){this.capturePublicPrivacyRow()}.bind(this)))};c.prototype._addAudienceAlignmentNuxListeners=function(){"use strict";this._listeners.push(U.listen("MPrivacyAudienceAlignment:friends",null,function(){var a=this._getSavedCustomHiddenInput();if(a){a=Qa.getURIBuilder().setString("new_post_param",T.PostParam.FRIENDS.toString()).setBool("update_icon",!0).getURI();new Q(a).send()}else this._friendsPrivacyRow=this._getPrivacyRow("value",T.PostParam.FRIENDS),U.invoke("MPrivacyComposerMenu:updatePrivacy",null,{row:this._friendsPrivacyRow})}.bind(this)))};c.prototype.setDefaultHideConfig=function(a){"use strict";this._defaultHideConfig=a};c.prototype._getSavedCustomHiddenInput=function(){"use strict";return Y(wa.getSavedCustomInputName(),this._root)};c.prototype._closePrivacy=function(){"use strict";var a=this._getPrivacySelector();a&&a.hideMenu()};c.prototype._openPrivacy=function(){"use strict";var a=this._getPrivacySelector();a&&a.showMenu()};c.prototype._removeAlbumAndPhoto=function(){"use strict";var a=Y("default-album");a&&R.click(a);this._multiPhotoUploader||k.hide(W("photo_display"));this._getIsAlbumDisabled()||k.hide(W("album-button"))};c.prototype._updateSubmitButtonState=function(){"use strict";__p&&__p();var a=!0;if(this._composerType===u.RECOMMENDATION){if(this._shortReviewsDisableDone){var b=P.get(this._longReviewTips).threshold,c=this._textarea.value.length,d=P.get(this._longReviewTips).force_length,e=P.get(this._longReviewTips).text_required;d&&(c!==0||e)&&c<b&&(a=!1)}if(this._starsRatableInput){d=k.find(this._starsRatableInput,"input","stars-ratable-input");(!d.value||d.value==="0")&&(a=!1)}}this._submitted&&(a=!1);if(this._photosUploading&&(!this._backgroundUploadProgress||r.composer_sharesheet_visible)){e=k.scry(this._composer,"button","submit_composer");e.forEach(function(a){k.setContent(a,X._("Procesando..."))});a=!1}else this._updatePostType(V.PUBLISHED,!1);!this._postToFeedEnabled&&!this._postToStoryEnabled&&(a=!1);A.get(y.FORMAT_ID)===z.SLIDESHOW&&!na.get(ma.IS_VALID)&&(a=!1);this._toggleSubmitButtonState(a)};c.prototype._writeRecommendation=function(a){"use strict";a=P.get(a);this.captureFriendsPrivacyRow.bind(this);this._changeConfig(a[q.COMPOSITION][M.CONFIG]);this._composerType=u.RECOMMENDATION;this._recommendationData=babelHelpers["extends"]({},a);s.invoke(new ja(a[q.COMPOSITION]))};c.prototype._changeSettingsAfterOpen=function(){"use strict";this._composerType===u.RECOMMENDATION&&this._setupRecommendationAfterOpen()};c.prototype._getRecommendationSurface=function(){"use strict";var a=x.get(w.LOGGING_SURFACE);return!a?"none":a};c.prototype._setupRecommendationAfterOpen=function(){"use strict";__p&&__p();var a=this._recommendationData;g.log("ReviewProductionLoggerConfig",{event:"composer_open",page_id:a.pageid,surface:this._getRecommendationSurface()});this._friendsInputController.setVisible(!1);k.show(this._starsRatableInput);this._pageInfo&&(a.pageinfo?(k.show(this._pageInfo),k.setContent(this._pageInfo,a.pageinfo)):k.hide(this._pageInfo));this._ratingTextContainer&&a.zeroratingtext&&(this._ratingTextContainer.textContent=a.zeroratingtext);this._reviewLength=-1;(this._longReviewTips&&this._longReviewTips.children.length||this._longReviewTips&&P.get(this._longReviewTips).text_required)&&(k.show(this._longReviewTips),this._updateLongReviewTipText());a.viewerrating=a.viewerrating||0;U.invoke("MPagesStarsRatableBase-setStars",null,{rating:a.viewerrating});this._starPicker&&!a.viewerrating&&(k.hide(this._starsRatableInput),this._starPicker.setTitle(a.starpickertitle));this._updateSubmitButtonState();this._hasStartedTyping=!1;this._listeners.push(U._listen("keyup","composer-textarea",function(b){this._hasStartedTyping||g.log("ReviewProductionLoggerConfig",{event:"review_composer_started_typing",page_id:a.pageid,surface:this._getRecommendationSurface()}),this._hasStartedTyping=!0}.bind(this)),U.listen("click","privacy-button",function(a){g.log("ReviewProductionLoggerConfig",{event:"review_composer_privacy_selector_click",page_id:this._recommendationData.pageid,surface:this._getRecommendationSurface()})}.bind(this)),U.listen("click","submit_composer",function(a){g.log("ReviewProductionLoggerConfig",{event:"composer_done_button_click",page_id:this._recommendationData.pageid,surface:this._getRecommendationSurface()})}.bind(this)));this.currentNavigationPolicy().addOnCloseByBrowser(function(b){g.log("ReviewProductionLoggerConfig",{event:"composer_cancel",page_id:a.page_id,surface:b})}.bind(this,this._getRecommendationSurface()))};c.prototype._updateLongReviewTipText=function(){"use strict";__p&&__p();if(this._longReviewTips&&this._longReviewTips.children.length){var a=this._textarea.value.length;if(this._reviewLength===a)return;this._reviewLength=a;var b=P.get(this._longReviewTips).threshold,c=P.get(this._longReviewTips).force_length;if(c){c=k.find(this._longReviewTips,"span","composer-review-length-count");var d=X._("{character_count}\/{minimum_length}",[X._param("character_count",a),X._param("minimum_length",b)]);b!==1&&k.setContent(c,d+" ");this._updateSubmitButtonState()}c=k.find(this._longReviewTips,"span","composer-short-review");h.conditionShow(c,(a>0||P.get(this._longReviewTips).text_required)&&a<b);d=k.find(this._longReviewTips,"span","composer-long-review");h.conditionShow(d,a>=b)}};c.prototype._resetAlbumSelection=function(){"use strict";this._getIsAlbumDisabled()||h.conditionClass(W("album-button"),"active",!1),this._privacySelector&&k.show(this._privacySelector),W("album_fbid").value="0",W("album_privacy").value="",this._albumChosen=!1,this._albumPicker.resetAlbumSelection()};c.prototype._resetPosition=function(){"use strict";if(this._showLoadingIndicator||this._backgroundUploadRunning)return;this.getScrollToElem()&&this.getShouldScroll()&&ab(function(){var a=Y(this.getScrollToElem());a&&S.scrollToNodeWithOffset(a,-5)}.bind(this),0)};c.prototype._shouldSubmit=function(){"use strict";return!w.DISABLE_SUBMIT_REQUEST?!0:!x.get(w.DISABLE_SUBMIT_REQUEST,!1)};c.prototype._shouldSyncSubmit=function(){"use strict";if(this._forceAsync||this._backgroundUploadRunning)return!1;return this._syncSubmit?!0:this._isPageCheckin||this._hasPhotos()||this._isUnpublishedPost};c.prototype._shouldShowLinkPreview=function(){"use strict";var a=x.get(w.DISABLE_LINK);return!a&&this._composerType!==u.SHARE&&(this._composerType===u.ACTIVITY||this._composerType===u.PHOTO||this._composerType===u.CHECKIN||this._composerType===u.STATUS||this._composerType===u.EDIT)&&!this._hasPhoto};c.prototype._shouldPostStatus=function(){"use strict";__p&&__p();if(!J.isEmpty())return!0;var a=k.convertFormToDictionary(this._form),b=$(a.status)!=="",c=$(a.message)!=="",d=$(a.recommendation)!=="";b=b||c||d;c=a.rating!=="0";d=this._friendsInputController.hasTokens();a=this._ogInputController&&this._ogInputController.hasValue();a=this._hasPhotos()||a;var e=!H.isEmpty()||this._isPageCheckin||this._pinPlace;return b||a||e||d||c?!0:!1};c.prototype._scheduledInFuture=function(){"use strict";var a=this._schedulePostAMPM.value=="PM"||this._schedulePostAMPM.value==1?12:0;a=new Date(this._schedulePostYear.value,this._schedulePostMonth.value-1,this._schedulePostDay.value,parseInt(this._schedulePostHour.value,10)+a,this._schedulePostMinute.value,0,0);a=j.fromDate(a,Ja.getEnvironmentTimezoneID());var b=j.localNow(),c=b.addMinutes(10);b=b.addMonths(6);return a>=c&&a<=b};c.prototype._shouldEditStatus=function(){"use strict";return this._hasEditChanges};c.prototype._cleanupForsaleIntercept=function(){"use strict";var a=k.scry(this._form,"input","composer_attachment_sell_currency")[0];a&&this._form.removeChild(a);a=k.scry(this._form,"input","composer_attachment_sell_price")[0];a&&this._form.removeChild(a);a=k.scry(this._form,"input","composer_attachment_sell_title")[0];a&&this._form.removeChild(a)};c.prototype._validateNonEmpty=function(a){"use strict";__p&&__p();if(this._composerType===u.GROUP_SELL)return this._isValidForSalePost();if(this._hasPageRecommendations())return this._isValidPageRecommendationPost(a);if(!this._shouldPostStatus()){a===""&&this._setStatusText("");this._showError(X._("A\u00f1ade contenido a tu estado antes de publicarlo"));return!1}return!0};c.prototype._isValidPageRecommendationPost=function(a){"use strict";var b=Fa.min_char;if(a.length<b){this._showError(X._("Las publicaciones deben tener {min character} caracteres como m\u00ednimo",[X._param("min character",b)]));return!1}return!0};c.prototype._isValidForSalePost=function(){"use strict";__p&&__p();if(this._composerType!==u.GROUP_SELL)return!0;var a=k.convertFormToDictionary(this._form),b=a.composer_attachment_sell_price,c=a.composer_attachment_sell_title,d=a.has_categories_enabled==="true",e=a.composer_attachment_sell_category,f=a.location_type==="inline";a=a.composer_attachment_sell_pickup_note;if($(c)===""){this._showError(X._("A\u00f1ade el t\u00edtulo del producto"));return!1}if($(c).length>gb){this._showError(X._("El t\u00edtulo no debe superar los 100 caracteres"));return!1}if($(b)===""){this._showError(X._("A\u00f1ade el precio del producto"));return!1}if(f&&a.length<5){this._showError(X._("Please enter a valid location to your product"));return!1}if(d&&$(e)===""){this._showError(X._("Please select a category for your product"));return!1}return!0};c.prototype._postForSale=function(){"use strict";__p&&__p();var a=$(this._getStatusText()),b=k.scry(this._forsaleIntercept,"input","sell-composer-currency-symbol")[0];if(!this._validateNonEmpty(a)||!b)return;a=ra.parseInterceptedPrices(a,b.value);if(a===null||a.length!==1)return;b=document.createElement("input");b.type="hidden";b.name="composer_attachment_sell_currency";b.setAttribute("data-sigil","composer_attachment_sell_currency");b.value=k.find(this._forsaleIntercept,"input","sell-composer-currency").value;this._form.appendChild(b);b=document.createElement("input");b.type="hidden";b.name="composer_attachment_sell_price";b.setAttribute("data-sigil","composer_attachment_sell_price");b.value=a[0];this._form.appendChild(b);a=document.createElement("input");a.type="hidden";a.name="composer_attachment_sell_title";a.setAttribute("data-sigil","composer_attachment_sell_title");a.value=$(this._getStatusText());this._form.appendChild(a);this._submitted=!0;this._updateSubmitButtonState();l.logComposerInterceptAccepted(this._groupID,1);this._callSubmit()};c.prototype._callSubmit=function(){"use strict";var a=this._multiPhotoUploader&&this._multiPhotoUploader.hasPhotos(this._backgroundUploadProgress);this._backgroundUploadProgress?(a&&this._multiPhotoUploader.logClientPost(),this._submitToBackground()):a?this._multiPhotoUploader.logClientPost(this._submit.bind(this)):this._submit()};c.prototype._showForsaleIntercept=function(a){"use strict";__p&&__p();if(!this._forsaleIntercept)return!1;if(this._forsaleInterceptShown){this._forsaleInterceptDeclinedTimestamp=Date.now();this._cleanupForsaleIntercept();l.logComposerInterceptDeclined(this._groupID,1);return!1}if(this._forsaleInterceptDeclinedTimestamp>0&&Date.now()-this._forsaleInterceptDeclinedTimestamp<fb)return!1;else this._forsaleInterceptDeclinedTimestamp=0;var b=k.scry(this._forsaleIntercept,"input","sell-composer-currency-symbol")[0];if(!b)return!1;a=ra.parseInterceptedPrices(a,b.value);if(a!==null&&a.length===1){k.show(this._forsaleIntercept);this._forsaleInterceptShown=!0;l.logComposerInterceptCreated(this._groupID,1);return!0}else{this._cleanupForsaleIntercept();return!1}};c.prototype._pickDestination=function(){"use strict";r.composer_sharesheet_visible?(this._postToStoryEnabled&&this._postToStory(),this._postToFeedEnabled?this._confirmClicked():window.location.reload()):this._confirmClicked()};c.prototype._confirmClicked=function(){"use strict";__p&&__p();var b=$(this._getStatusText());if(!this._validateNonEmpty(b))return;if(this._showForsaleIntercept(b))return;if(this._postTypeInput.value==V.SCHEDULED&&!this._scheduledInFuture()){this._showError(X._("Las publicaciones programadas se deben compartir transcurridos entre 10 minutos y 6 meses desde el momento en que se crean."));return}this._hasPageRecommendations()&&(this._addHiddenInput(this._form,"page_recommendation_type",this._getPageRecommendationType()),this._addHiddenInput(this._form,"page_recommendation_entrypoint",this._getPageRecommendationeEntryPoint()),this._addHiddenInput(this._form,"page_recommendation_surface",this._getPageRecommendationSurface()));this._tagSuggestionsController&&this._tagSuggestionsController.setBackgroundPolling(!0);this._mentionsEnabled||U.invoke("MComposerStatusTextarea:flush",null,{value:this._textarea.value,hasMentions:this._mentionsEnabled});if(!this._albumChosen){b=this._getPrivacySelector();if(b&&b.getSelectedValue()==T.PostParam.ONLY_ME){b=Sa.getURIBuilder().setString("type",Ga.ONLY_ME_IMPRESSION).getURI();n.ajaxify(null,null,new Q(b));var c=this._friendsInputController.hasTokens()||this._hasMentions;if(!c&&!window.confirm(X._("Solo t\u00fa podr\u00e1s ver esta publicaci\u00f3n. Haz clic en \"Cancelar\" para cambiar la audiencia."))){this._onlyMeFlyoutShown=!0;return}}else this._onlyMeFlyoutShown&&(b=Sa.getURIBuilder().setString("type",Ga.ONLY_ME_CONVERSION).getURI(),n.ajaxify(null,null,new Q(b)))}this._onlyMeFlyoutShown=!1;c=this._ogInputController&&this._ogInputController.getLoggingData();c&&p.log("og_composer_action_created",void 0,c);this._submitted=!0;this._updateSubmitButtonState();if(this._composerType===u.RECOMMENDATION&&(this._longReviewTips&&this._longReviewTips.children.length)){b=P.get(this._longReviewTips).threshold;c=this._textarea.value.length;var d=P.get(this._longReviewTips).force_length,e=P.get(this._longReviewTips).text_required;if(d&&(c!==0||e)&&c<b){if(this._shortReviewsDisableDone)return;d=X._("Tu opini\u00f3n debe tener {min_length} caracteres como m\u00ednimo. \u00bfQuieres enviar la calificaci\u00f3n con estrellas sin la opini\u00f3n?",[X._param("min_length",b)]);if(!a.confirm(d)){this._submitted=!1;this._updateSubmitButtonState();return}U.invoke("MComposerStatusTextarea:flush",null,{value:"",hasMentions:this._mentionsEnabled})}}t.log(v.COMPOSER_POST,{loaded_time:x.get(w.OPENED_AT),targetId:this._form.target.value||i.getID()});A.get(y.FORMAT_ID)===z.SLIDESHOW&&ia.log(Ia.SLIDESHOW_POST);this._callSubmit()};c.prototype._postToStory=function(){"use strict";__p&&__p();var a=$(this._getStatusText()),b=J.get(I.SHARE_URI)!==null;if(!this._hasPhotos()&&a===""&&!b){a="There must be photos uploaded to the composer or text in order to successfully post to stories.";throw a}b=Oa.getURI({controller:Ta,docID:"1931212663571278"});a=this._formPostToStoryDataObject();var c=ca.isStoryPostEligible(this._isExternalLinkPreview);if(c){c=new Pa().setURI(b).setMethod("POST").setData({variables:JSON.stringify({client_mutation_id:bb(),actor_id:this._form.target.value,input:a})}).setPayloadHandler(function(){ya.uploadCB(!0)}).setErrorHandler(function(a){za.showDefaultToast(Aa.UPLOAD_FAILED),ya.uploadCB(!1)});c.send()}};c.prototype._formPostToStoryDataObject=function(){"use strict";__p&&__p();var a={actor_id:this._form.target.value,client_mutation_id:bb(),source:"MOBILE",logging:{composer_session_id:this._getSessionID(),ref:"mcomposer"},camera_post_context:{deduplication_id:this._getSessionID(),source:"composer"},audiences:[{stories:{self:{target_id:this._form.target.value}}}]},b=$(this._getStatusText());b!==""&&ca.isTextEligible(b)&&(a.message={text:b});b=F.get(E.PHOTO_INFO_LIST,null);if(b!==null){var c=[],d=!1;b.forEach(function(a){a.type==="photo"?c.push({photo:{id:a.fbid}}):a.type==="video"&&(d=!0,c.push({video:{id:a.fbid,notify_when_processed:!0}}))});a.attachments=c;d&&(a.web_graphml_migration_params={is_also_posting_video_to_feed:this._postToFeedEnabled})}b=pa.get(oa.TOKENS);if(b!==null){var e=[];b.forEach(function(a){e.push(a.id)});a.with_tags_ids=e}b=H.get(G.ID);b!==null&&(a.explicit_place_id=b);if(this._ogInputController&&this._ogInputController.hasValue()){b={};var f=ka.get(B.ACTION_TYPE_ID);f&&(b.taggable_activity_id=f);f=ka.get(B.OBJECT_ID);f&&(b.object_id=f);a.inline_activities=[b]}this._textFormatPresetId&&(a.text_format_preset_id=this._textFormatPresetId);f=this._getLinkPreviewInformation();f&&(a.attachments===void 0?a.attachments=[{link:{share_scrape_data:JSON.stringify(f)}}]:a.attachments.push({link:{share_scrape_data:JSON.stringify(f)}}));return a};c.prototype._getLinkPreviewInformation=function(){"use strict";__p&&__p();var a=J.get(I.SHARE_URI)!==null;if(!Za("676786")||!a||!this._isExternalLinkPreview)return null;a={};var b=k.scry(this._form,"input","attachment[type]");a.share_type=b.length>0?b[0].value:null;b={};b.urlInfo={};var c=k.scry(this._form,"input","attachment[params][urlInfo][canonical]");b.urlInfo.canonical=c.length>0?c[0].value:null;c=k.scry(this._form,"input","attachment[params][urlInfo][final]");b.urlInfo["final"]=c.length>0?c[0].value:null;c=k.scry(this._form,"input","attachment[params][urlInfo][user]");b.urlInfo.user=c.length>0?c[0].value:null;c=k.scry(this._form,"input","attachment[params][locale]");b.locale=c.length>0?c[0].value:null;c=k.scry(this._form,"input","attachment[params][favicon]");b.favicon=c.length>0?c[0].value:null;c=k.scry(this._form,"input","attachment[params][lang]");b.lang=c.length>0?c[0].value:null;c=k.scry(this._form,"input","attachment[params][external_author_id]");b.external_author_id=c.length>0?c[0].value:null;c=k.scry(this._form,"input","attachment[params][title]");b.title=c.length>0?c[0].value:null;c=k.scry(this._form,"input","attachment[params][summary]");b.summary=c.length>0?c[0].value:null;c=k.scry(this._form,"input","attachment[params][medium]");b.medium=c.length>0?c[0].value:null;c=k.scry(this._form,"input","attachment[params][url]");b.url=c.length>0?c[0].value:null;c=k.scry(this._form,"input","attachment[params][global_share_id]");b.global_share_id=c.length>0?c[0].value:null;c=k.scry(this._form,"input","attachment[params][url_scrape_id]");b.url_scrape_id=c.length>0?c[0].value:null;c=k.scry(this._form,"input","attachment[params][hmac]");b.hmac=c.length>0?c[0].value:null;c=k.scry(this._form,"input","attachment[params][external_img]");b.external_img=c.length>0?c[0].value:null;a.share_params=b;a.shared_from_post_id=null;return a};c.prototype._toggleShareSelections=function(a){"use strict";this._postToFeedEnabled=a.getData().postToFeed,this._postToStoryEnabled=a.getData().postToStory,this._updateSubmitButtonState()};c.prototype._setTextFormatPresetId=function(a){"use strict";a&&a.presetID?this._textFormatPresetId=a.presetID:this._textFormatPresetId=null};c.prototype._showError=function(a){"use strict";k.show(this._error_btn),k.setContent(this._error_btn,a)};c.prototype._getAsyncContainer=function(){"use strict";return document.getElementById("structured_composer_async_container")||(this._clickedButton?this._clickedButton.parentNode:null)};c.prototype._getSessionID=function(){"use strict";return x.get(w.SESSION_ID,null)};c.prototype._getStatusText=function(){"use strict";return L.get(K.TEXT,"")};c.prototype._setStatusText=function(a){"use strict";var b={};b[K.TEXT]=a;N.statusUpdate(b)};c.prototype._addHiddenInput=function(a,b,c){"use strict";var d=document.createElement("input");d.type="hidden";d.name=b;d.value=c;a.appendChild(d)};c.prototype._hasPageRecommendations=function(){"use strict";return this._getPageID()!==""&&this._getPageRecommendationType()!==""};c.prototype._getPageID=function(){"use strict";return D.get(C.PAGE_ID,"")};c.prototype._getPageRecommendationType=function(){"use strict";return D.get(C.RECOMMENDATION_TYPE,"")};c.prototype._getPageRecommendationSurface=function(){"use strict";return D.get(C.SURFACE,"")};c.prototype._getPageRecommendationeEntryPoint=function(){"use strict";return D.get(C.ENTRY_POINT,"")};c.prototype._submitToBackground=function(){"use strict";this.cleanupSoftState(),this._closeComposer(),this._showLoadingIndicator=!1,this._setBackgroundUploadRunning(!0),this._multiPhotoUploader.hasPendingPhotos()?this._bgUploadWaitForMediaListener=U.listen("MMultiPhotoUploader:attachments:change",null,function(a){a=a.getData();a.sending===0&&(!this._waitForPollingTagSuggestions||a.polling===0)&&(U.removeCurrentListener(),setTimeout(function(){return this._submit()}.bind(this),0))}.bind(this)):this._submit()};c.prototype._submit=function(){"use strict";__p&&__p();if(!this._shouldSubmit()){this._submitNoRequest();return}this._tagSuggestionsController&&this._tagSuggestionsController.generateHiddenInput(this._xyTagsInput);U.invoke("MComposer:submit");if(this._shouldSyncSubmit()){this._submitSyncRequest();this._cleanupForsaleIntercept();return}this._submitAsyncRequest();this._cleanupForsaleIntercept()};c.prototype._getWithTagCount=function(){"use strict";var a=pa.get(oa.TOKENS);return a?a.length:0};c.prototype._getXYTagCount=function(){"use strict";return!this._tagSuggestionsController?0:this._tagSuggestionsController.getNumXYTags()};c.prototype._getTagsUser=function(){"use strict";return this._numMentions};c.prototype._scrollToTopOfFeedAfterNextTransition=function(){"use strict";if(!ea.USE_PUSH_STATE)return;U.listen("m:history:change",null,function(){setTimeout(function(){var a=Y("tlFeed");a&&S.scrollToNodeWithOffset(a,-50)},10),U.removeCurrentListener()})};c.prototype._submitAsyncRequest=function(){"use strict";__p&&__p();var a=k.convertFormToDictionary(this._form),b={};b.hasPhoto=this._hasPhotos();b.hasVideo=this._hasVideos();b.xy_tag_count=this._getXYTagCount();b.with_tag_count=this._getWithTagCount();b.tags_user=this._getTagsUser();b=[new da(this._getSessionID(),b)];this._backgroundUploadRunning||b.push({postprocess:function(){this.cleanupSoftState()}.bind(this)});this._showLoadingIndicator&&(b.push({response:function(){this._submittingScreen?k.hide(this._submittingScreen):m.hide(),this._navigateAwayFromComposer(a),this._showLoadingIndicator||this._resetPosition()}.bind(this)}),this._submittingScreen?k.show(this._submittingScreen):m.show(!0));this._backgroundUploadRunning||b.push({response:function(){return this._scrollToTopOfFeedAfterNextTransition()}.bind(this)});var c=k.scry(this._form,"input","background_upload")[0];c&&(c.value=this._backgroundUploadRunning?"1":"");this._backgroundUploadRunning&&b.push({error:function(){this._setBackgroundUploadRunning(!1,!0)}.bind(this),"finally":function(){ab(function(){this._setBackgroundUploadRunning(!1)}.bind(this),1e3),this._navigateAwayFromComposer(a)}.bind(this)});c=this._hasPhotos()?"media":"text";n.form(null,this._form,"async_composer",o.CACHE,this._getAsyncContainer(),!1,b,"composer_async_post_"+c,!0);this._staticTemplates.style.height="";if(this._submittingScreen||this._backgroundUploadRunning)return;this._navigateAwayFromComposer(a);this._showLoadingIndicator||this._resetPosition()};c.prototype._submitNoRequest=function(){"use strict";this._staticTemplates.style.height="",this._navigateAwayFromComposer(k.convertFormToDictionary(this._form))};c.prototype._submitSyncRequest=function(){"use strict";this._form.submit(),this._resetPosition()};c.prototype._setBackgroundUploadRunning=function(a,b){b===void 0&&(b=!1);this._backgroundUploadRunning=a;this.hasNavigationPolicy()&&this.currentNavigationPolicy().setBackgroundUploadRunning(a);if(b)this._backgroundUploadProgress.showErrorMsg();else{b=this._multiPhotoUploader.getMediaCount()>0;this._backgroundUploadProgress.setBackgroundUploadRunning(a,b)}};c.prototype._getIsAlbumDisabled=function(){"use strict";return!this._albumPicker||x.get(w.DISABLE_ALBUM,this._defaultHideConfig[w.DISABLE_ALBUM])};c.prototype._getIsSlideshowDisabled=function(){"use strict";return!this._slideshowToggle||x.get(w.DISABLE_SLIDESHOW,this._defaultHideConfig[w.DISABLE_SLIDESHOW])};c.prototype._updateButtonVisibility=function(a,b,c){"use strict";a=k.scry(this._form,"button",a)[0];if(a){b=!!x.get(b,this._defaultHideConfig[b]);h.conditionShow(a,c?!b:b)}};c.prototype._handlePhotoUpdate=function(){"use strict";var a=F.get(E.PHOTO_INFO_LIST,null);this._multiPhotoUploader&&a&&a.length>0?(this._uploadButtons.audioButton&&k.hide(this._uploadButtons.audioButton),this._multiPhotoUploader.getUploader().component.setAttachmentsSilent(a),this._showMultiPhotoUploader()):this._uploadButtons.audioButton&&k.show(this._uploadButtons.audioButton)};c.prototype._updateSlideshowUIState=function(){"use strict";var a=A.get(y.FORMAT_ID,null),b=na.get(ma.IS_VALID,!1),c=F.get(E.PHOTO_INFO_LIST,[]).length;this._slideshowInput&&(this._slideshowInput.value=!this._getIsSlideshowDisabled()&&b&&a===z.SLIDESHOW?"1":"0");this._slideshowNoticePhotoMax&&h.conditionShow(this._slideshowNoticePhotoMax,a===z.SLIDESHOW&&c>Ha.max_photo_num);this._slideshowNoticePhotoMin&&h.conditionShow(this._slideshowNoticePhotoMin,a===z.SLIDESHOW&&c<Ha.min_photo_num);this._getIsSlideshowDisabled()?this._slideshowToggle&&h.hide(this._slideshowToggle):c>=Ha.min_photo_num&&(this._slideshowToggle&&h.show(this._slideshowToggle),this._slideshowNUX&&this._slideshowNUX.showIfNotShown())};c.prototype._handleFormatUpdate=function(){"use strict";__p&&__p();var a=A.get(y.FORMAT_ID,null),b=A.get(y.PREVIOUS_FORMAT_ID,null);this._updateSlideshowUIState();this._updateSubmitButtonState();this._slideshowPreviewButton&&h.conditionShow(this._slideshowPreviewButton,a===z.SLIDESHOW);this._submitButtonNodes!==null&&this._submitButtonNodes.forEach(function(b){h.conditionShow(b,a!==z.SLIDESHOW)});this._slideshowToggleOptions!==null&&(this._slideshowToggleOptions.find(function(b){return b.value===(a||z.PHOTO)}).checked=!0);if(!a||a===b)return;F.get(E.PHOTO_INFO_LIST,[]).length;a===z.SLIDESHOW?ia.log(Ia.SLIDESHOW_INTENT):b===z.SLIDESHOW&&ia.log(Ia.SLIDESHOW_CANCEL)};c.prototype._handleSlideshowUpdate=function(){"use strict";this._updateSlideshowUIState()};c.prototype._handleSlideshowToggleUpdate=function(a){var b;if(this._getIsSlideshowDisabled())return;a=this._slideshowToggleOptions.find(function(a){return a.checked}).value;N.formatUpdate((b={},b[y.FORMAT_ID]=a,b))};c.prototype._handleConfigUpdate=function(){"use strict";__p&&__p();this._form.action=x.get(w.ACTION);this._composerTitle.textContent=x.get(w.COMPOSER_TITLE);if(this._photoAction){var a=x.get(w.ACTOR_ID);(this._canRemoveActorVC||a!==null&&a!==void 0)&&(this._photoAction=aa.create(this._photoAction,a).toString())}this._updateButtonVisibility("photo-button",w.DISABLE_PHOTOS,!0);this._updateButtonVisibility("with-button",w.DISABLE_PEOPLE_TAGS,!0);this._updateButtonVisibility("og-button",w.DISABLE_OG_TAG,!(this._ogTagger===void 0));this._updateButtonVisibility("privacy-button",w.DISABLE_PRIVACY,!0);this._updateButtonVisibility("post-type-button",w.SHOW_POST_TYPE_SELECTOR,!1);x.get(w.SHOW_POST_TYPE_SELECTOR)||(U.invoke("MStructuredComposerPostTypeInput::setPublishNow"),this._updatePostType(V.PUBLISHED,!1));this._updateHiddenForm("target",w.TARGET_ID);x.get(w.DISABLE_MENTIONS,!1)?(U.invoke("MMentions:disable"),this._mentionsEnabled=!1):(U.invoke("MMentions:enable"),this._mentionsEnabled=!0);a=this._ogInputController&&this._ogInputController.hasValue();a&&this._ogInputController.setDisableOgTagPreview(x.get(w.DISABLE_OG_TAG_PREVIEW,!1));a=x.get(w.PLACEHOLDER);a&&this._setPlaceholder(a);a=document.getElementById("composer_album_info");if(a){var b=x.get(w.DISABLE_ALBUM_INFO,this._defaultHideConfig[w.DISABLE_ALBUM_INFO]);b?(h.hide(a),W("album_fbid").value="0"):(h.show(a),W("album_fbid").value=this._albumID)}this._updateSlideshowUIState()};c.prototype._updateHiddenForm=function(a,b){"use strict";a=k.scry(this._form,"input",a)[0];a&&(a.value=x.get(b))};c.prototype._handleStatusUpdate=function(){"use strict";this._updateLongReviewTipText(),this._updateShareScraper(),this._handlePageRecommendationsMinChar()};c.prototype._handlePageRecommendationsMinChar=function(){"use strict";if(!this._hasPageRecommendations())return;var a=L.get(K.TEXT,""),b=a.length>=Fa.min_char;!b?this._contextualMessage.textContent=X._("{current length}\/{required length} \u00b7 Las publicaciones deben tener {required length} caracteres como m\u00ednimo",[X._param("current length",a.length),X._param("required length",Fa.min_char)]):this._contextualMessage.textContent=this._placeholder.textContent;h.show(this._contextualMessage);this._toggleSubmitButtonState(b)};c.prototype._logWritten=function(){"use strict";if(this._getStatusText().trim()<eb)return;t.log(v.COMPOSER_WRITTEN,{publish_target:this._form.target.value||i.getID(),loaded_time:x.get(w.OPENED_AT),written_time:Date.now()});this._cleanupLogWritten()};c.prototype._cleanupLogWritten=function(){"use strict";if(!this._logWrittenListener)return;this._logWrittenListener.remove();this._logWrittenListener=null};c.prototype._getFormInput=function(){"use strict";return k.scry(this._form,"input","mentionsHiddenInput")[0]||this._textarea};c.prototype._saveConfig=function(){"use strict";var a=this._getFormInput();this._defaultConfig={action:this._form.action,targetid:this._form.target.value,inputname:a.name,placeholder:this._placeholder?this._placeholder.textContent:this._textarea.placeholder,composertitle:this._composerTitle.textContent,pinplace:this._pinPlace,forceasync:this._forceAsync};this._defaultConfig[w.BUTTON_TEXT_SUBMIT]=this._submitButtonNodes[0].textContent};c.prototype._changeConfig=function(a){"use strict";__p&&__p();var b=this._getFormInput();this._form.action=a.action;this._form.target&&(this._form.target.value=a.targetid);this._setPlaceholder(a.placeholder);this._composerTitle.textContent=a.composertitle;this._pinPlace=a.pinplace;this._forceAsync=a.forceasync;b.name=a.inputname;this._showPostTypeSelectionFlow=a.showposttypeselector};c.prototype._extendComposerHeight=function(){"use strict";this._composer.style.display!=="none"&&(this._staticTemplates.style.height=a.innerHeight+"px")};c.prototype.setPrivacySelector=function(a){"use strict";this._privacySelector=a};c.prototype._getPrivacySelector=function(){"use strict";return this._privacySelector&&wa.getInstance(this._privacySelector)};c.prototype._updateShareScraper=function(){"use strict";__p&&__p();if(!this._shouldShowLinkPreview())return;if(J.get(I.LINK_NO_CHANGE))return;var a=La.permissiveMatch(this._getStatusText()),b=J.get(I.DISABLED_LINKS),c=J.get(I.SHARE_URI);if(a!==c&&(!b||!b[a])){if(this._multiPhotoUploader){b=this._multiPhotoUploader.getUploader().component.getAttachmentCount();if(b===0)this._multiPhotoUploader.resetState();else return}if(a&&c&&c.indexOf(a)!=-1||!a)return;setTimeout(function(){N.shareLinkUpdate(a),N.configDisablePhotosUpdate(!!a)},0)}};c.prototype._updatePostType=function(a,b){"use strict";__p&&__p();this._postTypeInput.value=a;var c=null;if(a===V.DRAFT)this._isUnpublishedPost=!0,c=X._("Guardar");else if(a===V.PUBLISHED){this._isUnpublishedPost=!1;var d=r.composer_sharesheet_visible?X._("Compartir"):X._("Publicar");c=b?X._("Asignar fecha anterior"):d}else a===V.SCHEDULED&&(this._isUnpublishedPost=!0,c=X._("Programar"));if(c){b=k.scry(this._composer,"button","submit_composer");b.forEach(function(a){k.setContent(a,c),this._slideshowPreviewController&&this._slideshowPreviewController.setSubmitButtonText(c)}.bind(this))}};c.prototype._updateSchedulePostTime=function(a){"use strict";this._schedulePostYear=k.find(this._form,"input","scheduled_post_year"),this._schedulePostMonth=k.find(this._form,"input","scheduled_post_month"),this._schedulePostDay=k.find(this._form,"input","scheduled_post_day"),this._schedulePostHour=k.find(this._form,"input","scheduled_post_hour"),this._schedulePostMinute=k.find(this._form,"input","scheduled_post_minute"),this._schedulePostAMPM=k.find(this._form,"input","scheduled_post_ampm"),this._schedulePostYear.value=a.year,this._schedulePostMonth.value=a.month,this._schedulePostDay.value=a.day,this._schedulePostHour.value=a.hour,this._schedulePostMinute.value=a.minute,this._schedulePostAMPM.value=a.ampm};c.prototype._updateBackdatedPostTime=function(a){"use strict";this._backdatedPostYear=k.find(this._form,"input","backdated_post_year"),this._backdatedPostMonth=k.find(this._form,"input","backdated_post_month"),this._backdatedPostDay=k.find(this._form,"input","backdated_post_day"),this._backdatedPostYear.value=a.year,this._backdatedPostMonth.value=a.month,this._backdatedPostDay.value=a.day};c.prototype.setPhotoAction=function(a){"use strict";a&&(this._attachPhoto=W("attach_photo"),this._photoButton=k.find(this._form,"button","photo-button"));this._photoAction=a;return this};c.prototype.setKeyboardStateDown=function(){"use strict"};c.prototype.setLongReviewTips=function(a){"use strict";this._longReviewTips=a};c.prototype.setShortReviewsDisableDone=function(a){"use strict";this._shortReviewsDisableDone=a};c.prototype.setSlideshowPreview=function(a){"use strict";this._slideshowPreview=a,this._slideshowPreviewButton=k.find(this._composer,"button","show_slideshow_preview"),this._slideshowPreviewController=new Da(this._slideshowPreview,this._slideshowPreviewButton)};c.prototype.setSlideshowNUX=function(a){"use strict";this._slideshowNUX=a};c.prototype._determineFormAction=function(){"use strict";this._hasPhotos()&&this._photoAction!==""?this._form.action=this._photoAction:this._form.action=x.get(w.ACTION)||this._defaultAction};c.prototype._determineMultiPhotoComposerState=function(){"use strict";if(!this._multiPhotoUploader)return;this._photoButton&&h.conditionClass(this._photoButton,"active",this._hasPhotos());if(!this._getIsAlbumDisabled()){var a=A.get(y.FORMAT_ID,null);h.conditionShow(W("album-button"),this._hasPhotos()&&a!==z.SLIDESHOW);!this._hasPhotos()&&this._albumChosen&&this._resetAlbumSelection()}};c.prototype._showMultiPhotoUploader=function(){"use strict";if(!this._multiPhotoUploader)return;this._determineMultiPhotoComposerState();this._multiPhotoUploader.alterPreviewGrid(!0);this._getIsSlideshowDisabled()||this._multiPhotoUploader.getUploader().setProps({showDropShadow:!1})};c.prototype._hasVideos=function(){"use strict";return!1};c.prototype._hasPhotos=function(){"use strict";if(this._multiPhotoUploader)return this._multiPhotoUploader.hasPhotos(!!this._backgroundUploadProgress);else if(!this._getIsAlbumDisabled())return this._hasPhoto;else return this._photoOpen&&this._hasPhoto};c.prototype._pagePostClicked=function(a){"use strict";if(!a)return;a=P.get(a);this._changeConfig(a);this._privacySelector&&k.hide(this._privacySelector)};c.prototype.start=function(){"use strict";__p&&__p();this._form.addEventListener("reset",function(){if(this._submittingScreen)return;this._resetComposer()}.bind(this));this._listeners.push(U.listen("MComposer:entry:js",null,function(a){var b=a.getData();this._onComposerCancel=b[q.ON_CANCEL];this._onComposerSubmit=b[q.ON_SUBMIT];b[q.ON_OPEN]===u.PHOTO?this._navigateToComposerAndShowFileDialog(b):b[q.ON_OPEN]===u.AUDIO?this._navigateToComposerAndOpenAudioRecorder(b,a):b[q.ON_OPEN]===u.CHECKIN?this._navigateToComposerAndCheckin(b,a):b[q.ON_OPEN]===u.ACTIVITY?this._navigateToComposerAndShowActivitySelector(b,a):b[q.ON_OPEN]===u.TAG_FRIEND?this._navigateToComposerAndOpenFriendTagger(b,a):this._navigateToComposerAndFocus(u.STATUS,b);this._changeSettingsAfterOpen();this._showPrivacyEducationOnComposerOpen()}.bind(this)));this._starsRatableInput&&(this._listeners.push(U.listen("MPagesStarsRatableBase-starsSet",null,this._updateSubmitButtonState.bind(this))),this._listeners.push(U.listen("MPagesStarsRatableBase-starTapped",null,function(a){g.log("ReviewProductionLoggerConfig",{event:"composer_star_click",page_id:this._recommendationData.pageid,star_clicked:a.getData().rating,surface:this._getRecommendationSurface()})}.bind(this))));this._listen("click",ha.ENTRY_TRIGGER_LEGACY,function(a){if(Z&&Z.listenersRegistered())return;a=a.getNode(ha.ENTRY_TRIGGER_LEGACY);var b=P.get(a);b&&b.og_activity&&!b.og_activity.fbt_phrase&&(b.og_activity.fbt_phrase=this._ogTagger._getTagPhrase(b.og_activity.action_type,b.og_activity.icon,b.og_activity.object_str,b.og_activity.object_id,b.og_activity.location_str));this._navigateToComposerAndFocus(u.STATUS,b);this._showPrivacyEducationOnComposerOpen();this._clickedButton=a}.bind(this));if(Ma.isBrowser("Mobile Safari < 8")){var a=!0;this._listen("click","cancel_composer",function(b){a?(a=!1,setTimeout(function(){R.click(b.getTarget(),b)},0)):(a=!0,this._navigateAwayFromComposerAndCancel())}.bind(this))}else this._listen("click","cancel_composer",this._navigateAwayFromComposerAndCancel.bind(this));this._listen("click","submit_composer",this._pickDestination.bind(this));this._listen("click","forsale_intercept_nonforsale",this._confirmClicked.bind(this));this._listen("click","forsale_intercept_forsale",this._postForSale.bind(this));this._listen("m:viewport:scroll-to-header",null,this._extendComposerHeight.bind(this));this._listen("click","checkin_link",function(a){if(Z&&Z.listenersRegistered())return;this._clickedButton=a.getNode("checkin_link");this._navigateToComposerAndCheckin();a.prevent()}.bind(this));this._listeners.push(U.listen("MComposer:close:activity",null,function(){this._stayHiddenUntilOGTaggerCloses=!1,k.show(this._composer)}.bind(this)),U.listen("cancel","MComposer:dialog:place",function(){return this._navigateAwayFromComposerAndCancel()}.bind(this)),U.listen("close","MComposer:dialog:place",function(){k.show(this._composer)}.bind(this)));this._listeners.push(U.listen("MComposer:post:backdate",null,function(a){this._isBackdated=k.find(this._form,"input","is_backdated"),this._isBackdated.value=a.getData().value}.bind(this)));this._listeners.push(U.listen("MComposer:post:draft",null,function(a){a=a.getData();this._updatePostType(a.type,a.isBackdated)}.bind(this)));this._listeners.push(U.listen("MComposer:post:scheduled:time",null,function(a){a=a.getData();this._updateSchedulePostTime(a)}.bind(this)));this._listeners.push(U.listen("MComposer:post:backdated:time",null,function(a){a=a.getData();this._updateBackdatedPostTime(a)}.bind(this)));this._ogTagger&&(this._listen("click","activity_link",this._navigateToComposerAndShowActivitySelector.bind(this)),this._listen("click","og_included_place_checkin",function(a){this._ogTagger.hide(),this._startCheckin()}.bind(this)),this._listeners.push(this._ogTagger.listen("cancelFromActivity",this._navigateAwayFromComposerAndCancel.bind(this))));this._listeners.push(x.addListener("change",function(){return this._handleConfigUpdate()}.bind(this)));this._listeners.push(F.addListener("change",function(){return this._handlePhotoUpdate()}.bind(this)));this._listeners.push(qa.addListener("change",function(){var a=qa.get(O.AUDIO_POST,null);for(var b in this._uploadButtons){var c=this._uploadButtons[b];c&&(a==null?k.show(c):k.hide(c))}}.bind(this)));this._listeners.push(L.addChangeListener(function(){return this._handleStatusUpdate()}.bind(this)));this._listeners.push(A.addChangeListener(function(){return this._handleFormatUpdate()}.bind(this)));this._listeners.push(na.addChangeListener(function(){return this._handleSlideshowUpdate()}.bind(this)));this._slideshowPreviewController&&(this._listen("change","slideshow-option",this._handleSlideshowToggleUpdate.bind(this)),this._listen("MStructuredComposerSlideshowPreview-submit",null,this._confirmClicked.bind(this)));this._listen("click","write_post_posts_by_others",function(a){this._pagePostClicked(a.getNode("write_post_posts_by_others")),a.prevent()}.bind(this));this._listen("composerPhotoLinkPostsByOthers",null,function(a){this._pagePostClicked(a.getData()),a.prevent()}.bind(this));this._listen("click","write_post_admin",function(a){this._pagePostClicked(a.getNode("write_post_admin")),a.prevent()}.bind(this));this._listen("click","page_checkin",function(a){var b=P.get(a.getNode("page_checkin"));this._isPageCheckin=!0;b[q.COMPOSITION]||(b[q.COMPOSITION]=new ja().setStoreData(M.CONFIG,cb(b,Ya(w))).setStoreData(M.PLACE,{id:b.pageid,name:b.pagename,new_place:!1}).serialize());this._photoAction&&(this._photoAction=new Ka(this._photoAction).addQueryData("target",b.targetid).toString());this._navigateToComposer(u.CHECKIN,b);this._ogTagger&&this._ogTagger.setPlaceID(b.pageid);a.prevent()}.bind(this));this._listeners.push(U.listen("MComposer-write-recommendation",null,function(a){this._writeRecommendation(a.getData().element)}.bind(this)));this._listen("click","write-recommendation",function(a){this._writeRecommendation(a.getNode("write-recommendation")),a.prevent()}.bind(this));this._listen("MStructuredComposerFriendsInput-done",null,function(){return this._updateTagExpansion()}.bind(this));this._listen("MStructuredComposerFriendsInput-addedAutoTags",null,function(){return this._updateTagExpansion()}.bind(this));this._listen("MStructuredComposerFriendsInput-addedManualXYTags",null,function(){return this._updateTagExpansion()}.bind(this));this._listen("MStructuredComposerFriendsInput-removedManualTags",null,function(){return this._updateTagExpansion()}.bind(this));this._listen("MStructuredComposerOGInput:update",null,function(){return this._updateTagExpansion()}.bind(this));this._listen("MMentions:change",null,function(a){a=a.getData();if(a.input!==this._textarea)return;this._hasMentions=a.hasTags;this._numMentions=a.numTags?a.numTags:0;this._updateTagExpansion()}.bind(this));this._listeners.push(H.addChangeListener(function(){if(H.isEmpty())return;if(this._ogTagger){var a=H.get(G.SUGGESTED_OG_ACTION_TYPE_ID,null),b=H.get(G.ID),c=H.get(G.SUGGESTION_MECHANISM);this._ogTagger.setPlaceID(b);a&&!this._ogInputController.hasValue()&&(this._ogTagger.setCancelButtonText(X._("Omitir")),this._ogTagger.selectActionTypeImplicitly(a)&&(k.hide(this._composer),this._stayHiddenUntilOGTaggerCloses=!0,this._ogTagger.setSuggestionMechanism(c),p.log("og_composer_implicit_verb_selected",void 0,{place_id:b,suggestion_mechanism:c}),U.invoke("MComposer:open:activity")))}}.bind(this)));this._listen("MAlbumPicker:createalbum:open",null,function(a){this._isCreateAlbumDialogOpen=!0}.bind(this));this._listen("MAlbumPicker:createalbum:close",null,function(a){this._isCreateAlbumDialogOpen=!1}.bind(this));this._listen("keydown","tokenizer-input",function(a){if(a.getNode("structured-composer")&&this.getShouldScroll()){a=a.getNode("tokenizer-input");a=Na.getPos(a).y;S.scrollTo(0,a)}}.bind(this));this._listen("blur","tokenizer-input",function(a){a.getNode("structured-composer")&&this.getShouldScroll()&&S.scrollToHeader()}.bind(this));this._listen("keyup","composer-textarea",this._updateLongReviewTipText.bind(this));this._listeners.push(L.addChangeListener(function(){return this._handleStatusUpdate()}.bind(this)));this._listen("click","photo_link",function(a){if(Z&&Z.listenersRegistered())return;var b=a.getNode("photo_link"),c=P.get(b);this.getShouldScroll()&&S.scrollToHeader();this._multiPhotoUploader?(this._getIsAlbumDisabled()||k.show(W("album-button")),this._navigateToComposerAndShowFileDialog(c,a)):(!this._getIsAlbumDisabled()?(this._navigateToComposerAndShowFileDialog(c,a),a.prevent()):(this._navigateToComposer(u.PHOTO,c),this._photoOpen=!0,k.show(this._attachPhoto),h.conditionClass(this._photoButton,"active",!0)),this._clickedButton=b,a.kill(),U.invoke("composerPhotoLink"),U.invoke("composerPhotoLinkPostsByOthers",null,a.getNode("write_post_posts_by_others")))}.bind(this));this._listen("click","add-photo-thumbnail",function(a){t.log(v.MEDIA_INTENT),R.click(W("photo_input"),a),a.prevent()});this._listen("click","photo-button",function(a){t.log(v.MEDIA_INTENT),this._multiPhotoUploader?(this._closePrivacy(),R.click(W("photo_input"),a),this._determineFormAction(),this._showMultiPhotoUploader()):!this._getIsAlbumDisabled()?(R.click(W("photo_input"),a),a.prevent()):(this._closePrivacy(),this._photoOpen?k.hide(this._attachPhoto):k.show(this._attachPhoto),this._photoOpen=!this._photoOpen,h.conditionClass(this._photoButton,"active",this._photoOpen))}.bind(this));this._listen("click","video-button",function(a){t.log(v.MEDIA_INTENT),this._multiPhotoUploader&&(this._closePrivacy(),R.click(W("video_input"),a),this._determineFormAction(),this._showMultiPhotoUploader())}.bind(this));this._getIsAlbumDisabled()||(this._listeners.push(this._albumPicker.listen("cancel",function(a){t.log(v.ALBUM_CANCEL),this._restoreComposer()}.bind(this))),this._listeners.push(this._albumPicker.listen("choose-album",function(a){a.is_mobile_uploads_album?this._resetAlbumSelection():(U.invoke("MStructuredComposer-selectAlbum"),t.log(v.ALBUM_ADD),W("album_fbid").value=a.album_id,W("album_privacy").value=a.privacy_id,this._albumChosen=!0,this._closePrivacy(),this._privacySelector&&k.hide(this._privacySelector)),k.show(this._composer)}.bind(this))),this._listen("click","album-button",function(a){t.log(v.ALBUM_INTENT),this._albumPicker.show(),k.hide(this._composer)}.bind(this)));this._listen("MMultiPhotoUploader:attachments:add",null,function(a){x.isEmpty()||t.log(v.PHOTO_ADD,a.getData())});this._listen("MMultiPhotoUploader:attachments:remove",null,function(a){x.isEmpty()||t.log(v.PHOTO_REMOVE,a.getData())});this._listen("change","photo-input",function(a){var b;a=W("photo_input");a.value!==""&&this._photoAction!==""?(this._multiPhotoUploader||(b={photo_count:1},U.invoke("MStructuredComposer-addedPhoto",null,b)),a.name="file1",this._hasPhoto=!0,this._determineFormAction(),this._photoButton&&h.conditionClass(this._photoButton,"active",!0),this._getIsAlbumDisabled()||(this._multiPhotoUploader||k.show(W("photo_display")),k.show(W("album-button")))):(this._hasPhoto=!1,this._determineFormAction(),h.conditionClass(this._photoButton,"active",!1),this._multiPhotoUploader||(b={photo_count:0},U.invoke("MStructuredComposer-addedPhoto",null,b)),!this._getIsAlbumDisabled()&&!this._multiPhotoUploader&&this._removeAlbumAndPhoto())}.bind(this));this._listen("multi-photos-attachment-change",null,function(a){__p&&__p();a=a.getData();if(this._multiPhotoUploader.getUploader().component!==a.multiPhotoUploader)return;a=a.attachments;var b=qa.get(O.AUDIO_POST,null);if(b){b={};b[O.AUDIO_POST]=a[0];N.audioUpdate(b);return}if(a.length>0&&a[0].type===va.AUDIO){b={};b[O.AUDIO_POST]=a[0];N.audioUpdate(b);return}b=F.get(E.PHOTO_INFO_LIST,[]);if(!Ua(a,b)){b={};b[E.PHOTO_INFO_LIST]=a;N.photoUpdate(b)}}.bind(this));this._listen("multi-photos-change",null,function(a){if(a.getData().input_id!="photo_input")return;a=this._multiPhotoUploader.getUploadedMediaCount();var b={photo_count:a,is_multi_photo_upload:!0};U.invoke("MStructuredComposer-addedPhoto",null,b);this._photosPreviewNux&&(a>0?(this._multiPhotoUploader.getUploader().setProps({showDropShadow:!1}),k.show(this._photosPreviewNux)):(this._multiPhotoUploader.getUploader().setProps({showDropShadow:!0}),k.hide(this._photosPreviewNux)));this._determineFormAction();this._determineMultiPhotoComposerState()}.bind(this));this._listen("click","composer-buttons",function(a){this._textarea.blur()}.bind(this));this._listen("focus","composer-textarea",function(a){this.getShouldScroll()&&(this._getStatusText()===""&&sa.scrollTo(this._textarea,S.getHeaderTop()))}.bind(this));this._listen("click","composer-textarea",function(a){this._closePrivacy(),this.getShouldScroll()&&(this._getStatusText()===""&&sa.scrollTo(this._textarea,S.getHeaderTop()))}.bind(this));this._listen(["m:page:loading"],null,this.cleanup.bind(this));this._listen("audience-x-opened",null,function(a){k.hide(this._composer)}.bind(this));this._listen("MMultiPhotoUploader:attachments:change",null,function(a){a=a.getData();this._photosUploading=a.sending+a.polling!==0;this._updateSubmitButtonState()}.bind(this));this._listen("MWebActivityUploader:received:share",null,this._navigateToComposer.bind(this,u.PHOTO));this._listen("cancel","MComposer:audio",function(){return this._navigateAwayFromComposerAndCancel()}.bind(this));this._listen("next","MComposer:audio",function(){k.show(this._composer)}.bind(this));(this._photoPreview||this._photosPreviewConfig)&&this._listen("click","structured-composer-photo-preview-done",this._hidePhotoPreviews.bind(this));U.invoke("MStructuredComposer:start");r.composer_sharesheet_visible&&(U.listen("composer:destination-picker:toggle",null,function(a){return this._toggleShareSelections(a)}.bind(this)),U.listen("click","display_destination_picker",this._composerHasContent),U.listen("MStructuredComposerSATP:changed",null,function(a){return this._setTextFormatPresetId(a.getData())}.bind(this)),U.listen("composer:destination-picker:link-preview-changed",null,function(a){return this._isExternalLinkPreview=!a.getData().isPreviewValid}.bind(this)));ga.register(this);return this};c.prototype._cancelComposer=function(){"use strict";this._staticTemplates.style.height="",U.invoke("MStructuredComposer-canceled",null),t.log(v.COMPOSER_CANCEL,{maximum_character_count:L.get(K.LONGEST_LENGTH),loaded_time:x.get(w.OPENED_AT),publish_target:this._form.target.value||i.getID()||-1,remaining_character_count:this._getStatusText().length}),this._hasPhotos(),this._resetComposer()};c.prototype.cleanup=function(){"use strict";U.invoke("MStructuredComposer:cleanup");U.invoke("MCustomPrivacy::removeListener");this._closeComposer();this._form.removeEventListener("reset",this._resetComposer,!1);for(var a=0;a<this._listeners.length;a++)this._listeners[a].remove();this._listeners=[];ga.unregister(this)};c.prototype._listen=function(a,b,c){"use strict";this._listeners.push(U.listen(a,b,c))};c.prototype._isAudience=function(a){"use strict";__p&&__p();var b=k.scry(this._buttonbar,"table","privacy-table")[0];if(!b){var c=this._getSavedCustomHiddenInput();return c?c.value==a:!1}c=k.scry(b,"tr","privacy-option checked")[0];if(!c)return!1;b=P.get(c);return b.value==a};c.prototype.setInAudienceAlignmentExp=function(a){"use strict";this._inAudienceAlignmentPublicExp=a};c.prototype.setInAudienceAlignmentOnlyMeExp=function(a){"use strict";this._inAudienceAlignmentOnlyMeExp=a};c.prototype.setAudienceAlignmentFlyout=function(a){"use strict";this._audienceAlignmentFlyout=a};c.prototype._composerEligibleForInterstitial=function(a){"use strict";__p&&__p();var b=this._form.target.value;if(b&&b!=i.getID())return!1;if(this._composerType!==u.STATUS)return!1;if(!this._isAudience(a))return!1;if(S.getScreenHeight()<340&&ta.IS_ANDROID){this._audienceAlignmentFlyout.deviceTooShort();return!1}return!0};c.prototype.setNewcomerAudienceNux=function(a){"use strict";this._newcomerAudienceNux=a};c.prototype.setStickyGuardrailFlyout=function(a){"use strict";this._showStickyGuardrailFlyout=a};c.prototype.setSharePreview=function(a){"use strict";this._sharePreview=a};c.prototype.setShowLoadingIndicator=function(a){"use strict";this._showLoadingIndicator=a};c.prototype.setCanRemoveActorVc=function(a){"use strict";this._canRemoveActorVC=a};c.prototype.setWasAsyncLoadedWithPlaceholderComposer=function(){"use strict";this._composerAsyncLoaderRoot=Y("composer-async-loader-root");if(!this._composerAsyncLoaderRoot)return;this._wasLoadedWithAsyncPlaceholderComposer=!0;this._submittingScreen=k.find(this._composerAsyncLoaderRoot,"div","composer-submitting")};c.prototype.copyPlaceholderComposerFormTextAndFocus=function(a){"use strict";var b=k.scry(this._composerAsyncLoaderRoot,"form","composer-placeholder-form"),c=k.scry(this._composerAsyncLoaderRoot,"textarea","composer-placeholder-textarea"),d=!1;c.length>0&&(c[0].value.length>0&&this._setCompositionDataStatusText(a,c[0].value),d=c[0]===Xa());b.length>0&&k.remove(b[0]);k.show(this._composer);d&&this._textarea.focus()};c.prototype.captureFriendsPrivacyRow=function(){"use strict";this._friendsPrivacyRow=this._getPrivacyRow("value",T.PostParam.FRIENDS),this._friendsPrivacyRow||this.closeInterstitial(this._postInterstitialTooltipText[0]),this._waitingForFriendsRow&&this._handleInterstitialFriends()};c.prototype.capturePublicPrivacyRow=function(){"use strict";var a=this._getSavedCustomHiddenInput();if(a){a=Qa.getURIBuilder().setString("new_post_param",T.PostParam.EVERYONE.toString()).setBool("update_icon",!0).getURI();new Q(a).send()}else this._publicPrivacyRow=this._getPrivacyRow("value",T.PostParam.EVERYONE),U.invoke("MPrivacyComposerMenu:updatePrivacy",null,{row:this._publicPrivacyRow})};c.prototype._getPrivacyRow=function(a,b){"use strict";__p&&__p();var c=k.scry(this._buttonbar,"table","privacy-table")[0];if(!c)return null;for(var d=0;d<c.rows.length;d++){var e=c.rows[d],f=P.get(e);if(f[a]==b)return e}return null};c.prototype._hideForInterstitial=function(){"use strict";k.hide(this._composer),this._textarea.blur()};c.prototype._closeComposer=function(){"use strict";this._textarea.blur(),k.hide(this._composer),k.show(this._mainPage)};c.prototype._toggleSubmitButtonState=function(a){"use strict";this._submitButtonNodes.forEach(function(b){b.disabled=!a}),this._forsaleInterceptForsale&&(this._forsaleInterceptForsale.disabled=!a,this._forsaleInterceptNonForsale.disabled=!a),this._slideshowPreviewButton&&(this._slideshowPreviewButton.disabled=!a)};c.prototype._toggleCancelButtonHidden=function(a){"use strict";var b=k.find(this._composer,"button","cancel_composer");b=b.parentElement;a?k.hide(b):k.show(b)};c.prototype._toggleSubmitButtonHidden=function(a){"use strict";this._submitButtonNodes.forEach(function(b){h.conditionShow(b,!a)})};c.prototype._restoreComposerWithoutFocus=function(){"use strict";U.invoke("MMentions:decorations:show",null,{}),k.hide(this._mainPage),k.show(this._composer),k.show(this._textarea),k.show(this._buttonbar)};c.prototype._skipFocus=function(){"use strict";return x.get(w.SKIP_FOCUS)};c.prototype._restoreComposer=function(){"use strict";this._restoreComposerWithoutFocus(),this._focusOnTextarea()};c.prototype._incrementPhotosPreviewNuxCounter=function(){"use strict";new Q(Ra.getURIBuilder().getURI()).send()};c.prototype._showPhotosPreview=function(a){"use strict";if(!this._photoPreview)return;a.state===ua.UPLOADED&&(this._photosPreviewNux&&this._incrementPhotosPreviewNuxCounter(),k.hide(this._composer),this._photoPreview.show(a,this._tagSuggestionsController.getFaceboxesCopyForPhoto(a.fbid)))};c.prototype._hidePhotoPreviews=function(){"use strict";if(!this._photoPreview)return;k.show(this._composer);this._photoPreview.hide()};c.prototype._updateTagExpansion=function(){"use strict";var a=this._friendsInputController.hasTokens()||this._hasMentions,b=this._getPrivacySelector();b&&b.setShowTagExpansion(a)};c.prototype._startCheckin=function(){"use strict";U.invoke("open","MComposer:dialog:place")};c.prototype._registerPhotoPreviewEvents=function(){"use strict";var a=this._multiPhotoUploader.getUploader();a.setProps({onThumbnailClicked:this._showPhotosPreview.bind(this)});this._photoPreview.setOnAddXYTag(this._tagSuggestionsController.addXYTag.bind(this._tagSuggestionsController));this._photoPreview.setOnDeleteXYTag(this._tagSuggestionsController.deleteXYTag.bind(this._tagSuggestionsController));this._photoPreview.setWaterfall(a.component.getWaterfallID(),a.component.getWaterfallAppName(),a.component.getWaterfallSource())};c.prototype._initPhotoPreview=function(){"use strict";this._multiPhotoUploader&&this._tagSuggestionsController&&this._photosPreviewConfig&&!this._photoPreview&&(this._photoPreview=new Ca(this._photosPreviewConfig),this._registerPhotoPreviewEvents())};Va(c,{scrollToElem:null,showPlace:!0,shouldScroll:!0,syncSubmit:!1,eventTaggingNuxHref:null});Object.assign(c.prototype,{_defaultAction:null,_defaultConfig:null,_photoAction:null,_photoOpen:!1,_hasPhoto:!1,_albumChosen:!1,_onlyMeFlyoutShown:!1,_prefill:null,_forceAsync:!1,_isCheckin:!1,_isUnpublishedPost:!1,_isPageCheckin:!1,_pinPlace:!1,_albumPicker:null,_EventTaggingNuxDisplayed:!1,_ogTagger:null,_textarea:null,_attachPhoto:null,_clickedButton:null,_composer:null,_composerTitle:null,_contextualMessage:null,_form:null,_mainPage:null,_photoButton:null,_staticTemplates:null,_ogTaggerLoaded:!1,_slideshowNUX:null,_listeners:null,_canRemoveActorVC:!0});function $(a){if(!a)return"";a=a.trim();a=a.replace(/\n{3,}/,"\n\n");a=a.replace(/\t+/," ");return a}e.exports=c}),null);
__d("InitMStructuredComposer",["DOM","MAlbumPicker","MLegacyDataStore","MOpenGraphTagger","MStructuredComposer","Stratcom","$"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m){__p&&__p();function a(a){__p&&__p();b=a.friends_tagger;var c=m(a.open_id),d=i.get(c),e=d._friendsTagger||b.fromID(a.friends_tagger_id),f=null;a.album_picker_id&&(f=d._albumPicker||new h(m(a.album_picker_id)));var n;a.og_tagger_id&&(n=new j(m(a.og_tagger_id)));d=new k(c,e,null,f,n,a.multi_photo_uploader,a.page_info,a.create_label,a.update_label,a.composer_target_type,a.composer_entry_point,a.friends_input,null,a.og_clearable_preview,a.should_show_tag_suggestions,a.should_auto_tag,a.photos_preview_config,a.photos_preview_nux);d.setDefaultHideConfig&&d.setDefaultHideConfig(a.hide_config||{});a.privacy_selector_rewrite_id&&d.setPrivacySelector(m(a.privacy_selector_rewrite_id));i.set(c,{composer:d});a.scroll_to_elem_id&&d.setScrollToElem(a.scroll_to_elem_id);d.setSyncSubmit(a.syncsubmit);d.setShowPlace(a.showplace);d.setShouldScroll(a.shouldscroll);d.setLongReviewTips(a.long_review_tips);d.setShortReviewsDisableDone(a.short_reviews_disable_done);d.setCanRemoveActorVc(a.can_remove_actor_vc);d.setSlideshowNUX(a.slideshow_nux);a.slideshow_preview_id&&d.setSlideshowPreview(m(a.slideshow_preview_id));a.was_loaded_with_placeholder_composer&&d.setWasAsyncLoadedWithPlaceholderComposer(a.was_loaded_with_placeholder_composer);d.start();a.photouploaduri&&d.setPhotoAction(a.photouploaduri);d.setInAudienceAlignmentExp(a.in_aaa_exp);d.setInAudienceAlignmentOnlyMeExp(a.in_aaa_onlyme_exp);d.setAudienceAlignmentFlyout(a.aaa_flyout);a.newcomer_audience_nux&&d.setNewcomerAudienceNux(a.newcomer_audience_nux);a.show_sticky_guardrail_flyout&&d.setStickyGuardrailFlyout(a.show_sticky_guardrail_flyout);d.setSharePreview(a.share_preview);d.setShowLoadingIndicator(a.show_loading_indicator);l.listen("MPrivacyComposerMenu::custom",null,function(b){b.getData().selector.parentNode.id==a.privacy_selector_rewrite_id&&(b.getData().visible?g.hide(m("structured_composer")):(g.hide(m("viewport")),g.show(m("structured_composer"))))});l.invoke("InitMStructuredComposer:composer-initialized")}f.main=a}),null);
__d("MStructuredComposerSATP",["CSS","DOM","EventListener","Keys","MCompositionShareFields","MCompositionShareStore","Stratcom","Style"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){__p&&__p();e.exports={init:function(a){__p&&__p();this.clearStylePropertyNames={};this.textAreaContainer=a.textArea;this.satpChooser=a.satpChooser;this.hiddenInput=a.hiddenInput;this.satpHidden=!1;var b=h.find(this.textAreaContainer,"textarea","composer-textarea");this.textArea=b;this.textAreaPlaceholder=h.scry(this.textAreaContainer,"div","js_placeholder")[0];this.newlinesLimit=a.newlinesLimit;this.textLengthLimit=a.textLengthLimit;this.presetApplied=!1;this.checkinActive=!1;this.linkShareActive=!1;i.listen(b,"input",function(){this._recalcSATPVisibility()}.bind(this));m.listen("MMultiPhotoUploader:attachments:change",null,function(a){this.photoCount=(a.getData().sending||0)+(a.getData().uploaded||0)+(a.getData().polling||0),this._recalcSATPVisibility()}.bind(this));m.listen("m:quicksearch:places:click",null,function(a){this.checkinActive=!0,this._recalcSATPVisibility()}.bind(this));m.listen("m:quicksearch:places:clear",null,function(a){this.checkinActive=!1,this._recalcSATPVisibility()}.bind(this));l.addListener("change",function(){this.linkShareActive=l.get(k.SHARE_URI)!==null,this._recalcSATPVisibility()}.bind(this));m.listen("MStructuredComposer:reset",null,function(){this.activePreset=null,this.checkinActive=!1,this.linkShareActive=!1,this.photoCount=0,this._clearPreset()}.bind(this))},initPreset:function(a){i.listen(a.element,"click",function(){this._applyPreset(a.preset)}.bind(this)),i.listen(a.element,"keyup",function(b){(b.keyCode===j.SPACE||b.keyCode===j.RETURN)&&this._applyPreset(a.preset)}.bind(this))},initClearPreset:function(a){this.clearStylePropertyNames=a.clearStylePropertyNames,i.listen(a.element,"click",function(){this.activePreset=null,this._clearPreset()}.bind(this)),i.listen(a.element,"keyup",function(a){(a.keyCode===j.SPACE||a.keyCode===j.RETURN)&&(this.activePreset=null,this._clearPreset())}.bind(this))},_clearPreset:function(){if(!this.presetApplied)return;this.hiddenInput.value="";this.presetApplied=!1;n.apply(this.textAreaContainer,this.clearStylePropertyNames);g.removeClass(this.textAreaContainer,"active-satp-preset");n.apply(this.textArea,this.clearStylePropertyNames);this.textAreaPlaceholder!==void 0&&n.apply(this.textAreaPlaceholder,this.clearStylePropertyNames);m.invoke("MStructuredComposerSATP:changed",null,null)},_recalcSATPVisibility:function(){__p&&__p();var a=this.photoCount||0;if(a>0||this.checkinActive||this.linkShareActive){this._hideSATP();return}a=this.textArea.value;var b=a.split("\n",this.newlinesLimit+2);if(b.length-1>this.newlinesLimit||Array.from(a).length>this.textLengthLimit){this._hideSATP();return}this._showSATP()},_showSATP:function(){this.satpHidden&&(this.satpHidden=!1,this.satpChooser.style.display="block",this.activePreset&&this._applyPreset(this.activePreset))},_hideSATP:function(){this.satpHidden||(this.satpHidden=!0,this.satpChooser.style.display="none",this._clearPreset())},_applyPreset:function(a){this._clearPreset(),this.presetApplied=!0,this.hiddenInput.value=a.presetID,this.activePreset=a,this._applyStyle(this.textAreaContainer,this.activePreset.bodyStyle),this._applyStyle(this.textArea,this.activePreset.textInputStyle+";height: 208px;"),g.addClass(this.textAreaContainer,"active-satp-preset"),this.textAreaPlaceholder!==void 0&&this._applyStyle(this.textAreaPlaceholder,this.activePreset.textInputStyle),m.invoke("MStructuredComposerSATP:changed",null,this.activePreset)},_applyStyle:function(a,b){a.style.cssText+=";"+b}}}),null);
__d("MTokenizerParagraphRoot.react",["React","cx"],(function(a,b,c,d,e,f,g,h){__p&&__p();var i;b=g.PropTypes;i=babelHelpers.inherits(a,g.Component);i&&i.prototype;a.prototype.render=function(){"use strict";return g.createElement("div",{className:"_5hd3"},"\u2014",this.props.showSpace?" ":"",this.props.children)};function a(){"use strict";i.apply(this,arguments)}a.propTypes={showSpace:b.bool};a.defaultProps={showSpace:!0};e.exports=a}),null);
__d("MTokenizerParagraphToken.react",["MTouchableArea.react","React","cx","joinClasses"],(function(a,b,c,d,e,f,g,h,i,j){__p&&__p();var k;b=h.PropTypes;var l={use:{token:"mToken _4tk2",noborder:"mToken _4tk2 _3a7k"}};c=babelHelpers.inherits(a,h.Component);k=c&&c.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=k.constructor).call.apply(a,[this].concat(d)),this.getClassListForAttribute=function(a){return l[a][this.props[a]]}.bind(this),b}a.prototype.render=function(){"use strict";return h.createElement(g,null,h.createElement("span",babelHelpers["extends"]({},this.props,{className:j(this.props.className,this.getClassListForAttribute("use"))}),h.createElement("span",{className:"_4tk0"},this.props.children)))};a.propTypes={use:b.oneOf(["token","noborder"])};a.defaultProps={use:"token"};e.exports=a}),null);
__d("MTokenizerParagraphAtPlace.react",["MTokenizerParagraphRoot.react","MTokenizerParagraphToken.react","React","fbt","MUnifiedTaggerConstants"],(function(a,b,c,d,e,f,g,h,i,j){__p&&__p();var k,l=b("MUnifiedTaggerConstants").TOKEN_TYPES;c=i.PropTypes;d=babelHelpers.inherits(a,i.Component);k=d&&d.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=k.constructor).call.apply(a,[this].concat(d)),this.renderNonSpecificPlace=function(){return i.createElement(g,null,j._("en {city-name}.",[j._param("city-name",this.renderPlaceToken())]))}.bind(this),this.renderPlaceToken=function(){return i.createElement(h,{onClick:this.props.onTokenClick.bind(null,l.PLACE)},this.props.place.name)}.bind(this),this.renderSpecificPlace=function(){return i.createElement(g,null,j._("en {place-name}.",[j._param("place-name",this.renderPlaceToken())]))}.bind(this),b}a.prototype.render=function(){"use strict";return this.props.place.isNonSpecific?this.renderNonSpecificPlace():this.renderSpecificPlace()};a.propTypes={onTokenClick:c.func.isRequired,place:c.object.isRequired};e.exports=a}),null);
__d("MTokenizerParagraphTokenList.react",["MTokenizerParagraphToken.react","React","fbt","intlList","invariant"],(function(a,b,c,d,e,f,g,h,i,j,k){__p&&__p();var l;b=h.PropTypes;l=babelHelpers.inherits(a,h.Component);l&&l.prototype;a.prototype.render=function(){"use strict";var a=this.props.names.length;a=a===2?this.props.names[1]:i._("{count} personas m\u00e1s",[i._param("count",a-1)]);a=[h.createElement(g,null,this.props.names[0]),h.createElement(g,null,a)];return h.createElement("span",{onClick:this.props.onClick,role:"presentation"},j(a,j.CONJUNCTIONS.AND))};function a(){"use strict";l.apply(this,arguments)}a.propTypes={onClick:b.func,names:function(a,b,c){var d=Array.isArray(a[b]);d&&a[b].length>1||k(0,5066,b,d?"array":typeof a[b],a[b]?a[b].length:a[b],c)}};e.exports=a}),null);
__d("MTokenizerParagraphWithMultiplePeople.react",["MTokenizerParagraphRoot.react","MTokenizerParagraphTokenList.react","React","fbt","MUnifiedTaggerConstants"],(function(a,b,c,d,e,f,g,h,i,j){__p&&__p();var k,l=b("MUnifiedTaggerConstants").TOKEN_TYPES;c=i.PropTypes;k=babelHelpers.inherits(a,i.Component);k&&k.prototype;a.prototype.render=function(){"use strict";return i.createElement(g,null,j._("con {list-of-people}.",[j._param("list-of-people",i.createElement(h,{onClick:this.props.onTokenClick.bind(null,l.PEOPLE),names:this.props.people.map(function(a){return a.name})}))]))};function a(){"use strict";k.apply(this,arguments)}a.propTypes={onTokenClick:c.func.isRequired,people:c.array.isRequired};e.exports=a}),null);
__d("MTokenizerParagraphWithMultiplePeopleAtPlace.react",["MTokenizerParagraphRoot.react","MTokenizerParagraphToken.react","MTokenizerParagraphTokenList.react","React","fbt","MUnifiedTaggerConstants"],(function(a,b,c,d,e,f,g,h,i,j,k){__p&&__p();var l,m=b("MUnifiedTaggerConstants").TOKEN_TYPES;c=j.PropTypes;d=babelHelpers.inherits(a,j.Component);l=d&&d.prototype;function a(){__p&&__p();var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=l.constructor).call.apply(a,[this].concat(d)),this.getPeopleNames=function(){return this.props.people.map(function(a){return a.name})}.bind(this),this.renderNonSpecificPlace=function(){return j.createElement(g,null,k._("con {list-of-people} en {non-specific-place-name}.",[k._param("list-of-people",this.renderPeopleToken()),k._param("non-specific-place-name",this.renderPlaceToken())]))}.bind(this),this.renderPeopleToken=function(){return j.createElement(i,{onClick:this.props.onTokenClick.bind(null,m.PEOPLE),names:this.getPeopleNames()})}.bind(this),this.renderPlaceToken=function(){return j.createElement(h,{onClick:this.props.onTokenClick.bind(null,m.PLACE)},this.props.place.name)}.bind(this),this.renderSpecificPlace=function(){return j.createElement(g,null,k._("con {list-of-people} en {place-name}.",[k._param("list-of-people",this.renderPeopleToken()),k._param("place-name",this.renderPlaceToken())]))}.bind(this),b}a.prototype.render=function(){"use strict";return this.props.place.isNonSpecific?this.renderNonSpecificPlace():this.renderSpecificPlace()};a.propTypes={onTokenClick:c.func.isRequired,place:c.object.isRequired,people:c.array.isRequired};e.exports=a}),null);
__d("MTokenizerParagraphIcon.react",["Image.react","MTokenizerParagraphToken.react","React","cx"],(function(a,b,c,d,e,f,g,h,i,j){__p&&__p();var k;b=i.PropTypes;k=babelHelpers.inherits(a,i.Component);k&&k.prototype;a.prototype.render=function(){"use strict";return i.createElement(h,this.props,i.createElement(g,{className:"_2r5v",src:this.props.src}))};function a(){"use strict";k.apply(this,arguments)}a.propTypes={use:b.oneOf(["token","noborder"])};a.defaultProps={use:"noborder"};e.exports=a}),null);
__d("MTokenizerParagraphWithOGActivity.react",["MTaggableActivityPreviewTemplateQuery","MTokenizerParagraphIcon.react","MTokenizerParagraphRoot.react","MTokenizerParagraphToken.react","MTokenizerParagraphTokenList.react","React","cx","ix","MUnifiedTaggerConstants"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){__p&&__p();var o,p=b("MUnifiedTaggerConstants").TOKEN_TYPES;c=l.PropTypes;d=babelHelpers.inherits(a,l.Component);o=d&&d.prototype;function a(){__p&&__p();var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=o.constructor).call.apply(a,[this].concat(d)),this.state={template:null},this.getTemplateQuery=function(a){var b=new g(a.ogactivity.id);a.people.length===1?b.setHasPerson():a.people.length>1&&b.setHasPeople();a.place&&b.setHasPlace();return b},this.shouldRenderLoader=function(){return!(this.state.template&&this.props.ogactivity.icon)}.bind(this),this.renderLoading=function(){return l.createElement(h,{className:"_12zh",src:n("85428")})},this.renderTemplate=function(a){return this.state.template.renderArray(this.state.template.getTokens().map(this.renderToken))}.bind(this),this.renderToken=function(a){a=a.token;var b=this.props.onTokenClick.bind(null,a===p.PERSON?p.PEOPLE:a);switch(a){case p.ICON:return[l.createElement(h,{onClick:b,src:this.props.ogactivity.icon,use:"token"})," "];case p.OBJECT:return l.createElement(j,{onClick:b,key:a},this.props.ogactivity.object);case p.PEOPLE:return l.createElement(k,{onClick:b,names:this.props.people.map(function(a){return a.name}),key:a});case p.PERSON:return l.createElement(j,{onClick:b,key:a},this.props.people[0].name);case p.PLACE:return l.createElement(j,{onClick:b,key:a},this.props.place.name)}}.bind(this),b}a.prototype.componentDidMount=function(){"use strict";this.$1=!0,this.startTemplateQuery(this.props)};a.prototype.componentWillUnnount=function(){"use strict";this.$1=!1};a.prototype.UNSAFE_componentWillReceiveProps=function(a){"use strict";this.setState({template:null}),this.startTemplateQuery(a)};a.prototype.startTemplateQuery=function(a){"use strict";this.getTemplateQuery(a).fetch().done(function(a){this.$1&&this.setState({template:a})}.bind(this))};a.prototype.render=function(){"use strict";var a=this.shouldRenderLoader()?this.renderLoading():this.renderTemplate();return l.createElement(i,null,a)};a.propTypes={ogactivity:c.object.isRequired,onTokenClick:c.func.isRequired,people:c.array,place:c.object};e.exports=a}),null);
__d("MTokenizerParagraphWithPerson.react",["MTokenizerParagraphRoot.react","MTokenizerParagraphToken.react","React","fbt","MUnifiedTaggerConstants"],(function(a,b,c,d,e,f,g,h,i,j){__p&&__p();var k,l=b("MUnifiedTaggerConstants").TOKEN_TYPES;c=i.PropTypes;k=babelHelpers.inherits(a,i.Component);k&&k.prototype;a.prototype.render=function(){"use strict";return i.createElement(g,null,j._("con {name1}",[j._param("name1",i.createElement(h,{onClick:this.props.onTokenClick.bind(null,l.PEOPLE)},this.props.person.name))]))};function a(){"use strict";k.apply(this,arguments)}a.propTypes={onTokenClick:c.func.isRequired,person:c.object.isRequired};e.exports=a}),null);
__d("MTokenizerParagraphWithPersonAtPlace.react",["MTokenizerParagraphRoot.react","MTokenizerParagraphToken.react","React","fbt","MUnifiedTaggerConstants"],(function(a,b,c,d,e,f,g,h,i,j){__p&&__p();var k,l=b("MUnifiedTaggerConstants").TOKEN_TYPES;c=i.PropTypes;d=babelHelpers.inherits(a,i.Component);k=d&&d.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=k.constructor).call.apply(a,[this].concat(d)),this.renderNonSpecificPlace=function(){return i.createElement(g,null,j._("con {name1} en {city-name}",[j._param("name1",this.renderPersonToken()),j._param("city-name",this.renderPlaceToken())]))}.bind(this),this.renderPersonToken=function(){return i.createElement(h,{onClick:this.props.onTokenClick.bind(null,l.PEOPLE)},this.props.person.name)}.bind(this),this.renderPlaceToken=function(){return i.createElement(h,{onClick:this.props.onTokenClick.bind(null,l.PLACE)},this.props.place.name)}.bind(this),this.renderSpecificPlace=function(){return i.createElement(g,null,j._("con {name1} en {place-name}.",[j._param("name1",this.renderPersonToken()),j._param("place-name",this.renderPlaceToken())]))}.bind(this),b}a.prototype.render=function(){"use strict";return this.props.place.isNonSpecific?this.renderNonSpecificPlace():this.renderSpecificPlace()};a.propTypes={onTokenClick:c.func.isRequired,place:c.object.isRequired,person:c.object.isRequired};e.exports=a}),null);
__d("MTokenizerParagraph.react",["MTokenizerParagraphAtPlace.react","MTokenizerParagraphWithMultiplePeople.react","MTokenizerParagraphWithMultiplePeopleAtPlace.react","MTokenizerParagraphWithOGActivity.react","MTokenizerParagraphWithPerson.react","MTokenizerParagraphWithPersonAtPlace.react","React"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m){__p&&__p();var n;b=m.PropTypes;c=babelHelpers.inherits(a,m.Component);n=c&&c.prototype;function a(){__p&&__p();var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=n.constructor).call.apply(a,[this].concat(d)),this.renderTokens=function(){__p&&__p();var a=this.props.ogactivity,b=this.props.people||[],c=this.props.place;if(a)return m.createElement(j,babelHelpers["extends"]({},this.props,{ogactivity:a,people:b,place:c}));if(b.length>1&&c)return m.createElement(i,babelHelpers["extends"]({},this.props,{place:c,people:b}));if(b.length===1&&c)return m.createElement(l,babelHelpers["extends"]({},this.props,{place:c,person:b[0]}));if(c)return m.createElement(g,babelHelpers["extends"]({},this.props,{place:c}));if(b.length>1)return m.createElement(h,babelHelpers["extends"]({},this.props,{people:b}));return b.length===1?m.createElement(k,babelHelpers["extends"]({},this.props,{person:b[0]})):m.createElement("div",this.props)}.bind(this),b}a.prototype.render=function(){"use strict";return this.renderTokens()};a.propTypes={ogactivity:b.object,onTokenClick:b.func,people:b.array,place:b.object};a.defaultProps={ogactivity:null,people:[],place:null};e.exports=a}),null);
__d("MStructuredComposerUnifiedTagger",["MCompositionPlaceFields","MCompositionPlaceStore","MSubscriptionsHandlerMixin","MTokenizerParagraph.react","React","ReactDOM","Stratcom","mixin"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){__p&&__p();var o;b=babelHelpers.inherits(a,n(i));o=b&&b.prototype;function a(a){"use strict";o.constructor.call(this),this.$MStructuredComposerUnifiedTagger1={ogActivity:null,people:null,place:null},this.$MStructuredComposerUnifiedTagger2=a,this.addSubscriptions(h.addListener("change",function(){h.isEmpty()?this.setAttachments({place:null}):this.setAttachments({place:{name:h.get(g.NAME),isNonSpecific:h.get(g.IS_NON_SPECIFIC,!1)}})}.bind(this)),m.listen("MComposer:tagger:update",null,function(a){return this.setAttachments(a.getData())}.bind(this)),m.listen("MComposer:tagger:update:og-icon",null,function(a){return this.setOGIcon(a.getData().icon)}.bind(this)),m.listen("MComposer:tagger:clear",null,function(){return this.clear()}.bind(this))),this.$MStructuredComposerUnifiedTagger3()}a.prototype.clear=function(){"use strict";this.$MStructuredComposerUnifiedTagger1.ogActivity=null;this.$MStructuredComposerUnifiedTagger1.people=null;this.$MStructuredComposerUnifiedTagger1.place=null;return this.$MStructuredComposerUnifiedTagger3()};a.prototype.$MStructuredComposerUnifiedTagger4=function(a){"use strict";m.invoke("MComposer:tagger:click",a)};a.prototype.$MStructuredComposerUnifiedTagger5=function(){"use strict";return!!(this.$MStructuredComposerUnifiedTagger1.ogActivity||this.$MStructuredComposerUnifiedTagger1.people&&this.$MStructuredComposerUnifiedTagger1.people.length||this.$MStructuredComposerUnifiedTagger1.place)};a.prototype.$MStructuredComposerUnifiedTagger3=function(){"use strict";this.$MStructuredComposerUnifiedTagger5()?l.render(k.createElement(j,{ogactivity:this.$MStructuredComposerUnifiedTagger1.ogActivity,onTokenClick:function(a){return this.$MStructuredComposerUnifiedTagger4(a)}.bind(this),people:this.$MStructuredComposerUnifiedTagger1.people,place:this.$MStructuredComposerUnifiedTagger1.place}),this.$MStructuredComposerUnifiedTagger2):l.unmountComponentAtNode(this.$MStructuredComposerUnifiedTagger2);return this};a.prototype.setAttachments=function(a){"use strict";Object.assign(this.$MStructuredComposerUnifiedTagger1,a);return this.$MStructuredComposerUnifiedTagger3()};a.prototype.setOGIcon=function(a){"use strict";this.$MStructuredComposerUnifiedTagger1.ogActivity&&(this.$MStructuredComposerUnifiedTagger1.ogActivity.icon=a);return this.$MStructuredComposerUnifiedTagger3()};e.exports=a}),null);
__d("MComposerLegacyPlaceAttachment",["CSS","DOM","MComposerLogger","MComposerWaterfallEvent","MCompositionConfigFields","MCompositionConfigStore","MCompositionPlaceFields","MCompositionPlaceStore","MCompositionUserActions","MSubscriptionsHandlerMixin","Stratcom","memoize","mixin","MUnifiedTaggerConstants"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){__p&&__p();var t,u=b("MUnifiedTaggerConstants").SHOW_UNIFIED_TAGGER;c=babelHelpers.inherits(a,s(p));t=c&&c.prototype;function a(a){"use strict";t.constructor.call(this),this.$MComposerLegacyPlaceAttachment1=a,this.$MComposerLegacyPlaceAttachment2=r(function(){return h.find(this.$MComposerLegacyPlaceAttachment1,"li","token")}.bind(this)),this.$MComposerLegacyPlaceAttachment3=r(function(){return h.find(this.$MComposerLegacyPlaceAttachment2(),"a","remove-token")}.bind(this)),this.addSubscriptions(n.addListener("change",function(){return this.$MComposerLegacyPlaceAttachment4()}.bind(this)),h.listen(this.$MComposerLegacyPlaceAttachment1,"click","remove-token",function(a){return this.$MComposerLegacyPlaceAttachment5(a)}.bind(this)),h.listen(this.$MComposerLegacyPlaceAttachment1,"click","at-button",function(){return this.$MComposerLegacyPlaceAttachment6()}.bind(this)))}a.prototype.$MComposerLegacyPlaceAttachment7=function(){"use strict";return!l.get(k.PIN_PLACE,!1)};a.prototype.$MComposerLegacyPlaceAttachment8=function(){"use strict";return!n.isEmpty()&&!l.get(k.DISABLE_PLACE_TAG,!1)};a.prototype.$MComposerLegacyPlaceAttachment6=function(){"use strict";q.invoke("MStructuredComposer-addLocationClicked")};a.prototype.$MComposerLegacyPlaceAttachment4=function(){"use strict";if(u)return;g.conditionShow(this.$MComposerLegacyPlaceAttachment1,this.$MComposerLegacyPlaceAttachment8());g.conditionShow(this.$MComposerLegacyPlaceAttachment3(),this.$MComposerLegacyPlaceAttachment7());this.$MComposerLegacyPlaceAttachment8()&&h.replace(this.$MComposerLegacyPlaceAttachment2().firstChild,h.create("span",{className:"innerToken"},n.get(m.NAME)))};a.prototype.$MComposerLegacyPlaceAttachment5=function(a){"use strict";a.kill(),q.invoke("MStructuredComposer-removedLocation"),i.log(j.LOCATION_REMOVE),o.placeRemove()};e.exports=a}),null);
__d("MComposerStatusTextarea",["DOM","MCompositionConfigFields","MCompositionConfigStore","MCompositionPageRecommendationsFields","MCompositionPageRecommendationsStore","MCompositionStatusFields","MCompositionStatusStore","MCompositionUserActions","MJSEnvironment","MSubscriptionsHandlerMixin","MViewport","Scroll","Stratcom","Style","debounceCore","mixin"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){__p&&__p();var w,x=480,y=o.IS_ANDROID||o.IS_APPLE_WEBKIT_IOS||o.IS_CHROME||o.IS_FIREFOX&&o.OS_VERSION>14;function z(a){var b=u(a,300);return function(){b.reset();for(var a=arguments.length,c=new Array(a),d=0;d<a;d++)c[d]=arguments[d];b.apply(null,c)}}b=babelHelpers.inherits(a,v(p));w=b&&b.prototype;function a(a){__p&&__p();a=a.textareaNode;w.constructor.call(this);this.$MComposerStatusTextarea1=a;a.tagName!=="TEXTAREA"?this.$MComposerStatusTextarea2=g.find(a,"textarea"):this.$MComposerStatusTextarea2=a;o.IS_APPLE_WEBKIT_IOS&&!o.IS_CHROME&&o.OS_VERSION>=7&&q.getScreenHeight()<=x&&t.set(this.$MComposerStatusTextarea2,"height","75px");this.addSubscriptions(m.addChangeListener(function(){return this.$MComposerStatusTextarea3()}.bind(this)),i.addChangeListener(function(){return this.$MComposerStatusTextarea4()}.bind(this)),g.listen(this.$MComposerStatusTextarea2,y?"input":"keyup",null,z(function(a){return this.$MComposerStatusTextarea5(a)}.bind(this))),s.listen("MMentions:change",null,function(a){return this.$MComposerStatusTextarea6(a)}.bind(this)),s.listen("MComposerStatusTextarea:flush",null,function(a){return this.$MComposerStatusTextarea7(a)}.bind(this)))}a.prototype.$MComposerStatusTextarea6=function(a){"use strict";a=a.getData().input;if(a!==this.$MComposerStatusTextarea2)return;this.$MComposerStatusTextarea8(a.value)};a.prototype.$MComposerStatusTextarea3=function(){"use strict";var a=m.get(l.TEXT,"");this.$MComposerStatusTextarea2.value=a;s.invoke("MJSPlaceholder")};a.prototype.$MComposerStatusTextarea4=function(){"use strict";var a=i.get(h.INPUT_NAME),b=this.$MComposerStatusTextarea9();b.getAttribute("name")!==a&&b.setAttribute("name",a)};a.prototype.$MComposerStatusTextarea9=function(){"use strict";var a=g.scry(this.$MComposerStatusTextarea1,"input","mentionsHiddenInput")[0];return a||this.$MComposerStatusTextarea2};a.prototype.$MComposerStatusTextarea5=function(a){"use strict";this.$MComposerStatusTextarea8(a.getTarget().value)};a.prototype.$MComposerStatusTextarea7=function(a){"use strict";a=a.getData();this.$MComposerStatusTextarea8(a.value);if(a.hasMentions===!1){var b=this.$MComposerStatusTextarea9();b!==this.$MComposerStatusTextarea2&&(b.value=a.value)}};a.prototype.$MComposerStatusTextarea8=function(a){"use strict";var b=this.$MComposerStatusTextarea2.selectionStart,c=this.$MComposerStatusTextarea2.selectionEnd,d=r.getTop(this.$MComposerStatusTextarea2),e={};e[l.TEXT]=a;n.statusUpdate(e);r.setTop(this.$MComposerStatusTextarea2,d);this.$MComposerStatusTextarea2.setSelectionRange(b,c)};e.exports=a}),null);
__d("MComposerPlaceButton",["CSS","MCompositionConfigFields","MCompositionConfigStore","MCompositionPlaceStore","MSubscriptionsHandlerMixin","mixin"],(function(a,b,c,d,e,f,g,h,i,j,k,l){__p&&__p();var m;b=babelHelpers.inherits(a,l(k));m=b&&b.prototype;function a(a){"use strict";m.constructor.call(this),this.$MComposerPlaceButton1=a,this.addSubscriptions(i.addListener("change",function(){return this.$MComposerPlaceButton2()}.bind(this)),j.addListener("change",function(){return this.$MComposerPlaceButton3()}.bind(this)))}a.prototype.$MComposerPlaceButton4=function(){"use strict";return!j.isEmpty()};a.prototype.$MComposerPlaceButton5=function(){"use strict";return!i.get(h.PIN_PLACE)&&!i.get(h.DISABLE_PLACE_TAG)};a.prototype.$MComposerPlaceButton2=function(){"use strict";g.conditionShow(this.$MComposerPlaceButton1,this.$MComposerPlaceButton5())};a.prototype.$MComposerPlaceButton3=function(){"use strict";g.conditionClass(this.$MComposerPlaceButton1,"active",this.$MComposerPlaceButton4())};e.exports=a}),null);
__d("MComposerPlaceDialog",["DOM","MComposerLogger","MComposerNavigationMixin","MComposerWaterfallEvent","MCompositionConfigFields","MCompositionConfigStore","MCompositionPlaceFields","MCompositionPlaceStore","MCompositionUserActions","MPlacesTagger","MRequest","MSubscriptionsHandlerMixin","MUnifiedTaggerConstants","Stratcom","fbt","getObjectValues","mixin","whitelistObjectKeys"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x){__p&&__p();var y;b=babelHelpers.inherits(a,w(i,r));y=b&&b.prototype;function a(a,b){__p&&__p();var c=b.preview;b=b.tagger;y.constructor.call(this);this.$MComposerPlaceDialog1=c;this.$MComposerPlaceDialog2=a;this.$MComposerPlaceDialog3=b||new p(this.$MComposerPlaceDialog2);this.$MComposerPlaceDialog4=!0;this.addSubscriptions(this.$MComposerPlaceDialog1.addListener("clear",function(){return this.$MComposerPlaceDialog5()}.bind(this)),this.$MComposerPlaceDialog3.listen("cancel",function(){return this.$MComposerPlaceDialog6()}.bind(this)),this.$MComposerPlaceDialog3.listen("submit",function(a){return this.$MComposerPlaceDialog7(a)}.bind(this)),n.addListener("change",function(){return this.$MComposerPlaceDialog8()}.bind(this)),t.listen("click","at-button",function(){return this.$MComposerPlaceDialog9()}.bind(this)),t.listen("open","MComposer:dialog:place",function(){this.$MComposerPlaceDialog4=!1,this.$MComposerPlaceDialog9()}.bind(this)),t.listen("back","MComposer:dialog:place",function(){return this.$MComposerPlaceDialog10()}.bind(this)),t.listen("MComposer:tagger:click",s.TOKEN_TYPES.PLACE,function(){return this.$MComposerPlaceDialog9()}.bind(this)))}a.prototype.$MComposerPlaceDialog11=function(){"use strict";o.placeRemove(),this.$MComposerPlaceDialog10()};a.prototype.$MComposerPlaceDialog10=function(){"use strict";this.$MComposerPlaceDialog3.hide(),this.$MComposerPlaceDialog4||(this.$MComposerPlaceDialog4=!0,t.invoke("close","MComposer:dialog:place"))};a.prototype.$MComposerPlaceDialog12=function(){"use strict";return!l.get(k.PIN_PLACE)&&!l.get(k.DISABLE_PLACE_TAG)};a.prototype.$MComposerPlaceDialog13=function(){"use strict";return n.get(m.IS_NON_SPECIFIC)};a.prototype.$MComposerPlaceDialog8=function(){"use strict";n.isEmpty()?this.$MComposerPlaceDialog1.clear():this.$MComposerPlaceDialog1.setValue(this.$MComposerPlaceDialog14())};a.prototype.$MComposerPlaceDialog9=function(){"use strict";__p&&__p();if(this.hasNavigationPolicy())return;if(!this.$MComposerPlaceDialog12()){this.$MComposerPlaceDialog4=!0;return}setTimeout(function(){h.log(j.LOCATION_INTENT),this.$MComposerPlaceDialog4?this.newNavigationPolicy().addOnOpen(function(){return this.$MComposerPlaceDialog15()}.bind(this)).addOnClose(function(){return this.$MComposerPlaceDialog10()}.bind(this)).open():this.$MComposerPlaceDialog15()}.bind(this),10)};a.prototype.$MComposerPlaceDialog6=function(){"use strict";if(this.$MComposerPlaceDialog4&&!this.hasNavigationPolicy())return;h.log(j.LOCATION_CANCEL);this.$MComposerPlaceDialog4?this.currentNavigationPolicy().close():(this.$MComposerPlaceDialog4=!0,t.invoke("cancel","MComposer:dialog:place"),this.$MComposerPlaceDialog3.hide())};a.prototype.$MComposerPlaceDialog5=function(){"use strict";if(this.$MComposerPlaceDialog4&&!this.hasNavigationPolicy())return;h.log(j.LOCATION_CANCEL);this.$MComposerPlaceDialog4?this.currentNavigationPolicy().addOnClose(function(){return this.$MComposerPlaceDialog11()}.bind(this)).close():this.$MComposerPlaceDialog10()};a.prototype.$MComposerPlaceDialog7=function(a){"use strict";if(this.$MComposerPlaceDialog4&&!this.hasNavigationPolicy())return;h.log(j.LOCATION_ADD);this.$MComposerPlaceDialog4?this.currentNavigationPolicy().addOnClose(function(){return this.$MComposerPlaceDialog16(a)}.bind(this)).close():(this.$MComposerPlaceDialog10(),this.$MComposerPlaceDialog16(a))};a.prototype.$MComposerPlaceDialog15=function(){"use strict";this.$MComposerPlaceDialog3.show();var a=g.scry(this.$MComposerPlaceDialog2,"*","places-category-selector-container")[0];a&&a.id&&a.children.length===0&&new q("/places/addform/category.php").addData({target_id:a.id,parent_id:0}).setMethod("GET").send()};a.prototype.$MComposerPlaceDialog14=function(){"use strict";if(n.get(m.IS_NON_SPECIFIC))return u._("en {non-specific-place-name}.",[u._param("non-specific-place-name",n.get(m.NAME))]);else return u._("en {place-name}.",[u._param("place-name",n.get(m.NAME))])};a.prototype.$MComposerPlaceDialog16=function(a){"use strict";o.placeSet(x(a,v(m)))};e.exports=a}),null);
__d("MComposerInputsWrapper",["DOM","MComposerStoreToInputMap","MCompositionDispatcher","MCompositionStore","destroyOnUnload"],(function(a,b,c,d,e,f,g,h,i,j,k){__p&&__p();function l(a){return Object.prototype.hasOwnProperty.call(h,a.getID())}function m(a,b){return a+"-"+b}function a(a){"use strict";this.$1={},this.$2=a,this.$3=i.register(function(){return this.$4()}.bind(this)),k(function(){return i.unregister(this.$3)}.bind(this))}a.prototype.$5=function(){"use strict";return j.getRegisteredStores().filter(l)};a.prototype.$4=function(){"use strict";var a=this.$5();i.waitFor(a.map(function(a){return a.toUpdate()}));a.forEach(function(a){return this.$6(a)}.bind(this))};a.prototype.$6=function(a){"use strict";var b=a.getID(),c=h[b];Object.keys(c).forEach(function(d){this.$7(b,c[d],a.get(d,""))}.bind(this))};a.prototype.$7=function(a,b,c){"use strict";a=m(a,b);Object.prototype.hasOwnProperty.call(this.$1,a)||(this.$1[a]=g.create("input",{name:b,type:"hidden"}),g.appendContent(this.$2,this.$1[a]));this.$1[a].value=c};e.exports=a}),null);
__d("MComposerLegacyPlaceInput",["DOM","MCompositionPlaceFields","MCompositionPlaceStore","MSubscriptionsHandlerMixin","mixin"],(function(a,b,c,d,e,f,g,h,i,j,k){__p&&__p();var l;b=babelHelpers.inherits(a,k(j));l=b&&b.prototype;function a(a){"use strict";l.constructor.call(this),this.$MComposerLegacyPlaceInput1=a,this.$MComposerLegacyPlaceInput2=g.find(this.$MComposerLegacyPlaceInput1,"input","at-input"),this.$MComposerLegacyPlaceInput3=g.find(this.$MComposerLegacyPlaceInput1,"input","new-place-cat-input"),this.$MComposerLegacyPlaceInput4=g.find(this.$MComposerLegacyPlaceInput1,"input","new-place-is-current"),this.$MComposerLegacyPlaceInput5=g.find(this.$MComposerLegacyPlaceInput1,"input","new-place-name-input"),this.$MComposerLegacyPlaceInput6=g.find(this.$MComposerLegacyPlaceInput1,"input","new-place-phone-input"),this.$MComposerLegacyPlaceInput7=g.find(this.$MComposerLegacyPlaceInput1,"input","new-place-website-input"),this.$MComposerLegacyPlaceInput8=g.find(this.$MComposerLegacyPlaceInput1,"input","new-place-address-input"),this.$MComposerLegacyPlaceInput9=g.find(this.$MComposerLegacyPlaceInput1,"input","new-place-zip-input"),this.$MComposerLegacyPlaceInput10=g.find(this.$MComposerLegacyPlaceInput1,"input","new-place-freeform"),this.$MComposerLegacyPlaceInput11=g.find(this.$MComposerLegacyPlaceInput1,"input","json-location"),this.$MComposerLegacyPlaceInput12=g.find(this.$MComposerLegacyPlaceInput1,"input","is-checkin"),this.addSubscriptions(i.addListener("change",this.$MComposerLegacyPlaceInput13.bind(this)))}a.prototype.$MComposerLegacyPlaceInput14=function(){"use strict";this.$MComposerLegacyPlaceInput2.value="",this.$MComposerLegacyPlaceInput5.value="",this.$MComposerLegacyPlaceInput6.value="",this.$MComposerLegacyPlaceInput7.value="",this.$MComposerLegacyPlaceInput8.value="",this.$MComposerLegacyPlaceInput9.value="",g.setContent(this.$MComposerLegacyPlaceInput3,null),this.$MComposerLegacyPlaceInput10.value="",this.$MComposerLegacyPlaceInput4.value="",this.$MComposerLegacyPlaceInput11.value="{}",this.$MComposerLegacyPlaceInput12.value=""};a.prototype.$MComposerLegacyPlaceInput13=function(){"use strict";i.isEmpty()?this.$MComposerLegacyPlaceInput14():this.$MComposerLegacyPlaceInput15()};a.prototype.$MComposerLegacyPlaceInput15=function(){"use strict";__p&&__p();this.$MComposerLegacyPlaceInput14();this.$MComposerLegacyPlaceInput12.value=!0;i.get(h.ID,!1)?this.$MComposerLegacyPlaceInput2.value=i.get(h.ID):this.$MComposerLegacyPlaceInput10.value=i.get(h.NAME,"");this.$MComposerLegacyPlaceInput11.value=i.get(h.JSON_LOCATION,"{}");if(i.get(h.IS_NEW)){this.$MComposerLegacyPlaceInput5.value=i.get(h.NAME,"");this.$MComposerLegacyPlaceInput6.value=i.get(h.PHONE,"");this.$MComposerLegacyPlaceInput7.value=i.get(h.WEBSITE,"");this.$MComposerLegacyPlaceInput8.value=i.get(h.ADDRESS,"");this.$MComposerLegacyPlaceInput9.value=i.get(h.ZIP,"");this.$MComposerLegacyPlaceInput10.value="";this.$MComposerLegacyPlaceInput4.value=i.get(h.IS_CURRENT,"");var a=i.get(h.TOPIC_TOKENS);a.value?this.$MComposerLegacyPlaceInput3.value=a.value:g.setContent(this.$MComposerLegacyPlaceInput3,a.map(function(a){return a.cloneNode(!0)}))}};e.exports=a}),null);
__d("MPagesStarsRatableBase",["CSS","DOM","MLegacyDataStore","Stratcom"],(function(a,b,c,d,e,f,g,h,i,j){__p&&__p();function k(a,b,c){"use strict";__p&&__p();this.root=a;this.stars=h.scry(a,"span","stars-ratable-star");this.hiddenInput=h.find(a,"input","stars-ratable-input");this.ratingTextContainer=c;this.listeners=[h.listen(this.root,"click","star-link",this._onClick.bind(this)),j.listen("MPagesStarsRatableBase-setStars",null,function(a){this.setRating(a.getData().rating)}.bind(this))];this.setRating(b);var d=this.listeners;j.listen("m:page:unload",null,function(){j.removeCurrentListener(),d.forEach(function(a){a.remove()})})}k.prototype._onClick=function(a){"use strict";var b=this._getStarIndexFromEvent(a);b&&(this.setRating(b),j.invoke("MPagesStarsRatableBase-starTapped",null,{rating:b}));a.prevent()};k.prototype._getStarIndexFromEvent=function(a){"use strict";a=a.getTarget();a.nodeName==="A"&&(a=h.find(a,"span","stars-ratable-star"));return this.stars.indexOf(a)+1};k.prototype.setRating=function(a){"use strict";for(var b=0;b<this.stars.length;++b){var c=b>=a;g.conditionClass(this.stars[b],"fullStar",!c);g.conditionClass(this.stars[b],"emptyStar",c)}this.hiddenInput.value=a;a&&(this.ratingTextContainer&&(this.ratingTextContainer.textContent=i.get(this.stars[a-1]).tooltip));j.invoke("MPagesStarsRatableBase-starsSet",null,{rating:a})};k.init=function(a,b,c){"use strict";new k(a,b,c)};e.exports=k}),null);
__d("XSharePreviewAsyncController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/share_preview/",{sid:{type:"String"},surl:{type:"String"},existing_post_id:{type:"Int"}})}),null);
__d("MSharePreview",["CSS","DOM","MCompositionConfigFields","MCompositionConfigStore","MCompositionShareFields","MCompositionShareStore","MCompositionUserActions","MRequest","MSubscriptionsHandlerMixin","XSharePreviewAsyncController","$","mixin"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){__p&&__p();var s;b=babelHelpers.inherits(a,r(o));s=b&&b.prototype;function a(a){"use strict";s.constructor.call(this),this.$MSharePreview1=h.scry(a,"div")[0],this.addSubscriptions(l.addListener("change",function(){return this.$MSharePreview2()}.bind(this)),h.listen(a,"click","close-link-preview-button",function(a){m.shareRemoveLinkPreview(l.get(k.SHARE_URI)),m.configDisablePhotosUpdate(!1)}))}a.prototype.init=function(){"use strict";__p&&__p();var a=j.get(i.POST_ID,null);if(!a)return;m.configDisablePhotosUpdate(!0);a=p.getURIBuilder().setInt("existing_post_id",a).getURI();this.$MSharePreview3=new n(a);this.$MSharePreview3.listen("finally",function(){g.hide(this.$MSharePreview1),this.$MSharePreview3=null}.bind(this));this.$MSharePreview3.send()};a.prototype.$MSharePreview2=function(){"use strict";__p&&__p();this.$MSharePreview3&&(this.$MSharePreview3.abort(),this.$MSharePreview3=null);if(l.isEmpty())h.setContent(q("mshare_preview_placeholder"),null);else{var a=l.get(k.ID),b=l.get(k.SHARE_URI);if(!a&&!b){h.setContent(q("mshare_preview_placeholder"),null);g.hide(this.$MSharePreview1);return}g.show(this.$MSharePreview1);a=p.getURIBuilder().setString("sid",a&&a.toString()).setString("surl",b).getURI();this.$MSharePreview3=new n(a);this.$MSharePreview3.listen("finally",function(){g.hide(this.$MSharePreview1),this.$MSharePreview3=null}.bind(this));this.$MSharePreview3.send()}};e.exports=a}),null);
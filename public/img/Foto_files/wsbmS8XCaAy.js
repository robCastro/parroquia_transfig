if (self.CavalryLogger) { CavalryLogger.start_js(["ooiVe"]); }

__d("MUFIConversationGuideRow.react",["ConversationGuideUIEvent","ConversationGuideUITypedLogger","MUFIConversationGuideBehaviorType","MUFIConversationGuideEmojiItem.react","MUFIConversationGuideFixedList.react","MUFIConversationGuideHScroll.react","MUFIConversationGuideMentionItem.react","MUFIConversationGuideStickerItem.react","MUFIConversationGuideTextItem.react","React","RelayModern","cx","MUFIConversationGuideRowQuery.graphql"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){"use strict";__p&&__p();var s;q.graphql;c=babelHelpers.inherits(a,p.Component);s=c&&c.prototype;function a(){__p&&__p();var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=s.constructor).call.apply(a,[this].concat(d)),this.$1=new Map(),this.state={behavior:i(),hidden:!1,maskedSuggestions:new Set()},this.$3=function(a){if(!a)return;this.props.handleAddText(a,this.state.behavior.clickToSend)}.bind(this),this.$4=function(a){this.props.handleAddMention(a,this.state.behavior.clickToSend)}.bind(this),this.$5=function(a){if(!a)return;this.props.handleAddSticker(a,this.state.behavior.clickToSend)}.bind(this),this.$6=function(a){this.state.behavior.dismissOnSelect&&this.setState({hidden:!0}),this.state.behavior.removeSuggestionOnSelect&&a&&this.setState(function(b){b=new Set(b.maskedSuggestions);a&&b.add(a);return{maskedSuggestions:b}})}.bind(this),this.$7=function(){new h().setEvent(g.HARD_DISMISS).setFeedbackID(this.props.ftentidentifier).setTrackingID(this.props.trackingID).setSessionID(this.props.sessionID).log(),this.setState({hidden:!0})}.bind(this),b}a.getDerivedStateFromProps=function(a,b){if(a.data){var c,d=((c=a.data)!=null?(c=c.feedback)!=null?(c=c.suggested_feedback)!=null?c.guide_suggestions:c:c:c)||[];a=i((c=a.data)!=null?(c=c.feedback)!=null?(c=c.suggested_feedback)!=null?c.guide_behavior:c:c:c);c=d.filter(function(a){return a.__typename===d[0].__typename}).filter(function(a){return a.__typename==="EmojiSuggestion"||a.__typename==="TextSuggestion"||a.__typename==="User"||a.__typename==="Sticker"});return babelHelpers["extends"]({},b,{behavior:a,hidden:b.hidden||c.length===b.maskedSuggestions.size})}return b};a.prototype.$2=function(a){return a.__typename==="TextSuggestion"||a.__typename==="User"};a.prototype.componentDidUpdate=function(a){this.props.composerHasText===!0&&a.composerHasText===!1&&this.state.behavior.dismissOnType&&new h().setEvent(g.SOFT_DISMISS).setFeedbackID(this.props.ftentidentifier).setTrackingID(this.props.trackingID).setSessionID(this.props.sessionID).log()};a.prototype.render=function(){__p&&__p();var a=this.props,b=a.error;a=a.data;if(b||!a||this.state.hidden||this.props.composerHasText&&this.state.behavior.dismissOnType)return null;var c=((b=a)!=null?(b=b.feedback)!=null?(b=b.suggested_feedback)!=null?b.guide_suggestions:b:b:b)||[];a=c.filter(function(a){return a.__typename===c[0].__typename}).map(function(a,b){__p&&__p();var c="carousel_item_"+(a.id||""),d;switch(a.__typename){case"User":d=m;break;case"Sticker":d=n;break;case"EmojiSuggestion":d=j;break;case"TextSuggestion":d=o;break;default:return null}this.$1.has(c)||this.$1.set(c,p.createRef());var e=this.$1.get(c);return p.createElement(d,{onMouseDown:this.props.handleMouseDown,className:"_7ave",ftentidentifier:this.props.ftentidentifier,handleMentionAdd:this.$4,handleStickerAdd:this.$5,handleTextAdd:this.$3,item:a,key:c,onClickHandled:this.$6,rankedIndex:b,ref:e,trackingID:this.props.trackingID,sessionID:this.props.sessionID})}.bind(this)).filter(function(a){return a&&a.key&&!this.state.maskedSuggestions.has(a.key)}.bind(this));this.$2(c[0])?b=p.createElement(l,{behavior:this.state.behavior,key:"hscroll",keyRefMap:this.$1,onCloseButtonClick:this.$7},a):b=p.createElement(k,{behavior:this.state.behavior,key:"fixedlist",keyRefMap:this.$1,onCloseButtonClick:this.$7},a);a=[p.createElement("div",{className:"_7an2",key:"headerText"},this.state.behavior.headerText),p.createElement("div",{className:"_7an3",key:"closeButton"},p.createElement("button",{onClick:this.$7},"X"))];return p.createElement("div",{className:"_7an8"},p.createElement("div",{className:"_7an9"},p.createElement("div",{className:"_7ana"},this.state.behavior.showHeader?a:null),b))};a.Query=function(){return b("MUFIConversationGuideRowQuery.graphql")};e.exports=a}),null);